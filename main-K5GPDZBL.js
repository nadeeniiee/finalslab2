var cN=Object.defineProperty,uN=Object.defineProperties;var lN=Object.getOwnPropertyDescriptors;var TI=Object.getOwnPropertySymbols;var dN=Object.prototype.hasOwnProperty,hN=Object.prototype.propertyIsEnumerable;var bI=(n,e,t)=>e in n?cN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})dN.call(e,t)&&bI(n,t,e[t]);if(TI)for(var t of TI(e))hN.call(e,t)&&bI(n,t,e[t]);return n},ye=(n,e)=>uN(n,lN(e));var C=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(l){i(l)}},s=u=>{try{c(t.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});var Bf;function Nu(){return Bf}function wn(n){let e=Bf;return Bf=n,e}var CI=Symbol("NotFound");function wo(n){return n===CI||n?.name==="\u0275NotFound"}var ut=null,Mu=!1,$f=1,fN=null,bt=Symbol("SIGNAL");function re(n){let e=ut;return ut=n,e}function xu(){return ut}var Ta={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ba(n){if(Mu)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(n);let e=ut.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ut.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ut.producers,t!==void 0&&t.producer===n)){ut.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ut&&(!r||gN(i,ut)))return;let o=Do(ut),s={producer:n,consumer:ut,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ut.producersTail=s,e!==void 0?e.nextProducer=s:ut.producers=s,o&&NI(n,s)}function SI(){$f++}function Hf(n){if(!(Do(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===$f)){if(!n.producerMustRecompute(n)&&!Sa(n)){Pu(n);return}n.producerRecomputeValue(n),Pu(n)}}function qf(n){if(n.consumers===void 0)return;let e=Mu;Mu=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||pN(r)}}finally{Mu=e}}function zf(){return ut?.consumerAllowSignalWrites!==!1}function pN(n){n.dirty=!0,qf(n),n.consumerMarkedDirty?.(n)}function Pu(n){n.dirty=!1,n.lastCleanEpoch=$f}function Ca(n){return n&&AI(n),re(n)}function AI(n){n.producersTail=void 0,n.recomputing=!0}function ku(n,e){re(e),n&&RI(n)}function RI(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Do(n))do t=Gf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Sa(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Hf(t),r!==t.version))return!0}return!1}function Aa(n){if(Do(n)){let e=n.producers;for(;e!==void 0;)e=Gf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function NI(n,e){let t=n.consumersTail,r=Do(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)NI(i.producer,i)}function Gf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Do(e)){let o=e.producers;for(;o!==void 0;)o=Gf(o)}return t}function Do(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Wf(n){fN?.(n)}function gN(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Kf(n,e){return Object.is(n,e)}function mN(){throw new Error}var MI=mN;function PI(n){MI(n)}function Qf(n){MI=n}var yN=null;function Yf(n,e){let t=Object.create(Ou);t.value=n,e!==void 0&&(t.equal=e);let r=()=>xI(t);return r[bt]=t,Wf(t),[r,s=>To(t,s),s=>Zf(t,s)]}function xI(n){return ba(n),n.value}function To(n,e){zf()||PI(n),n.equal(n.value,e)||(n.value=e,vN(n))}function Zf(n,e){zf()||PI(n),To(n,e(n.value))}var Ou=ye(V({},Ta),{equal:Kf,value:void 0,kind:"signal"});function vN(n){n.version++,SI(),qf(n),yN?.(n)}function te(n){return typeof n=="function"}function bo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Fu=bo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function hi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Oe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Fu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{kI(o)}catch(s){e=e??[],s instanceof Fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&hi(t,e)}remove(e){let{_finalizers:t}=this;t&&hi(t,e),e instanceof n&&e._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var Jf=Oe.EMPTY;function Lu(n){return n instanceof Oe||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function kI(n){te(n)?n():n.unsubscribe()}var tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Co={setTimeout(n,e,...t){let{delegate:r}=Co;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Co;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vu(n){Co.setTimeout(()=>{let{onUnhandledError:e}=tn;if(e)e(n);else throw n})}function Ra(){}var OI=Xf("C",void 0,void 0);function FI(n){return Xf("E",void 0,n)}function LI(n){return Xf("N",n,void 0)}function Xf(n,e,t){return{kind:n,value:e,error:t}}var fi=null;function So(n){if(tn.useDeprecatedSynchronousErrorHandling){let e=!fi;if(e&&(fi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=fi;if(fi=null,t)throw r}}else n()}function VI(n){tn.useDeprecatedSynchronousErrorHandling&&fi&&(fi.errorThrown=!0,fi.error=n)}var pi=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lu(e)&&e.add(this)):this.destination=IN}static create(e,t,r){return new Ao(e,t,r)}next(e){this.isStopped?tp(LI(e),this):this._next(e)}error(e){this.isStopped?tp(FI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tp(OI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_N=Function.prototype.bind;function ep(n,e){return _N.call(n,e)}var np=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ju(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ju(r)}else ju(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ju(t)}}},Ao=class extends pi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ep(e.next,o),error:e.error&&ep(e.error,o),complete:e.complete&&ep(e.complete,o)}):i=e}this.destination=new np(i)}};function ju(n){tn.useDeprecatedSynchronousErrorHandling?VI(n):Vu(n)}function EN(n){throw n}function tp(n,e){let{onStoppedNotification:t}=tn;t&&Co.setTimeout(()=>t(n,e))}var IN={closed:!0,next:Ra,error:EN,complete:Ra};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Uu(...n){return rp(n)}function rp(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=DN(t)?t:new Ao(t,r,i);return So(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jI(r),new r((i,o)=>{let s=new Ao({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ro](){return this}pipe(...t){return rp(t)(this)}toPromise(t){return t=jI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function jI(n){var e;return(e=n??tn.Promise)!==null&&e!==void 0?e:Promise}function wN(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function DN(n){return n&&n instanceof pi||wN(n)&&Lu(n)}function ip(n){return te(n?.lift)}function he(n){return e=>{if(ip(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new op(n,e,t,r,i)}var op=class extends pi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function No(){return he((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Mo=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ip(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return No()(this)}};var UI=bo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Bu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UI}next(t){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jf:(this.currentObservers=null,o.push(t),new Oe(()=>{this.currentObservers=null,hi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new Bu(e,t),n})(),Bu=class extends Ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jf}};var rt=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sp={now(){return(sp.delegate||Date).now()},delegate:void 0};var $u=class extends Oe{constructor(e,t){super()}schedule(e,t=0){return this}};var Na={setInterval(n,e,...t){let{delegate:r}=Na;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Na;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Po=class extends $u{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Na.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Na.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,hi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};xo.now=sp.now;var ko=class extends xo{constructor(e,t=xo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ap=new ko(Po);var Hu=class extends Po{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var qu=class extends ko{};var cp=new qu(Hu);var Ct=new ie(n=>n.complete());function BI(n){return n&&te(n.schedule)}function $I(n){return n[n.length-1]}function HI(n){return te($I(n))?n.pop():void 0}function Dr(n){return BI($I(n))?n.pop():void 0}function up(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function zI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(n,e||[])).next())})}function qI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gi(n){return this instanceof gi?(this.v=n,this):new gi(n)}function GI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(A){return Promise.resolve(A).then(y,p)}}function c(y,A){r[y]&&(i[y]=function(P){return new Promise(function(N,j){o.push([y,P,N,j])>1||u(y,P)})},A&&(i[y]=A(i[y])))}function u(y,A){try{l(r[y](A))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof gi?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,A){y(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function WI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qI=="function"?qI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var zu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Gu(n){return te(n?.then)}function Wu(n){return te(n[Ro])}function Ku(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Qu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yu=TN();function Zu(n){return te(n?.[Yu])}function Ju(n){return GI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield gi(t.read());if(i)return yield gi(void 0);yield yield gi(r)}}finally{t.releaseLock()}})}function Xu(n){return te(n?.getReader)}function Je(n){if(n instanceof ie)return n;if(n!=null){if(Wu(n))return bN(n);if(zu(n))return CN(n);if(Gu(n))return SN(n);if(Ku(n))return KI(n);if(Zu(n))return AN(n);if(Xu(n))return RN(n)}throw Qu(n)}function bN(n){return new ie(e=>{let t=n[Ro]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CN(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function SN(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vu)})}function AN(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function KI(n){return new ie(e=>{NN(n,e).catch(t=>e.error(t))})}function RN(n){return KI(Ju(n))}function NN(n,e){var t,r,i,o;return zI(this,void 0,void 0,function*(){try{for(t=WI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function St(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Tr(n,e=0){return he((t,r)=>{t.subscribe(fe(r,i=>St(r,n,()=>r.next(i),e),()=>St(r,n,()=>r.complete(),e),i=>St(r,n,()=>r.error(i),e)))})}function br(n,e=0){return he((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function QI(n,e){return Je(n).pipe(br(e),Tr(e))}function YI(n,e){return Je(n).pipe(br(e),Tr(e))}function ZI(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function JI(n,e){return new ie(t=>{let r;return St(t,e,()=>{r=n[Yu](),St(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function el(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{St(t,e,()=>{let r=n[Symbol.asyncIterator]();St(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function XI(n,e){return el(Ju(n),e)}function ew(n,e){if(n!=null){if(Wu(n))return QI(n,e);if(zu(n))return ZI(n,e);if(Gu(n))return YI(n,e);if(Ku(n))return el(n,e);if(Zu(n))return JI(n,e);if(Xu(n))return XI(n,e)}throw Qu(n)}function Me(n,e){return e?ew(n,e):Je(n)}function W(...n){let e=Dr(n);return Me(n,e)}function Oo(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function lp(n){return!!n&&(n instanceof ie||te(n.lift)&&te(n.subscribe))}var Kn=bo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return he((t,r)=>{let i=0;t.subscribe(fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:MN}=Array;function PN(n,e){return MN(e)?n(...e):n(e)}function tw(n){return ae(e=>PN(n,e))}var{isArray:xN}=Array,{getPrototypeOf:kN,prototype:ON,keys:FN}=Object;function nw(n){if(n.length===1){let e=n[0];if(xN(e))return{args:e,keys:null};if(LN(e)){let t=FN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function LN(n){return n&&typeof n=="object"&&kN(n)===ON}function rw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ma(...n){let e=Dr(n),t=HI(n),{args:r,keys:i}=nw(n);if(r.length===0)return Me([],e);let o=new ie(VN(r,e,i?s=>rw(i,s):Pt));return t?o.pipe(tw(t)):o}function VN(n,e,t=Pt){return r=>{iw(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)iw(e,()=>{let l=Me(n[u],e),f=!1;l.subscribe(fe(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function iw(n,e,t){n?St(t,n,e):e()}function ow(n,e,t,r,i,o,s,c){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?A(P):u.push(P),A=P=>{o&&e.next(P),l++;let N=!1;Je(t(P,f++)).subscribe(fe(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let j=u.shift();s?St(e,s,()=>A(j)):A(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Le(n,e,t=1/0){return te(e)?Le((r,i)=>ae((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),he((r,i)=>ow(r,i,n,t)))}function Fo(n=1/0){return Le(Pt,n)}function sw(){return Fo(1)}function Lo(...n){return sw()(Me(n,Dr(n)))}function Pa(n){return new ie(e=>{Je(n()).subscribe(e)})}function _t(n,e){return he((t,r)=>{let i=0;t.subscribe(fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qn(n){return he((e,t)=>{let r=null,i=!1,o;r=e.subscribe(fe(t,void 0,void 0,s=>{o=Je(n(s,Qn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function aw(n,e,t,r,i){return(o,s)=>{let c=t,u=e,l=0;o.subscribe(fe(s,f=>{let p=l++;u=c?n(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Cr(n,e){return te(e)?Le(n,e,1):Le(n,1)}function Sr(n){return he((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yn(n){return n<=0?()=>Ct:he((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tl(n=jN){return he((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jN(){return new Kn}function xa(n){return he((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,o)=>n(i,o,r)):Pt,Yn(1),t?Sr(e):tl(()=>new Kn))}function Vo(n){return n<=0?()=>Ct:he((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,o)=>n(i,o,r)):Pt,Vo(1),t?Sr(e):tl(()=>new Kn))}function nl(n,e){return he(aw(n,e,arguments.length>=2,!0))}function rl(...n){let e=Dr(n);return he((t,r)=>{(e?Lo(n,t,e):Lo(n,t)).subscribe(r)})}function Et(n,e){return he((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,f=o++;Je(n(u,f)).subscribe(i=fe(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function il(n){return he((e,t)=>{Je(n).subscribe(fe(t,()=>t.complete(),Ra)),!t.closed&&e.subscribe(t)})}function Xe(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}function cw(n){let e=re(null);try{return n()}finally{re(e)}}var Ar=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Tp=new Ar("20.3.15");var ul="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(Ii(e,t)),this.code=e}};function UN(n){return`NG0${Math.abs(n)}`}function Ii(n,e){return`${UN(n)}${e?": "+e:""}`}var wi=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("")}function Rr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Rr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function bp(n,e){return n?e?`${n} ${e}`:n:e||""}var BN=ve({__forward_ref__:ve});function Fa(n){return n.__forward_ref__=Fa,n.toString=function(){return Rr(this())},n}function It(n){return Cp(n)?n():n}function Cp(n){return typeof n=="function"&&n.hasOwnProperty(BN)&&n.__forward_ref__===Fa}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function La(n){return $N(n,Uo)}function Sp(n){return La(n)!==null}function $N(n,e){return n.hasOwnProperty(e)&&n[e]||null}function HN(n){let e=n?.[Uo]??null;return e||null}function fp(n){return n&&n.hasOwnProperty(sl)?n[sl]:null}var Uo=ve({\u0275prov:ve}),sl=ve({\u0275inj:ve}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ap(n){return n&&!!n.\u0275providers}var Rp=ve({\u0275cmp:ve}),Np=ve({\u0275dir:ve}),Mp=ve({\u0275pipe:ve}),Pp=ve({\u0275mod:ve}),yi=ve({\u0275fac:ve}),Di=ve({__NG_ELEMENT_ID__:ve}),lw=ve({__NG_ENV_ID__:ve});function Va(n){return typeof n=="string"?n:n==null?"":String(n)}function hw(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Va(n)}var fw=ve({ngErrorCode:ve}),qN=ve({ngErrorMessage:ve}),zN=ve({ngTokenPath:ve});function xp(n,e){return pw("",-200,e)}function ll(n,e){throw new H(-201,!1)}function pw(n,e,t){let r=new H(e,n);return r[fw]=e,r[qN]=n,t&&(r[zN]=t),r}function GN(n){return n[fw]}var pp;function gw(){return pp}function xt(n){let e=pp;return pp=n,e}function kp(n,e,t){let r=La(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ll(n,"Injector")}var WN={},mi=WN,gp="__NG_DI_FLAG__",mp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=vi(t)||0;try{return this.injector.get(e,r&8?null:mi,r)}catch(i){if(wo(i))return i;throw i}}};function KN(n,e=0){let t=Nu();if(t===void 0)throw new H(-203,!1);if(t===null)return kp(n,void 0,e);{let r=QN(e),i=t.retrieve(n,r);if(wo(i)){if(r.optional)return null;throw i}return i}}function Q(n,e=0){return(gw()||KN)(It(n),e)}function Op(n){throw new H(202,!1)}function R(n,e){return Q(n,vi(e))}function vi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function QN(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function yp(n){let e=[];for(let t=0;t<n.length;t++){let r=It(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=YN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Q(i,o))}else e.push(Q(r))}return e}function Bo(n,e){return n[gp]=e,n.prototype[gp]=e,n}function YN(n){return n[gp]}function _i(n,e){let t=n.hasOwnProperty(yi);return t?n[yi]:null}function dl(n,e){n.forEach(t=>Array.isArray(t)?dl(t,e):e(t))}function Fp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ja(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hl(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}var Ti={},nn=[],er=new q(""),Lp=new q("",-1),Vp=new q(""),Oa=class{get(e,t=mi){if(t===mi){let i=pw("",-201);throw i.name="\u0275NotFound",i}return t}};function jp(n){return n[Pp]||null}function tr(n){return n[Rp]||null}function Up(n){return n[Np]||null}function mw(n){return n[Mp]||null}function Ht(n){return{\u0275providers:n}}function yw(n){return Ht([{provide:er,multi:!0,useValue:n}])}function vw(...n){return{\u0275providers:Bp(!0,n),\u0275fromNgModule:!0}}function Bp(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return dl(e,s=>{let c=s;al(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&_w(i,o),t}function _w(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$p(i,o=>{e(o,r)})}}function al(n,e,t,r){if(n=It(n),!n)return!1;let i=null,o=fp(n),s=!o&&tr(n);if(!o&&!s){let u=n.ngModule;if(o=fp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)al(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{dl(o.imports,f=>{al(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&_w(l,e)}if(!c){let l=_i(i)||(()=>new i);e({provide:i,useFactory:l,deps:nn},i),e({provide:Vp,useValue:i,multi:!0},i),e({provide:er,useValue:()=>Q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;$p(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $p(n,e){for(let t of n)Ap(t)&&(t=t.\u0275providers),Array.isArray(t)?$p(t,e):e(t)}var ZN=ve({provide:String,useValue:ve});function Ew(n){return n!==null&&typeof n=="object"&&ZN in n}function JN(n){return!!(n&&n.useExisting)}function XN(n){return!!(n&&n.useFactory)}function cl(n){return typeof n=="function"}var Ua=new q(""),ol={},dw={},hp;function Ba(){return hp===void 0&&(hp=new Oa),hp}var Ve=class{},Ei=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,_p(e,s=>this.processProvider(s)),this.records.set(Lp,jo(void 0,this)),i.has("environment")&&this.records.set(Ve,jo(void 0,this));let o=this.records.get(Ua);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vp,nn,{self:!0}))}retrieve(e,t){let r=vi(t)||0;try{return this.get(e,mi,r)}catch(i){if(wo(i))return i;throw i}}destroy(){ka(this),this._destroyed=!0;let e=re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(e)}}onDestroy(e){return ka(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ka(this);let t=wn(this),r=xt(void 0),i;try{return e()}finally{wn(t),xt(r)}}get(e,t=mi,r){if(ka(this),e.hasOwnProperty(lw))return e[lw](this);let i=vi(r),o,s=wn(this),c=xt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=iM(e)&&La(e);f&&this.injectableDefInScope(f)?l=jo(vp(e),ol):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ba():this.parent;return t=i&8&&t===mi?null:t,u.get(e,t)}catch(u){let l=GN(u);throw l===-200||l===-201?new H(l,null):u}finally{xt(c),wn(s)}}resolveInjectorInitializers(){let e=re(null),t=wn(this),r=xt(void 0),i;try{let o=this.get(er,nn,{self:!0});for(let s of o)s()}finally{wn(t),xt(r),re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=It(e);let t=cl(e)?e:It(e&&e.provide),r=tM(e);if(!cl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=jo(void 0,ol,!0),i.factory=()=>yp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=re(null);try{if(t.value===dw)throw xp(Rr(e));return t.value===ol&&(t.value=dw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&rM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{re(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=It(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vp(n){let e=La(n),t=e!==null?e.factory:_i(n);if(t!==null)return t;if(n instanceof q)throw new H(204,!1);if(n instanceof Function)return eM(n);throw new H(204,!1)}function eM(n){if(n.length>0)throw new H(204,!1);let t=HN(n);return t!==null?()=>t.factory(n):()=>new n}function tM(n){if(Ew(n))return jo(void 0,n.useValue);{let e=Iw(n);return jo(e,ol)}}function Iw(n,e,t){let r;if(cl(n)){let i=It(n);return _i(i)||vp(i)}else if(Ew(n))r=()=>It(n.useValue);else if(XN(n))r=()=>n.useFactory(...yp(n.deps||[]));else if(JN(n))r=(i,o)=>Q(It(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=It(n&&(n.useClass||n.provide));if(nM(n))r=()=>new i(...yp(n.deps));else return _i(i)||vp(i)}return r}function ka(n){if(n.destroyed)throw new H(205,!1)}function jo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nM(n){return!!n.deps}function rM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function iM(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function _p(n,e){for(let t of n)Array.isArray(t)?_p(t,e):t&&Ap(t)?_p(t.\u0275providers,e):e(t)}function $e(n,e){let t;n instanceof Ei?(ka(n),t=n):t=new mp(n);let r,i=wn(t),o=xt(void 0);try{return e()}finally{wn(i),xt(o)}}function ww(){return gw()!==void 0||Nu()!=null}var on=0,oe=1,J=2,it=3,qt=4,zt=5,$a=6,$o=7,lt=8,Mr=9,Dn=10,We=11,Ho=12,Hp=13,bi=14,Gt=15,Ci=16,Si=17,Ai=18,Ha=19,qp=20,Jn=21,fl=22,qa=23,kt=24,Ri=25,za=26,Ot=27,Dw=1;var Pr=7,Ga=8,Wa=9,At=10;function Tn(n){return Array.isArray(n)&&typeof n[Dw]=="object"}function sn(n){return Array.isArray(n)&&n[Dw]===!0}function zp(n){return(n.flags&4)!==0}function xr(n){return n.componentOffset>-1}function Ka(n){return(n.flags&1)===1}function Ni(n){return!!n.template}function qo(n){return(n[J]&512)!==0}function Mi(n){return(n[J]&256)===256}var Tw="svg",bw="math";function Wt(n){for(;Array.isArray(n);)n=n[on];return n}function Cw(n,e){return Wt(e[n])}function an(n,e){return Wt(e[n.index])}function pl(n,e){return n.data[e]}function Kt(n,e){let t=e[n];return Tn(t)?t:t[on]}function gl(n){return(n[J]&128)===128}function Sw(n){return sn(n[it])}function Qa(n,e){return e==null?null:n[e]}function Gp(n){n[Si]=0}function Wp(n){n[J]&1024||(n[J]|=1024,gl(n)&&zo(n))}function Aw(n,e){for(;n>0;)e=e[bi],n--;return e}function Ya(n){return!!(n[J]&9216||n[kt]?.dirty)}function ml(n){n[Dn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Ya(n)&&zo(n)}function zo(n){n[Dn].changeDetectionScheduler?.notify(0);let e=Nr(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!gl(e)));)e=Nr(e)}function Kp(n,e){if(Mi(n))throw new H(911,!1);n[Jn]===null&&(n[Jn]=[]),n[Jn].push(e)}function Rw(n,e){if(n[Jn]===null)return;let t=n[Jn].indexOf(e);t!==-1&&n[Jn].splice(t,1)}function Nr(n){let e=n[it];return sn(e)?e[it]:e}function Nw(n){return n[$o]??=[]}function Mw(n){return n.cleanup??=[]}var pe={lFrame:zw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ep=!1;function Pw(){return pe.lFrame.elementDepthCount}function xw(){pe.lFrame.elementDepthCount++}function kw(){pe.lFrame.elementDepthCount--}function Qp(){return pe.bindingsEnabled}function Ow(){return pe.skipHydrationRootTNode!==null}function Fw(n){return pe.skipHydrationRootTNode===n}function Lw(){pe.skipHydrationRootTNode=null}function Pe(){return pe.lFrame.lView}function kr(){return pe.lFrame.tView}function cn(n){return pe.lFrame.contextLView=n,n[lt]}function un(n){return pe.lFrame.contextLView=null,n}function Rt(){let n=Yp();for(;n!==null&&n.type===64;)n=n.parent;return n}function Yp(){return pe.lFrame.currentTNode}function Vw(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Go(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function Zp(){return pe.lFrame.isParent}function jw(){pe.lFrame.isParent=!1}function Jp(){return Ep}function Xp(n){let e=Ep;return Ep=n,e}function Uw(n){return pe.lFrame.bindingIndex=n}function yl(){return pe.lFrame.bindingIndex++}function Bw(){return pe.lFrame.inI18n}function $w(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,vl(e)}function Hw(){return pe.lFrame.currentDirectiveIndex}function vl(n){pe.lFrame.currentDirectiveIndex=n}function eg(n){pe.lFrame.currentQueryIndex=n}function oM(n){let e=n[oe];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function tg(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=oM(o),i===null||(o=o[bi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=pe.lFrame=qw();return r.currentTNode=e,r.lView=n,!0}function _l(n){let e=qw(),t=n[oe];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qw(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?zw(n):e}function zw(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Gw(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ng=Gw;function El(){let n=Gw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ww(n){return(pe.lFrame.contextLView=Aw(n,pe.lFrame.contextLView))[lt]}function Il(){return pe.lFrame.selectedIndex}function Or(n){pe.lFrame.selectedIndex=n}function rg(){let n=pe.lFrame;return pl(n.tView,n.selectedIndex)}function Kw(){return pe.lFrame.currentNamespace}var Qw=!0;function wl(){return Qw}function Dl(n){Qw=n}function Ip(n,e=null,t=null,r){let i=ig(n,e,t,r);return i.resolveInjectorInitializers(),i}function ig(n,e=null,t=null,r,i=new Set){let o=[t||nn,vw(n)];return r=r||(typeof n=="object"?void 0:Rr(n)),new Ei(o,e||Ba(),r||null,i)}var Be=class n{static THROW_IF_NOT_FOUND=mi;static NULL=new Oa;static create(e,t){if(Array.isArray(e))return Ip({name:""},t,e,"");{let r=e.name??"";return Ip({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>Q(Lp)});static __NG_ELEMENT_ID__=-1},je=new q(""),ln=(()=>{class n{static __NG_ELEMENT_ID__=sM;static __NG_ENV_ID__=t=>t}return n})(),wp=class extends ln{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Mi(this._lView)}onDestroy(e){let t=this._lView;return Kp(t,e),()=>Rw(t,e)}};function sM(){return new wp(Pe())}var rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nt=new q("",{providedIn:"root",factory:()=>{let n=R(Ve),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(rn),e.handleError(t))}}}),Yw={provide:er,useValue:()=>void R(rn),multi:!0},aM=new q("",{providedIn:"root",factory:()=>{let n=R(je).defaultView;if(!n)return;let e=R(Nt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(ln).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function og(){return Ht([yw(()=>void R(aM))])}function le(n,e){let[t,r,i]=Yf(n,e?.equal),o=t,s=o[bt];return o.set=r,o.update=i,o.asReadonly=Zw.bind(o),o}function Zw(){let n=this[bt];if(n.readonlyFn===void 0){let e=()=>this();e[bt]=n,n.readonlyFn=e}return n.readonlyFn}var Tl=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=cM}return n})();function cM(){return new Tl(Pe(),Rt())}var Xn=class{},Za=new q("",{providedIn:"root",factory:()=>!1});var sg=new q(""),ag=new q(""),bn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wo=(()=>{class n{internalPendingTasks=R(bn);scheduler=R(Xn);errorHandler=R(Nt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ja(...n){}var cg=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new Dp})}return n})(),Dp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Oi(n){return{toString:n}.toString()}var Ko="__annotations__",Qo="__parameters__",Jw="__prop__metadata__";function yM(n,e,t,r,i){return Oi(()=>{let o=xD(e);function s(...c){if(this instanceof s)return o.call(this,...c),this;let u=new s(...c);return function(f){return i&&i(f,...c),(f.hasOwnProperty(Ko)?f[Ko]:Object.defineProperty(f,Ko,{value:[]})[Ko]).push(u),f}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}function xD(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ts(n,e,t){return Oi(()=>{let r=xD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,f){let p=u.hasOwnProperty(Qo)?u[Qo]:Object.defineProperty(u,Qo,{value:[]})[Qo];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var kD=Bo(ts("Inject",n=>({token:n})),-1),Sn=Bo(ts("Optional"),8),OD=Bo(ts("Self"),2),FD=Bo(ts("SkipSelf"),4),LD=Bo(ts("Host"),1);function gg(n){let e=wi.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}var Xw={\u0275\u0275defineInjectable:B,\u0275\u0275defineInjector:$t,\u0275\u0275inject:Q,\u0275\u0275invalidFactoryDep:Op,resolveForwardRef:It},VD=Function;function Xa(n){return typeof n=="function"}var vM=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,_M=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,EM=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,IM=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;function wM(n){return vM.test(n)||IM.test(n)||_M.test(n)&&!EM.test(n)}var Nl=class{_reflect;constructor(e){this._reflect=e||wi.Reflect}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let r;typeof e>"u"?r=hl(t.length):r=hl(e.length);for(let i=0;i<r.length;i++)typeof e>"u"?r[i]=[]:e[i]&&e[i]!=Object?r[i]=[e[i]]:r[i]=[],t&&t[i]!=null&&(r[i]=r[i].concat(t[i]));return r}_ownParameters(e,t){let r=e.toString();if(wM(r))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;let i=e.ctorParameters;if(i&&i!==t.ctorParameters){let c=typeof i=="function"?i():i,u=c.map(f=>f&&f.type),l=c.map(f=>f&&ug(f.decorators));return this._zipTypesAndAnnotations(u,l)}let o=e.hasOwnProperty(Qo)&&e[Qo],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||o?this._zipTypesAndAnnotations(s,o):hl(e.length)}parameters(e){if(!Xa(e))return[];let t=bl(e),r=this._ownParameters(e,t);return!r&&t!==Object&&(r=this.parameters(t)),r||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let r=e.annotations;return typeof r=="function"&&r.annotations&&(r=r.annotations),r}return e.decorators&&e.decorators!==t.decorators?ug(e.decorators):e.hasOwnProperty(Ko)?e[Ko]:null}annotations(e){if(!Xa(e))return[];let t=bl(e),r=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(r)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let r=e.propMetadata;return typeof r=="function"&&r.propMetadata&&(r=r.propMetadata),r}if(e.propDecorators&&e.propDecorators!==t.propDecorators){let r=e.propDecorators,i={};return Object.keys(r).forEach(o=>{i[o]=ug(r[o])}),i}return e.hasOwnProperty(Jw)?e[Jw]:null}propMetadata(e){if(!Xa(e))return{};let t=bl(e),r={};if(t!==Object){let o=this.propMetadata(t);Object.keys(o).forEach(s=>{r[s]=o[s]})}let i=this._ownPropMetadata(e,t);return i&&Object.keys(i).forEach(o=>{let s=[];r.hasOwnProperty(o)&&s.push(...r[o]),s.push(...i[o]),r[o]=s}),r}ownPropMetadata(e){return Xa(e)?this._ownPropMetadata(e,bl(e))||{}:{}}hasLifecycleHook(e,t){return e instanceof VD&&t in e.prototype}};function ug(n){return n?n.map(e=>{let r=e.type.annotationCls,i=e.args?e.args:[];return new r(...i)}):[]}function bl(n){let e=n.prototype?Object.getPrototypeOf(n.prototype):null;return(e?e.constructor:null)||Object}var Ml=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function jD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fi=(()=>{let n=()=>UD;return n.ngInherit=!0,n})();function UD(n){return n.type.prototype.ngOnChanges&&(n.setInput=TM),DM}function DM(){let n=$D(this),e=n?.current;if(e){let t=n.previous;if(t===Ti)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TM(n,e,t,r,i){let o=this.declaredInputs[r],s=$D(n)||bM(n,{previous:Ti,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Ml(l&&l.currentValue,t,u===Ti),jD(n,e,i,t)}var BD="__ngSimpleChanges__";function $D(n){return n[BD]||null}function bM(n,e){return n[BD]=e}var eD=[];var De=function(n,e=null,t){for(let r=0;r<eD.length;r++){let i=eD[r];i(n,e,t)}};function CM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function HD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Sl(n,e,t){qD(n,e,3,t)}function Al(n,e,t,r){(n[J]&3)===t&&qD(n,e,t,r)}function lg(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function qD(n,e,t,r){let i=r!==void 0?n[Si]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Si]+=65536),(c<o||o==-1)&&(SM(n,t,e,u),n[Si]=(n[Si]&4294901760)+u+2),u++}function tD(n,e){De(4,n,e);let t=re(null);try{e.call(n)}finally{re(t),De(5,n,e)}}function SM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[J]>>14<n[Si]>>16&&(n[J]&3)===e&&(n[J]+=16384,tD(c,o)):tD(c,o)}var Zo=-1,nc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function AM(n){return(n.flags&8)!==0}function RM(n){return(n.flags&16)!==0}function NM(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];MM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function zD(n){return n===3||n===4||n===6}function MM(n){return n.charCodeAt(0)===64}function Mg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?nD(n,t,i,null,e[++r]):nD(n,t,i,null,null))}}return n}function nD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function GD(n){return n!==Zo}function Pl(n){return n&32767}function PM(n){return n>>16}function xl(n,e){let t=PM(n),r=e;for(;t>0;)r=r[bi],t--;return r}var mg=!0;function rD(n){let e=mg;return mg=n,e}var xM=256,WD=xM-1,KD=5,kM=0,Cn={};function OM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Di)&&(r=t[Di]),r==null&&(r=t[Di]=kM++);let i=r&WD,o=1<<i;e.data[n+(i>>KD)]|=o}function QD(n,e){let t=YD(n,e);if(t!==-1)return t;let r=e[oe];r.firstCreatePass&&(n.injectorIndex=e.length,dg(r.data,n),dg(e,null),dg(r.blueprint,null));let i=Pg(n,e),o=n.injectorIndex;if(GD(i)){let s=Pl(i),c=xl(i,e),u=c[oe].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function dg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function YD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Pg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=tT(i),r===null)return Zo;if(t++,i=i[bi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Zo}function FM(n,e,t){OM(n,e,t)}function LM(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(zD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function ZD(n,e,t){if(t&8||n!==void 0)return n;ll(e,"NodeInjector")}function JD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Mr],o=xt(void 0);try{return i?i.get(e,r,t&8):kp(e,r,t&8)}finally{xt(o)}}return ZD(r,e,t)}function XD(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=$M(n,e,t,r,Cn);if(s!==Cn)return s}let o=eT(n,e,t,r,Cn);if(o!==Cn)return o}return JD(e,t,r,i)}function eT(n,e,t,r,i){let o=UM(t);if(typeof o=="function"){if(!tg(e,n,r))return r&1?ZD(i,t,r):JD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ll(t);else return s}finally{ng()}}else if(typeof o=="number"){let s=null,c=YD(n,e),u=Zo,l=r&1?e[Gt][zt]:null;for((c===-1||r&4)&&(u=c===-1?Pg(n,e):e[c+8],u===Zo||!oD(r,!1)?c=-1:(s=e[oe],c=Pl(u),e=xl(u,e)));c!==-1;){let f=e[oe];if(iD(o,c,f.data)){let p=VM(c,e,t,s,r,l);if(p!==Cn)return p}u=e[c+8],u!==Zo&&oD(r,e[oe].data[c+8]===l)&&iD(o,c,e)?(s=f,c=Pl(u),e=xl(u,e)):c=-1}}return i}function VM(n,e,t,r,i,o){let s=e[oe],c=s.data[n+8],u=r==null?xr(c)&&mg:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=jM(c,s,t,u,l);return f!==null?yg(e,s,f,c,i):Cn}function jM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let A=s[y];if(y<u&&t===A||y>=u&&A.type===t)return y}if(i){let y=s[u];if(y&&Ni(y)&&y.type===t)return u}return null}function yg(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof nc){let c=o;if(c.resolving){let y=hw(s[t]);throw xp(y)}let u=rD(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],f,p=c.injectImpl?xt(c.injectImpl):null,m=tg(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&CM(t,s[t],e)}finally{p!==null&&xt(p),rD(u),c.resolving=!1,ng()}}return o}function UM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Di)?n[Di]:void 0;return typeof e=="number"?e>=0?e&WD:BM:e}function iD(n,e,t){let r=1<<n;return!!(t[e+(n>>KD)]&r)}function oD(n,e){return!(n&2)&&!(n&1&&e)}var Pi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return XD(this._tNode,this._lView,e,vi(r),t)}};function BM(){return new Pi(Rt(),Pe())}function oc(n){return Oi(()=>{let e=n.prototype.constructor,t=e[yi]||vg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[yi]||vg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function vg(n){return Cp(n)?()=>{let e=vg(It(n));return e&&e()}:_i(n)}function $M(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!qo(s);){let c=eT(o,s,t,r|2,Cn);if(c!==Cn)return c;let u=o.parent;if(!u){let l=s[qp];if(l){let f=l.get(t,Cn,r);if(f!==Cn)return f}u=tT(s),s=s[bi]}o=u}return i}function tT(n){let e=n[oe],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function ns(n){return LM(Rt(),n)}var nT=ts("Attribute",n=>({attributeName:n,__NG_ELEMENT_ID__:()=>ns(n)})),sD=null;function HM(){return sD=sD||new Nl}function qM(n){return rT(HM().parameters(n))}function rT(n){return n.map(e=>zM(e))}function zM(n){let e={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(n)&&n.length>0)for(let t=0;t<n.length;t++){let r=n[t];if(r===void 0)continue;let i=Object.getPrototypeOf(r);if(r instanceof Sn||i.ngMetadataName==="Optional")e.optional=!0;else if(r instanceof FD||i.ngMetadataName==="SkipSelf")e.skipSelf=!0;else if(r instanceof OD||i.ngMetadataName==="Self")e.self=!0;else if(r instanceof LD||i.ngMetadataName==="Host")e.host=!0;else if(r instanceof kD)e.token=r.token;else if(r instanceof nT){if(r.attributeName===void 0)throw new H(204,!1);e.attribute=r.attributeName}else e.token=r}else n===void 0||Array.isArray(n)&&n.length===0?e.token=null:e.token=n;return e}function GM(n,e){let t=null,r=null;n.hasOwnProperty(Uo)||Object.defineProperty(n,Uo,{get:()=>(t===null&&(t=gg({usage:0,kind:"injectable",type:n}).compileInjectable(Xw,`ng:///${n.name}/\u0275prov.js`,YM(n,e))),t)}),n.hasOwnProperty(yi)||Object.defineProperty(n,yi,{get:()=>{if(r===null){let i=gg({usage:0,kind:"injectable",type:n});r=i.compileFactory(Xw,`ng:///${n.name}/\u0275fac.js`,{name:n.name,type:n,typeArgumentCount:0,deps:qM(n),target:i.FactoryTarget.Injectable})}return r},configurable:!0})}var WM=ve({provide:String,useValue:ve});function aD(n){return n.useClass!==void 0}function KM(n){return WM in n}function cD(n){return n.useFactory!==void 0}function QM(n){return n.useExisting!==void 0}function YM(n,e){let t=e||{providedIn:null},r={name:n.name,type:n,typeArgumentCount:0,providedIn:t.providedIn};return(aD(t)||cD(t))&&t.deps!==void 0&&(r.deps=rT(t.deps)),aD(t)?r.useClass=t.useClass:KM(t)?r.useValue=t.useValue:cD(t)?r.useFactory=t.useFactory:QM(t)&&(r.useExisting=t.useExisting),r}var xg=yM("Injectable",void 0,void 0,void 0,(n,e)=>GM(n,e));function ZM(){return ql(Rt(),Pe())}function ql(n,e){return new Li(an(n,e))}var Li=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ZM}return n})();function iT(n){return(n.flags&128)===128}var kg=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(kg||{}),oT=new Map,JM=0;function XM(){return JM++}function eP(n){oT.set(n[Ha],n)}function _g(n){oT.delete(n[Ha])}var uD="__ngContext__";function Jo(n,e){Tn(e)?(n[uD]=e[Ha],eP(e)):n[uD]=e}function sT(n){return cT(n[Ho])}function aT(n){return cT(n[qt])}function cT(n){for(;n!==null&&!sn(n);)n=n[qt];return n}var Eg;function Og(n){Eg=n}function uT(){if(Eg!==void 0)return Eg;if(typeof document<"u")return document;throw new H(210,!1)}var zl=new q("",{providedIn:"root",factory:()=>tP}),tP="ng",Gl=new q(""),Vi=new q("",{providedIn:"platform",factory:()=>"unknown"});var Wl=new q("",{providedIn:"root",factory:()=>uT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nP="h",rP="b";var lT=!1,dT=new q("",{providedIn:"root",factory:()=>lT});var Fg=new q("");var iP=(n,e,t,r)=>{};function oP(n,e,t,r){iP(n,e,t,r)}function Lg(n){return(n.flags&32)===32}var sP=()=>null;function hT(n,e,t=!1){return sP(n,e,t)}function fT(n,e){let t=n.contentQueries;if(t!==null){let r=re(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];eg(o),c.contentQueries(2,e[s],s)}}}finally{re(r)}}}function Ig(n,e,t){eg(0);let r=re(null);try{e(n,t)}finally{re(r)}}function pT(n,e,t){if(zp(e)){let r=re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{re(r)}}}var nr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(nr||{});var Cl;function aP(){if(Cl===void 0&&(Cl=null,wi.trustedTypes))try{Cl=wi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cl}function lD(n){return aP()?.createScriptURL(n)||n}var kl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ul})`}};function Kl(n){return n instanceof kl?n.changingThisBreaksApplicationSecurity:n}function Vg(n,e){let t=gT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ul})`)}return t===e}function gT(n){return n instanceof kl&&n.getTypeName()||null}var cP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mT(n){return n=String(n),n.match(cP)?n:"unsafe:"+n}function uP(n,e){return n.createText(e)}function lP(n,e,t){n.setValue(e,t)}function yT(n,e,t){return n.createElement(e,t)}function Ol(n,e,t,r,i){n.insertBefore(e,t,r,i)}function vT(n,e,t){n.appendChild(e,t)}function dD(n,e,t,r,i){r!==null?Ol(n,e,t,r,i):vT(n,e,t)}function dP(n,e,t,r){n.removeChild(null,e,t,r)}function hP(n,e,t){n.setAttribute(e,"style",t)}function fP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _T(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&NM(n,e,r),i!==null&&fP(n,e,i),o!==null&&hP(n,e,o)}var Ql=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ql||{});function ET(n){let e=wT();return e?e.sanitize(Ql.URL,n)||"":Vg(n,"URL")?Kl(n):mT(Va(n))}function IT(n){let e=wT();if(e)return lD(e.sanitize(Ql.RESOURCE_URL,n)||"");if(Vg(n,"ResourceURL"))return lD(Kl(n));throw new H(904,!1)}function pP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?IT:ET}function jg(n,e,t){return pP(e,t)(n)}function wT(){let n=Pe();return n&&n[Dn].sanitizer}function DT(n){return n instanceof Function?n():n}function gP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var TT="ng-template";function mP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&gP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ug(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ug(n){return n.type===4&&n.value!==TT}function yP(n,e,t){let r=n.type===4&&!t?TT:n.value;return e===r}function vP(n,e,t){let r=4,i=n.attrs,o=i!==null?IP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!dn(r)&&!dn(u))return!1;if(s&&dn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!yP(n,u,t)||u===""&&e.length===1){if(dn(r))return!1;s=!0}}else if(r&8){if(i===null||!mP(n,i,u,t)){if(dn(r))return!1;s=!0}}else{let l=e[++c],f=_P(u,i,Ug(n),t);if(f===-1){if(dn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(dn(r))return!1;s=!0}}}}return dn(r)||s}function dn(n){return(n&1)===0}function _P(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wP(e,n)}function EP(n,e,t=!1){for(let r=0;r<e.length;r++)if(vP(n,e[r],t))return!0;return!1}function IP(n){for(let e=0;e<n.length;e++){let t=n[e];if(zD(t))return e}return n.length}function wP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function hD(n,e){return n?":not("+e.trim()+")":e}function DP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dn(s)&&(e+=hD(o,i),i=""),r=s,o=o||!dn(r);t++}return i!==""&&(e+=hD(o,i)),e}function TP(n){return n.map(DP).join(",")}function bP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!dn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var rs={};function Bg(n,e,t,r,i,o,s,c,u,l,f){let p=Ot+r,m=p+i,y=CP(p,m),A=typeof l=="function"?l():l;return y[oe]={type:n,blueprint:y,template:t,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function CP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:rs);return t}function SP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $g(n,e,t,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[on]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),Gp(p),p[it]=p[bi]=n,p[lt]=t,p[Dn]=s||n&&n[Dn],p[We]=c||n&&n[We],p[Mr]=u||n&&n[Mr]||null,p[zt]=o,p[Ha]=XM(),p[$a]=f,p[qp]=l,p[Gt]=e.type==2?n[Gt]:p,p}function AP(n,e,t){let r=an(e,n),i=SP(t),o=n[Dn].rendererFactory,s=Hg(n,$g(n,i,null,bT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function bT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function CT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Hg(n,e){return n[Ho]?n[Hp][qt]=e:n[Ho]=e,n[Hp]=e,e}function K(n=1){ST(kr(),Pe(),Il()+n,!1)}function ST(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Sl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Al(e,o,0,t)}Or(t)}var Yl=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Yl||{});function wg(n,e,t,r){let i=re(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Yl.SignalBased)!==0&&(u=e[o][bt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):jD(e,u,o,r)}finally{re(i)}}var ji=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ji||{}),RP;function qg(n,e){return RP(n,e)}var Xo=new Set,Zl=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Zl||{}),Ui=new q(""),fD=new Set;function Bi(n){fD.has(n)||(fD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var AT=!1,Dg=class extends Ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ww()&&(this.destroyRef=R(ln,{optional:!0})??void 0,this.pendingTasks=R(bn,{optional:!0})??void 0)}emit(e){let t=re(null);try{super.next(e)}finally{re(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=Dg;function RT(n){let e,t;function r(){n=Ja;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pD(n){return queueMicrotask(()=>n()),()=>{n=Ja}}var zg="isAngularZone",Fl=zg+"_ID",NP=0,Te=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=AT}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,MP,Ja,Ja);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},MP={};function Gg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function PP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){RT(()=>{n.callbackScheduled=!1,Tg(n),n.isCheckStableRunning=!0,Gg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Tg(n)}function xP(n){let e=()=>{PP(n)},t=NP++;n._inner=n._inner.fork({name:"angular",properties:{[zg]:!0,[Fl]:t,[Fl+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(kP(u))return r.invokeTask(o,s,c,u);try{return gD(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),mD(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return gD(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!OP(u)&&e(),mD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Tg(n),Gg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Tg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function gD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mD(n){n._nesting--,Gg(n)}var Ll=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function kP(n){return NT(n,"__ignore_ng_zone__")}function OP(n){return NT(n,"__scheduler_tick__")}function NT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Wg=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),MT=[0,1,2,3],PT=(()=>{class n{ngZone=R(Te);scheduler=R(Xn);errorHandler=R(rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Ui,{optional:!0})}execute(){let t=this.sequences.size>0;t&&De(16),this.executing=!0;for(let r of MT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&De(17)}register(t){let{view:r}=t;r!==void 0?((r[Ri]??=[]).push(t),zo(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Zl.AFTER_NEXT_RENDER,t):t()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ri];e&&(this.view[Ri]=e.filter(t=>t!==this))}};function Jl(n,e){let t=e?.injector??R(Be);return Bi("NgAfterNextRender"),LP(n,t,e,!0)}function FP(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function LP(n,e,t,r){let i=e.get(Wg);i.impl??=e.get(PT);let o=e.get(Ui,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ln):null,c=e.get(Tl,null,{optional:!0}),u=new Vl(i.impl,FP(n),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var VP=new q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function xT(n,e,t){let r=n.get(VP);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function jP(n,e){for(let[t,r]of e)xT(n,r.animateFns)}function yD(n,e,t,r){let i=n?.[za]?.enter;e!==null&&i&&i.has(t.index)&&jP(r,i)}function Yo(n,e,t,r,i,o,s,c){if(i!=null){let u,l=!1;sn(i)?u=i:Tn(i)&&(l=!0,i=i[on]);let f=Wt(i);n===0&&r!==null?(yD(c,r,o,t),s==null?vT(e,r,f):Ol(e,r,f,s||null,!0)):n===1&&r!==null?(yD(c,r,o,t),Ol(e,r,f,s||null,!0)):n===2?vD(c,o,t,p=>{dP(e,f,l,p)}):n===3&&vD(c,o,t,()=>{e.destroyNode(f)}),u!=null&&JP(e,n,t,u,o,r,s)}}function UP(n,e){kT(n,e),e[on]=null,e[zt]=null}function BP(n,e,t,r,i,o){r[on]=i,r[zt]=e,Xl(n,r,t,1,i,o)}function kT(n,e){e[Dn].changeDetectionScheduler?.notify(9),Xl(n,e,e[We],2,null,null)}function $P(n){let e=n[Ho];if(!e)return hg(n[oe],n);for(;e;){let t=null;if(Tn(e))t=e[Ho];else{let r=e[At];r&&(t=r)}if(!t){for(;e&&!e[qt]&&e!==n;)Tn(e)&&hg(e[oe],e),e=e[it];e===null&&(e=n),Tn(e)&&hg(e[oe],e),t=e&&e[qt]}e=t}}function Kg(n,e){let t=n[Wa],r=t.indexOf(e);t.splice(r,1)}function OT(n,e){if(Mi(e))return;let t=e[We];t.destroyNode&&Xl(n,e,t,3,null,null),$P(e)}function hg(n,e){if(Mi(e))return;let t=re(null);try{e[J]&=-129,e[J]|=256,e[kt]&&Aa(e[kt]),zP(n,e),qP(n,e),e[oe].type===1&&e[We].destroy();let r=e[Ci];if(r!==null&&sn(e[it])){r!==e[it]&&Kg(r,e);let i=e[Ai];i!==null&&i.detachView(n)}_g(e)}finally{re(t)}}function vD(n,e,t,r){let i=n?.[za];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Xo.add(n),xT(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),HP(n,r)}else n&&Xo.delete(n),r(!1)},i)}function HP(n,e){let t=n[za]?.running;if(t){t.then(()=>{n[za].running=void 0,Xo.delete(n),e(!0)});return}e(!1)}function qP(n,e){let t=n.cleanup,r=e[$o];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[$o]=null);let i=e[Jn];if(i!==null){e[Jn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[qa];if(o!==null){e[qa]=null;for(let s of o)s.destroy()}}function zP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof nc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];De(4,c,u);try{u.call(c)}finally{De(5,c,u)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function GP(n,e,t){return WP(n,e.parent,t)}function WP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[on];if(xr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===nr.None||i===nr.Emulated)return null}return an(r,t)}function KP(n,e,t){return YP(n,e,t)}function QP(n,e,t){return n.type&40?an(n,t):null}var YP=QP,_D;function Qg(n,e,t,r){let i=GP(n,r,e),o=e[We],s=r.parent||e[zt],c=KP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)dD(o,i,t[u],c,!1);else dD(o,i,t,c,!1);_D!==void 0&&_D(o,r,e,t,i)}function ec(n,e){if(e!==null){let t=e.type;if(t&3)return an(e,n);if(t&4)return bg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ec(n,r);{let i=n[e.index];return sn(i)?bg(-1,i):Wt(i)}}else{if(t&128)return ec(n,e.next);if(t&32)return qg(e,n)()||Wt(n[e.index]);{let r=FT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Nr(n[Gt]);return ec(i,r)}else return ec(n,e.next)}}}return null}function FT(n,e){if(e!==null){let r=n[Gt][zt],i=e.projection;return r.projection[i]}return null}function bg(n,e){let t=At+n+1;if(t<e.length){let r=e[t],i=r[oe].firstChild;if(i!==null)return ec(r,i)}return e[Pr]}function Yg(n,e,t,r,i,o,s){for(;t!=null;){let c=r[Mr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&Jo(Wt(u),r),t.flags|=2),!Lg(t))if(l&8)Yg(n,e,t.child,r,i,o,!1),Yo(e,n,c,i,u,t,o,r);else if(l&32){let f=qg(t,r),p;for(;p=f();)Yo(e,n,c,i,p,t,o,r);Yo(e,n,c,i,u,t,o,r)}else l&16?ZP(n,e,r,t,i,o):Yo(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Xl(n,e,t,r,i,o){Yg(t,r,n.firstChild,e,i,o,!1)}function ZP(n,e,t,r,i,o){let s=t[Gt],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Yo(e,n,t[Mr],i,f,r,o,t)}else{let l=u,f=s[it];iT(r)&&(l.flags|=128),Yg(n,e,l,f,i,o,!0)}}function JP(n,e,t,r,i,o,s){let c=r[Pr],u=Wt(r);c!==u&&Yo(e,n,t,o,c,i,s);for(let l=At;l<r.length;l++){let f=r[l];Xl(f[oe],f,n,e,o,c)}}function LT(n,e,t,r,i){let o=Il(),s=r&2;try{Or(-1),s&&e.length>Ot&&ST(n,e,Ot,!1),De(s?2:0,i,t),t(r,i)}finally{Or(o),De(s?3:1,i,t)}}function Zg(n,e,t){sx(n,e,t),(t.flags&64)===64&&ax(n,e,t)}function VT(n,e,t=an){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function XP(n,e,t,r){let o=r.get(dT,lT)||t===nr.ShadowDom,s=n.selectRootElement(e,o);return ex(s),s}function ex(n){tx(n)}var tx=()=>null;function nx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function rx(n,e,t,r,i,o){let s=e[oe];if(Jg(n,s,e,t,r)){xr(n)&&ox(e,n.index);return}n.type&3&&(t=nx(t)),ix(n,e,t,r,i,o)}function ix(n,e,t,r,i,o){if(n.type&3){let s=an(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function ox(n,e){let t=Kt(e,n);t[J]&16||(t[J]|=64)}function sx(n,e,t){let r=t.directiveStart,i=t.directiveEnd;xr(t)&&AP(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||QD(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=yg(e,n,s,t);if(Jo(u,e),o!==null&&dx(e,s-r,u,c,t,o),Ni(c)){let l=Kt(t.index,e);l[lt]=yg(e,n,s,t)}}}function ax(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Hw();try{Or(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];vl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cx(u,l)}}finally{Or(-1),vl(s)}}function cx(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];EP(e,o.selectors,!1)&&(r??=[],Ni(o)?r.unshift(o):r.push(o))}return r}function ux(n,e,t,r,i,o){let s=an(n,e);lx(e[We],s,o,n.value,t,r,i)}function lx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?Va(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function dx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];wg(r,t,u,l)}}function hx(n,e,t,r,i){let o=Ot+t,s=e[oe],c=i(s,e,n,r,t);e[o]=c,Go(n,!0);let u=n.type===2;return u?(_T(e[We],c,n),(Pw()===0||Ka(n))&&Jo(c,e),xw()):Jo(c,e),wl()&&(!u||!Lg(n))&&Qg(s,e,c,n),n}function fx(n){let e=n;return Zp()?jw():(e=e.parent,Go(e,!1)),e}function px(n,e){let t=n[Mr];if(!t)return;let r;try{r=t.get(Nt,null)}catch{r=null}r?.(e)}function Jg(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];wg(p,t[l],f,i),c=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];wg(f,l,r,i),c=!0}return c}function gx(n,e){let t=Kt(e,n),r=t[oe];mx(r,t);let i=t[on];i!==null&&t[$a]===null&&(t[$a]=hT(i,t[Mr])),De(18),Xg(r,t,t[lt]),De(19,t[lt])}function mx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Xg(n,e,t){_l(e);try{let r=n.viewQuery;r!==null&&Ig(1,r,t);let i=n.template;i!==null&&LT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ai]?.finishViewCreation(n),n.staticContentQueries&&fT(n,e),n.staticViewQueries&&Ig(2,n.viewQuery,t);let o=n.components;o!==null&&yx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,El()}}function yx(n,e){for(let t=0;t<e.length;t++)gx(n,e[t])}function vx(n,e,t,r){let i=re(null);try{let o=e.tView,c=n[J]&4096?4096:16,u=$g(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ci]=l;let f=n[Ai];return f!==null&&(u[Ai]=f.createEmbeddedView(o)),Xg(o,u,t),u}finally{re(i)}}function ED(n,e){return!e||e.firstChild===null||iT(n)}function rc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wt(o)),sn(o)&&UT(o,r);let s=t.type;if(s&8)rc(n,e,t.child,r);else if(s&32){let c=qg(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=FT(e,t);if(Array.isArray(c))r.push(...c);else{let u=Nr(e[Gt]);rc(u[oe],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function UT(n,e){for(let t=At;t<n.length;t++){let r=n[t],i=r[oe].firstChild;i!==null&&rc(r[oe],r,i,e)}n[Pr]!==n[on]&&e.push(n[Pr])}function BT(n){if(n[Ri]!==null){for(let e of n[Ri])e.impl.addSequence(e);n[Ri].length=0}}var $T=[];function _x(n){return n[kt]??Ex(n)}function Ex(n){let e=$T.pop()??Object.create(wx);return e.lView=n,e}function Ix(n){n.lView[kt]!==n&&(n.lView=null,$T.push(n))}var wx=ye(V({},Ta),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zo(n.lView)},consumerOnSignalRead(){this.lView[kt]=this}});function Dx(n){let e=n[kt]??Object.create(Tx);return e.lView=n,e}var Tx=ye(V({},Ta),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Nr(n.lView);for(;e&&!HT(e[oe]);)e=Nr(e);e&&Wp(e)},consumerOnSignalRead(){this.lView[kt]=this}});function HT(n){return n.type!==2}function qT(n){if(n[qa]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[qa])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var bx=100;function zT(n,e=0){let r=n[Dn].rendererFactory,i=!1;i||r.begin?.();try{Cx(n,e)}finally{i||r.end?.()}}function Cx(n,e){let t=Jp();try{Xp(!0),Cg(n,e);let r=0;for(;Ya(n);){if(r===bx)throw new H(103,!1);r++,Cg(n,1)}}finally{Xp(t)}}function Sx(n,e,t,r){if(Mi(e))return;let i=e[J],o=!1,s=!1;_l(e);let c=!0,u=null,l=null;o||(HT(n)?(l=_x(e),u=Ca(l)):xu()===null?(c=!1,l=Dx(e),u=Ca(l)):e[kt]&&(Aa(e[kt]),e[kt]=null));try{Gp(e),Uw(n.bindingStartIndex),t!==null&&LT(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&Sl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Al(e,y,0,null),lg(e,0)}if(s||Ax(e),qT(e),GT(e,0),n.contentQueries!==null&&fT(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&Sl(e,y)}else{let y=n.contentHooks;y!==null&&Al(e,y,1),lg(e,1)}Nx(n,e);let p=n.components;p!==null&&KT(e,p,0);let m=n.viewQuery;if(m!==null&&Ig(2,m,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&Sl(e,y)}else{let y=n.viewHooks;y!==null&&Al(e,y,2),lg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[fl]){for(let y of e[fl])y();e[fl]=null}o||(BT(e),e[J]&=-73)}catch(f){throw o||zo(e),f}finally{l!==null&&(ku(l,u),c&&Ix(l)),El()}}function GT(n,e){for(let t=sT(n);t!==null;t=aT(t))for(let r=At;r<t.length;r++){let i=t[r];WT(i,e)}}function Ax(n){for(let e=sT(n);e!==null;e=aT(e)){if(!(e[J]&2))continue;let t=e[Wa];for(let r=0;r<t.length;r++){let i=t[r];Wp(i)}}}function Rx(n,e,t){De(18);let r=Kt(e,n);WT(r,t),De(19,r[lt])}function WT(n,e){gl(n)&&Cg(n,e)}function Cg(n,e){let r=n[oe],i=n[J],o=n[kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Sa(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)Sx(r,n,r.template,n[lt]);else if(i&8192){let c=re(null);try{qT(n),GT(n,1);let u=r.components;u!==null&&KT(n,u,1),BT(n)}finally{re(c)}}}function KT(n,e,t){for(let r=0;r<e.length;r++)Rx(n,e[r],t)}function Nx(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Or(~i);else{let o=i,s=t[++r],c=t[++r];$w(s,o);let u=e[o];De(24,u),c(2,u),De(25,u)}}}finally{Or(-1)}}function em(n,e){let t=Jp()?64:1088;for(n[Dn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=Nr(n);if(qo(n)&&!r)return n;n=r}return null}function QT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Mx(n,e,t,r=!0){let i=e[oe];if(Px(i,e,n,t),r){let s=bg(t,n),c=e[We],u=c.parentNode(n[Pr]);u!==null&&BP(i,n[zt],c,e,u,s)}let o=e[$a];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sg(n,e){if(n.length<=At)return;let t=At+e,r=n[t];if(r){let i=r[Ci];i!==null&&i!==n&&Kg(i,r),e>0&&(n[t-1][qt]=r[qt]);let o=ja(n,At+e);UP(r[oe],r);let s=o[Ai];s!==null&&s.detachView(o[oe]),r[it]=null,r[qt]=null,r[J]&=-129}return r}function Px(n,e,t,r){let i=At+r,o=t.length;r>0&&(t[i-1][qt]=e),r<o-At?(e[qt]=t[i],Fp(t,At+r,e)):(t.push(e),e[qt]=null),e[it]=t;let s=e[Ci];s!==null&&t!==s&&YT(s,e);let c=e[Ai];c!==null&&c.insertView(n),ml(e),e[J]|=128}function YT(n,e){let t=n[Wa],r=e[it];if(Tn(r))n[J]|=2;else{let i=r[it][Gt];e[Gt]!==i&&(n[J]|=2)}t===null?n[Wa]=[e]:t.push(e)}var Fr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[oe];return rc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[lt]}set context(e){this._lView[lt]=e}get destroyed(){return Mi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(sn(e)){let t=e[Ga],r=t?t.indexOf(this):-1;r>-1&&(Sg(e,r),ja(t,r))}this._attachedToViewContainer=!1}OT(this._lView[oe],this._lView)}onDestroy(e){Kp(this._lView,e)}markForCheck(){em(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){ml(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,zT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=qo(this._lView),t=this._lView[Ci];t!==null&&!e&&Kg(t,this._lView),kT(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=qo(this._lView),r=this._lView[Ci];r!==null&&!t&&YT(r,this._lView),ml(this._lView)}};var ed=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=xx;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=vx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Fr(o)}}return n})();function xx(){return kx(Rt(),Pe())}function kx(n,e){return n.type&4?new ed(e,n,ql(n,e)):null}function tm(n,e,t,r,i){let o=n.data[e];if(o===null)o=Ox(n,e,t,r,i),Bw()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Vw();o.injectorIndex=s===null?-1:s.injectorIndex}return Go(o,!0),o}function Ox(n,e,t,r,i){let o=Yp(),s=Zp(),c=s?o:o&&o.parent,u=n.data[e]=Lx(n,c,t,e,r,i);return Fx(n,u,o,s),u}function Fx(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Lx(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Ow()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var n6=new RegExp(`^(\\d+)*(${rP}|${nP})*(.*)`);var Vx=()=>null;function ID(n,e){return Vx(n,e)}var ZT=class{},td=class{},Ag=class{resolveComponentFactory(e){throw new H(917,!1)}},sc=class{static NULL=new Ag},xi=class{},is=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>jx()}return n})();function jx(){let n=Pe(),e=Rt(),t=Kt(e.index,n);return(Tn(t)?t:n)[We]}var JT=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var Rl={},Rg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Rl,r);return i!==Rl||t===Rl?i:this.parentInjector.get(e,t,r)}};function wD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=bp(i,c);else if(o==2){let u=c,l=e[++s];r=bp(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ke(n,e=0){let t=Pe();if(t===null)return Q(n,e);let r=Rt();return XD(r,t,It(n),e)}function nm(){let n="invalid";throw new Error(n)}function XT(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}$x(n,e,t,c,o,u,l)}o!==null&&r!==null&&Ux(t,r,o)}function Ux(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function Bx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $x(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Ni(y)&&(u=!0,Bx(n,t,m)),FM(QD(t,e),n,y.type)}Kx(t,n.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=CT(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(t.mergedAttrs=Mg(t.mergedAttrs,y.hostAttrs),qx(n,t,e,p,y),Wx(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let A=y.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}Hx(n,t,o)}function Hx(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))DD(0,e,i,r),DD(1,e,i,r),bD(e,r,!1);else{let o=t.get(i);TD(0,e,o,r),TD(1,e,o,r),bD(e,r,!0)}}}function DD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),eb(e,o)}}function TD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),eb(e,s)}}function eb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function bD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ug(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function qx(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=_i(i.type,!0)),s=new nc(o,Ni(i),Ke,null);n.blueprint[r]=s,t[r]=s,zx(n,e,r,CT(n,t,i.hostVars,rs),i)}function zx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;Gx(s)!=c&&s.push(c),s.push(t,r,o)}}function Gx(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Wx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ni(e)&&(t[""]=n)}}function Kx(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tb(n,e,t,r,i,o,s,c){let u=e[oe],l=u.consts,f=Qa(l,s),p=tm(u,n,t,r,f);return o&&XT(u,e,p,Qa(l,c),i),p.mergedAttrs=Mg(p.mergedAttrs,p.attrs),p.attrs!==null&&wD(p,p.attrs,!1),p.mergedAttrs!==null&&wD(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function nb(n,e){HD(n,e),zp(e)&&n.queries.elementEnd(e)}function rm(n){return ib(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function rb(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ib(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function im(n,e,t){if(t===rs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fg(n,e,t){return function r(i){let o=xr(n)?Kt(n.index,e):e;em(o,5);let s=e[lt],c=CD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=CD(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function CD(n,e,t,r){let i=re(null);try{return De(6,e,t),t(r)!==!1}catch(o){return px(n,o),!1}finally{De(7,e,t),re(i)}}function Qx(n,e,t,r,i,o,s,c){let u=Ka(n),l=!1,f=null;if(!r&&u&&(f=Zx(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=an(n,t),m=r?r(p):p;oP(t,m,o,c);let y=i.listen(m,o,c);if(!Yx(o)){let A=r?P=>r(Wt(P[n.index])):n.index;ob(A,e,t,o,c,y,!1)}}return l}function Yx(n){return n.startsWith("animation")||n.startsWith("transition")}function Zx(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[$o],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function ob(n,e,t,r,i,o,s){let c=e.firstCreatePass?Mw(e):null,u=Nw(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function SD(n,e,t,r,i,o){let s=e[t],c=e[oe],l=c.data[t].outputs[r],p=s[l].subscribe(o);ob(n.index,c,e,i,o,p,!0)}var Ng=Symbol("BINDING");var jl=class extends sc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=tr(e);return new ki(t,this.ngModule)}};function Jx(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Yl.SignalBased)!==0};return i&&(o.transform=i),o})}function Xx(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ek(n,e,t){let r=e instanceof Ve?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Rg(t,r):t}function tk(n){let e=n.get(xi,null);if(e===null)throw new H(407,!1);let t=n.get(JT,null),r=n.get(Xn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function nk(n,e){let t=sb(n);return yT(e,t,t==="svg"?Tw:t==="math"?bw:null)}function sb(n){return(n.selectors[0][0]||"div").toLowerCase()}var ki=class extends td{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Jx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Xx(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=TP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){De(22);let c=re(null);try{let u=this.componentDef,l=rk(r,u,s,o),f=ek(u,i||this.ngModule,e),p=tk(f),m=p.rendererFactory.createRenderer(null,u),y=r?XP(m,r,u.encapsulation,f):nk(u,m),A=s?.some(AD)||o?.some(j=>typeof j!="function"&&j.bindings.some(AD)),P=$g(null,l,null,512|bT(u),null,null,p,m,f,null,hT(y,f,!0));P[Ot]=y,_l(P);let N=null;try{let j=tb(Ot,P,2,"#host",()=>l.directiveRegistry,!0,0);_T(m,y,j),Jo(y,P),Zg(l,P,j),pT(l,j,P),nb(l,j),t!==void 0&&ok(j,this.ngContentSelectors,t),N=Kt(j.index,P),P[lt]=N[lt],Xg(l,P,null)}catch(j){throw N!==null&&_g(N),_g(P),j}finally{De(23),El()}return new Ul(this.componentType,P,!!A)}finally{re(c)}}};function rk(n,e,t,r){let i=n?["ng-version","20.3.15"]:bP(e.selectors[0]),o=null,s=null,c=0;if(t)for(let f of t)c+=f[Ng].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[Ng].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=Up(p);u.push(m)}return Bg(0,null,ik(o,s),1,c,u,null,null,null,[i],null)}function ik(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function AD(n){let e=n[Ng].kind;return e==="input"||e==="twoWay"}var Ul=class extends ZT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=pl(t[oe],Ot),this.location=ql(this._tNode,t),this.instance=Kt(this._tNode.index,t)[lt],this.hostView=this.changeDetectorRef=new Fr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Jg(r,i[oe],i,e,t);this.previousInputValues.set(e,t);let s=Kt(r.index,i);em(s,1)}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ok(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var os=(()=>{class n{static __NG_ELEMENT_ID__=sk}return n})();function sk(){let n=Rt();return ck(n,Pe())}var ak=os,ab=class extends ak{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ql(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Pg(this._hostTNode,this._hostLView);if(GD(e)){let t=xl(e,this._hostLView),r=Pl(e),i=t[oe].data[r+8];return new Pi(i,t)}else return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ID(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,ED(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!Xa(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,c=N.bindings}let f=u?e:new ki(tr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let j=(u?p:this.parentInjector).get(Ve,null);j&&(o=j)}let m=tr(f.componentType??{}),y=ID(this._lContainer,m?.id??null),A=y?.firstChild??null,P=f.create(p,i,A,o,s,c);return this.insertImpl(P.hostView,l,ED(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Sw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[it],l=new ab(u,u[zt],u[it]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Mx(s,i,o,r),e.attachToViewContainerRef(),Fp(pg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Sg(this._lContainer,t);r&&(ja(pg(this._lContainer),t),OT(r[oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Sg(this._lContainer,t);return r&&ja(pg(this._lContainer),t)!=null?new Fr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RD(n){return n[Ga]}function pg(n){return n[Ga]||(n[Ga]=[])}function ck(n,e){let t,r=e[n.index];return sn(r)?t=r:(t=QT(r,e,null,n),e[n.index]=t,Hg(e,t)),lk(t,e,n,r),new ab(t,n,e)}function uk(n,e){let t=n[We],r=t.createComment(""),i=an(e,n),o=t.parentNode(i);return Ol(t,o,r,t.nextSibling(i),!1),r}var lk=fk,dk=()=>!1;function hk(n,e,t){return dk(n,e,t)}function fk(n,e,t,r){if(n[Pr])return;let i;t.type&8?i=Wt(r):i=uk(e,t),n[Pr]=i}var es=class{},nd=class{};var Bl=class extends es{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new jl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=jp(e);this._bootstrapComponents=DT(o.bootstrap),this._r3Injector=ig(e,t,[{provide:es,useValue:this},{provide:sc,useValue:this.componentFactoryResolver},...r],Rr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$l=class extends nd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Bl(this.moduleType,e,[])}};var ic=class extends es{injector;componentFactoryResolver=new jl(this);instance=null;constructor(e){super();let t=new Ei([...e.providers,{provide:es,useValue:this},{provide:sc,useValue:this.componentFactoryResolver}],e.parent||Ba(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ss(n,e,t=null){return new ic({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var pk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Bp(!1,t.type),i=r.length>0?ss([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(Q(Ve))})}return n})();function hn(n){return Oi(()=>{let e=cb(n),t=ye(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(pk).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||nr.Emulated,styles:n.styles||nn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Bi("NgStandalone"),ub(t);let r=n.dependencies;return t.directiveDefs=ND(r,gk),t.pipeDefs=ND(r,mw),t.id=vk(t),t})}function gk(n){return tr(n)||Up(n)}function An(n){return Oi(()=>({type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mk(n,e){if(n==null)return Ti;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Yl.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function yk(n){if(n==null)return Ti;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Lr(n){return Oi(()=>{let e=cb(n);return ub(e),e})}function cb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ti,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:mk(n.inputs,e),outputs:yk(n.outputs),debugInfo:null}}function ub(n){n.features?.forEach(e=>e(n))}function ND(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function vk(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _k(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=Mg(n.mergedAttrs,n.attrs);let f=n.tView=Bg(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Go(n,!1);let u=Ik(t,e,n,r);wl()&&Qg(t,e,u,n),Jo(u,e);let l=QT(u,e,u,n);e[r+Ot]=l,Hg(e,l),hk(l,n,e)}function Ek(n,e,t,r,i,o,s,c,u,l,f){let p=t+Ot,m;return e.firstCreatePass?(m=tm(e,p,4,s||null,c||null),Qp()&&XT(e,n,m,Qa(e.consts,l),jT),HD(e,m)):m=e.data[p],_k(m,n,e,t,r,i,o,u),Ka(m)&&Zg(e,n,m),l!=null&&VT(n,m,f),m}function Vr(n,e,t,r,i,o,s,c){let u=Pe(),l=kr(),f=Qa(l.consts,o);return Ek(u,l,n,e,t,r,i,f,void 0,s,c),Vr}var Ik=wk;function wk(n,e,t,r){return Dl(!0),e[We].createComment("")}var om=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var sm=new q("");function as(n){return!!n&&typeof n.then=="function"}function lb(n){return!!n&&typeof n.subscribe=="function"}var am=new q("");function rd(n){return Ht([{provide:am,multi:!0,useValue:n}])}var cm=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(am,{optional:!0})??[];injector=R(Be);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=$e(this.injector,i);if(as(o))t.push(o);else if(lb(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ac=new q("");function db(){Qf(()=>{let n="";throw new H(600,n)})}function hb(n){return n.isBoundToModule}var Dk=10;var jr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Nt);afterRenderManager=R(Wg);zonelessEnabled=R(Za);rootEffectScheduler=R(cg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(bn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(t=>!t))}constructor(){R(Ui,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Be.NULL){return this._injector.get(Te).run(()=>{De(10);let s=t instanceof td;if(!this._injector.get(cm).done){let A="";throw new H(405,A)}let u;s?u=t:u=this._injector.get(sc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=hb(u)?void 0:this._injector.get(es),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(sm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),tc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),De(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Zl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let t=re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,re(t),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Dk;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ya(i))continue;let o=r&&!this.zonelessEnabled?0:1;zT(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ya(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;tc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ac,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function cc(n,e,t,r){let i=Pe(),o=yl();if(im(i,o,e)){let s=kr(),c=rg();ux(c,i,n,e,t,r)}return cc}var u6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Se(n,e,t){let r=Pe(),i=yl();if(im(r,i,e)){let o=kr(),s=rg();rx(s,r,n,e,r[We],t)}return Se}function MD(n,e,t,r,i){Jg(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Pe(),o=i[oe],s=n+Ot,c=o.firstCreatePass?tb(s,i,2,e,jT,Qp(),t,r):o.data[s];if(hx(c,i,n,e,Tk),Ka(c)){let u=i[oe];Zg(u,i,c),pT(u,c,i)}return r!=null&&VT(i,c),x}function M(){let n=kr(),e=Rt(),t=fx(e);return n.firstCreatePass&&nb(n,t),Fw(t)&&Lw(),kw(),t.classesWithoutHost!=null&&AM(t)&&MD(n,t,Pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&RM(t)&&MD(n,t,Pe(),t.stylesWithoutHost,!1),M}function wt(n,e,t,r){return x(n,e,t,r),M(),wt}var Tk=(n,e,t,r,i)=>(Dl(!0),yT(e[We],r,Kw()));function $i(){return Pe()}var uc="en-US";var bk=uc;function fb(n){typeof n=="string"&&(bk=n.toLowerCase().replace(/_/g,"-"))}function de(n,e,t){let r=Pe(),i=kr(),o=Rt();return Ck(i,r,r[We],o,n,e,t),de}function Ck(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=fg(r,e,o),Qx(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=fg(r,e,o),SD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=fg(r,e,o),SD(r,e,p,i,i,u)}}function Rn(n=1){return Ww(n)}function L(n,e=""){let t=Pe(),r=kr(),i=n+Ot,o=r.firstCreatePass?tm(r,i,1,e,null):r.data[i],s=Sk(r,t,o,e,n);t[i]=s,wl()&&Qg(r,t,s,o),Go(o,!1)}var Sk=(n,e,t,r,i)=>(Dl(!0),uP(e[We],r));function Ak(n,e,t,r=""){return im(n,yl(),t)?e+Va(t)+r:rs}function Ae(n){return rr("",n),Ae}function rr(n,e,t){let r=Pe(),i=Ak(r,n,e,t);return i!==rs&&Rk(r,Il(),i),rr}function Rk(n,e,t){let r=Cw(e,n);lP(n[We],r,t)}var Hl=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},um=(()=>{class n{compileModuleSync(t){return new $l(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=jp(t),o=DT(i.declarations).reduce((s,c)=>{let u=tr(c);return u&&s.push(new ki(u)),s},[]);return new Hl(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nk=(()=>{class n{zone=R(Te);changeDetectionScheduler=R(Xn);applicationRef=R(jr);applicationErrorHandler=R(Nt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pb=new q("",{factory:()=>!1});function lm({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(ye(V({},hm()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:er,multi:!0,useFactory:()=>{let r=R(Nk,{optional:!0});return()=>r.initialize()}},{provide:er,multi:!0,useFactory:()=>{let r=R(Mk);return()=>{r.initialize()}}},e===!0?{provide:sg,useValue:!0}:[],{provide:ag,useValue:t??AT},{provide:Nt,useFactory:()=>{let r=R(Te),i=R(Ve),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(rn),o.handleError(s))})}}}]}function dm(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=lm({ngZoneFactory:()=>{let i=hm(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Bi("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ht([{provide:pb,useValue:!0},{provide:Za,useValue:!1},r])}function hm(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Mk=(()=>{class n{subscription=new Oe;initialized=!1;zone=R(Te);pendingTasks=R(bn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gb=(()=>{class n{applicationErrorHandler=R(Nt);appRef=R(jr);taskService=R(bn);ngZone=R(Te);zonelessEnabled=R(Za);tracing=R(Ui,{optional:!0});disableScheduling=R(sg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(ag,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ll||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?pD:RT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pk(){return typeof $localize<"u"&&$localize.locale||uc}var fm=new q("",{providedIn:"root",factory:()=>R(fm,{optional:!0,skipSelf:!0})||Pk()});function Nn(n){return cw(n)}var mb=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};var Ib=Symbol("InputSignalNode#UNSET"),Kk=ye(V({},Ou),{transformFn:void 0,applyValueToInputSignal(n,e){To(n,e)}});function wb(n,e){let t=Object.create(Kk);t.value=n,t.transformFn=e?.transform;function r(){if(ba(t),t.value===Ib){let i=null;throw new H(-950,i)}return t.value}return r[bt]=t,r}var od=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ns(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Qk=new q("");Qk.__NG_ELEMENT_ID__=n=>{let e=Rt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new H(204,!1)};function yb(n,e){return wb(n,e)}function Yk(n){return wb(Ib,n)}var Db=(yb.required=Yk,yb);var pm=new q(""),Zk=new q("");function lc(n){return!n.moduleRef}function Jk(n){let e=lc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{lc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Nt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),lc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(pm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pm);s.add(o),n.moduleRef.onDestroy(()=>{tc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return eO(r,t,()=>{let o=e.get(bn),s=o.add(),c=e.get(cm);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(fm,uc);if(fb(u||uc),!e.get(Zk,!0))return lc(n)?e.get(jr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(lc(n)){let f=e.get(jr);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return Xk?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Xk;function eO(n,e,t){try{let r=t();return as(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var id=null;function tO(n=[],e){return Be.create({name:e,providers:[{provide:Ua,useValue:"platform"},{provide:pm,useValue:new Set([()=>id=null])},...n]})}function nO(n=[]){if(id)return id;let e=tO(n);return id=e,db(),rO(e),e}function rO(n){let e=n.get(Gl,null);$e(n,()=>{e?.forEach(t=>t())})}function _m(){return!1}var cs=(()=>{class n{static __NG_ELEMENT_ID__=iO}return n})();function iO(n){return oO(Rt(),Pe(),(n&16)===16)}function oO(n,e,t){if(xr(n)&&!t){let r=Kt(n.index,e);return new Fr(r,r)}else if(n.type&175){let r=e[Gt];return new Fr(r,e)}return null}var gm=class{constructor(){}supports(e){return rm(e)}create(e){return new mm(e)}},sO=(n,e)=>e,mm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||sO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<vb(r,i,o)?t:r,c=vb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,A=y+m;f<=A&&A<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!rm(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,rb(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ym(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new sd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ym=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},vm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},sd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new vm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function _b(){return new Em([new gm])}var Em=(()=>{class n{factories;static \u0275prov=B({token:n,providedIn:"root",factory:_b});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=R(n,{optional:!0,skipSelf:!0});return n.create(t,r||_b())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new H(901,!1)}}return n})();function Tb(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;De(8);try{let o=i?.injector??nO(r),s=[lm({}),{provide:Xn,useExisting:gb},Yw,...t||[]],c=new ic({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Jk({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{De(9)}}function us(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function bb(n){let e=tr(n);if(!e)return null;let t=new ki(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ab=null;function ir(){return Ab}function Im(n){Ab??=n}var dc=class{},hc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(Rb),providedIn:"platform"})}return n})(),wm=new q(""),Rb=(()=>{class n extends hc{_location;_history;_doc=R(je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Cb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function fn(n){return n&&n[0]!=="?"?`?${n}`:n}var pn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(ld),providedIn:"root"})}return n})(),ud=new q(""),ld=(()=>{class n extends pn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+fn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+fn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+fn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Q(hc),Q(ud,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ur=(()=>{class n{_subject=new Ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=uO(Cb(Sb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fn(r))}normalize(t){return n.stripTrailingSlash(cO(this._basePath,Sb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=fn;static joinWithSlash=cd;static stripTrailingSlash=Cb;static \u0275fac=function(r){return new(r||n)(Q(pn))};static \u0275prov=B({token:n,factory:()=>aO(),providedIn:"root"})}return n})();function aO(){return new Ur(Q(pn))}function cO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Sb(n){return n.replace(/\/index.html$/,"")}function uO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Dm=(()=>{class n extends pn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=cd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+fn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+fn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Q(hc),Q(ud,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();var dd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Br=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),Nb(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Nb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ke(os),Ke(ed),Ke(Em))};static \u0275dir=Lr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Nb(n,e){n.context.$implicit=e.item}var $r=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=An({type:n});static \u0275inj=$t({})}return n})();function Tm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var fc=class{};var Mb="browser";var Pb=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new bm(R(je),window)})}return n})(),bm=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ye(V({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=lO(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ii(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ye(V({},t),{left:i-s[0],top:o-s[1]}))}};function lO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var pc=class{_doc;constructor(e){this._doc=e}manager},fd=(()=>{class n extends pc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Q(je))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),gd=new q(""),Nm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof fd));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof fd);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Q(gd),Q(Te))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Cm="ng-app-id";function xb(n){for(let e of n)e.remove()}function kb(n,e){let t=e.createElement("style");return t.textContent=n,t}function dO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Cm}="${e}"],link[${Cm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Cm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Am(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Mm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,dO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,kb);r?.forEach(i=>this.addUsage(i,this.external,Am))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(xb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])xb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,kb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Am(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Q(je),Q(zl),Q(Wl,8),Q(Vi))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Sm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pm=/%COMP%/g;var Fb="%COMP%",hO=`_nghost-${Fb}`,fO=`_ngcontent-${Fb}`,pO=!0,gO=new q("",{providedIn:"root",factory:()=>pO});function mO(n){return fO.replace(Pm,n)}function yO(n){return hO.replace(Pm,n)}function Lb(n,e){return e.map(t=>t.replace(Pm,n))}var xm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new gc(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof pd?i.applyToHost(t):i instanceof mc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case nr.Emulated:o=new pd(u,l,r,this.appId,f,s,c,p,m);break;case nr.ShadowDom:return new Rm(u,l,t,r,s,c,this.nonce,p,m);default:o=new mc(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Q(Nm),Q(Mm),Q(zl),Q(gO),Q(je),Q(Te),Q(Wl),Q(Ui,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),gc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Sm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ob(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ob(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Sm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Sm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ji.DashCase|ji.Important)?e.style.setProperty(t,r,i&ji.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ji.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Ob(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Rm=class extends gc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=Lb(i.id,f);for(let m of f){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Am(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mc=class extends gc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?Lb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Xo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},pd=class extends mc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,t,r,o,s,c,u,l,f),this.contentAttr=mO(f),this.hostAttr=yO(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var md=class n extends dc{supportsDOMEvents=!0;static makeCurrent(){Im(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vO();return t==null?null:_O(t)}resetBaseElement(){yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tm(document.cookie,e)}},yc=null;function vO(){return yc=yc||document.head.querySelector("base"),yc?yc.getAttribute("href"):null}function _O(n){return new URL(n,document.baseURI).pathname}var EO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Vb=["alt","control","meta","shift"],IO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jb=(()=>{class n extends pc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Vb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=IO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Vb.forEach(s=>{if(s!==i){let c=wO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Q(je))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function km(n,e,t){let r=V({rootComponent:n,platformRef:t?.platformRef},DO(e));return Tb(r)}function DO(n){return{appProviders:[...AO,...n?.providers??[]],platformProviders:SO}}function TO(){md.makeCurrent()}function bO(){return new rn}function CO(){return Og(document),document}var SO=[{provide:Vi,useValue:Mb},{provide:Gl,useValue:TO,multi:!0},{provide:je,useFactory:CO}];var AO=[{provide:Ua,useValue:"root"},{provide:rn,useFactory:bO},{provide:gd,useClass:fd,multi:!0,deps:[je]},{provide:gd,useClass:jb,multi:!0,deps:[je]},xm,Mm,Nm,{provide:xi,useExisting:xm},{provide:fc,useClass:EO},[]];var Ub=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Q(je))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",Nc=Symbol("RouteTitle"),jm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zi(n){return new jm(n)}function Kb(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function NO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mn(n[t],e[t]))return!1;return!0}function Mn(n,e){let t=n?Um(n):void 0,r=e?Um(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Qb(n[i],e[i]))return!1;return!0}function Um(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Qb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Yb(n){return n.length>0?n[n.length-1]:null}function or(n){return lp(n)?n:as(n)?Me(Promise.resolve(n)):W(n)}var MO={exact:Jb,subset:Xb},Zb={exact:PO,subset:xO,ignored:()=>!0};function Bb(n,e,t){return MO[t.paths](n.root,e.root,t.matrixParams)&&Zb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function PO(n,e){return Mn(n,e)}function Jb(n,e,t){if(!Hi(n.segments,e.segments)||!_d(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Jb(n.children[r],e.children[r],t))return!1;return!0}function xO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Qb(n[t],e[t]))}function Xb(n,e,t){return eC(n,e,e.segments,t)}function eC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Hi(i,t)||e.hasChildren()||!_d(i,t,r))}else if(n.segments.length===t.length){if(!Hi(n.segments,t)||!_d(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Xb(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Hi(n.segments,i)||!_d(n.segments,i,r)||!n.children[X]?!1:eC(n.children[X],e,o,r)}}function _d(n,e,t){return e.every((r,i)=>Zb[t](n[i].parameters,r.parameters))}var xn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){return FO.serialize(this)}},_e=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ed(this)}},Hr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zi(this.parameters),this._parameterMap}toString(){return nC(this)}};function kO(n,e){return Hi(n,e)&&n.every((t,r)=>Mn(t.parameters,e[r].parameters))}function Hi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function OO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var Gi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new qr,providedIn:"root"})}return n})(),qr=class{parse(e){let t=new $m(e);return new xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vc(e.root,!0)}`,r=jO(e.queryParams),i=typeof e.fragment=="string"?`#${LO(e.fragment)}`:"";return`${t}${r}${i}`}},FO=new qr;function Ed(n){return n.segments.map(e=>nC(e)).join("/")}function vc(n,e){if(!n.hasChildren())return Ed(n);if(e){let t=n.children[X]?vc(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${vc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=OO(n,(r,i)=>i===X?[vc(n.children[X],!1)]:[`${i}:${vc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${Ed(n)}/${t[0]}`:`${Ed(n)}/(${t.join("//")})`}}function tC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yd(n){return tC(n).replace(/%3B/gi,";")}function LO(n){return encodeURI(n)}function Bm(n){return tC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Id(n){return decodeURIComponent(n)}function $b(n){return Id(n.replace(/\+/g,"%20"))}function nC(n){return`${Bm(n.path)}${VO(n.parameters)}`}function VO(n){return Object.entries(n).map(([e,t])=>`;${Bm(e)}=${Bm(t)}`).join("")}function jO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yd(t)}=${yd(i)}`).join("&"):`${yd(t)}=${yd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var UO=/^[^\/()?;#]+/;function Om(n){let e=n.match(UO);return e?e[0]:""}var BO=/^[^\/()?;=#]+/;function $O(n){let e=n.match(BO);return e?e[0]:""}var HO=/^[^=?&#]+/;function qO(n){let e=n.match(HO);return e?e[0]:""}var zO=/^[^&#]+/;function GO(n){let e=n.match(zO);return e?e[0]:""}var $m=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new _e(e,t)),r}parseSegment(){let e=Om(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Hr(Id(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$O(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Om(this.remaining);i&&(r=i,this.capture(r))}e[Id(t)]=Id(r)}parseQueryParam(e){let t=qO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=GO(this.remaining);s&&(r=s,this.capture(r))}let i=$b(t),o=$b(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Om(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function rC(n){return n.segments.length>0?new _e([],{[X]:n}):n}function iC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=iC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new _e(n.segments,e);return WO(t)}function WO(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new _e(n.segments.concat(e.segments),e.children)}return n}function zr(n){return n instanceof xn}function oC(n,e,t=null,r=null){let i=sC(n);return aC(i,e,t,r)}function sC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let c=new _e(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=rC(r);return e??i}function aC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Fm(i,i,i,t,r);let o=KO(e);if(o.toRoot())return Fm(i,i,new _e([],{}),t,r);let s=QO(o,i,n),c=s.processChildren?Ec(s.segmentGroup,s.index,o.commands):uC(s.segmentGroup,s.index,o.commands);return Fm(i,s.segmentGroup,c,t,r)}function wd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wc(n){return typeof n=="object"&&n!=null&&n.outlets}function Fm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;n===e?s=t:s=cC(n,e,t);let c=rC(iC(s));return new xn(c,o,i)}function cC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=cC(o,e,t)}),new _e(n.segments,r)}var Dd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wd(r[0]))throw new H(4003,!1);let i=r.find(wc);if(i&&i!==Yb(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Dd(t,e,r)}var hs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function QO(n,e,t){if(n.isAbsolute)return new hs(e,!0,0);if(!t)return new hs(e,!1,NaN);if(t.parent===null)return new hs(t,!0,0);let r=wd(n.commands[0])?0:1,i=t.segments.length-1+r;return YO(t,i,n.numberOfDoubleDots)}function YO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new hs(r,!1,i-o)}function ZO(n){return wc(n[0])?n[0].outlets:{[X]:n}}function uC(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return Ec(n,e,t);let r=JO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new _e(n.segments.slice(r.pathIndex),n.children),Ec(o,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?Hm(n,e,t):r.match?Ec(n,0,i):Hm(n,e,t)}function Ec(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=ZO(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=Ec(n.children[X],e,t);return new _e(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=uC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(n.segments,i)}}function JO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(wc(c))break;let u=`${c}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!qb(u,l,s))return o;r+=2}else{if(!qb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(wc(o)){let u=XO(o.outlets);return new _e(r,u)}if(i===0&&wd(t[0])){let u=n.segments[e];r.push(new Hr(u.path,Hb(t[0]))),i++;continue}let s=wc(o)?o.outlets[X]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&wd(c)?(r.push(new Hr(s,Hb(c))),i+=2):(r.push(new Hr(s,{})),i++)}return new _e(r,{})}function XO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Hm(new _e([],{}),0,r))}),e}function Hb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function qb(n,e,t){return n==t.path&&Mn(e,t.parameters)}var fs="imperative",Qe=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Qe||{}),Vt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Gr=class extends Vt{type=Qe.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qt=class extends Vt{urlAfterRedirects;type=Qe.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Dt||{}),gs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(gs||{}),Pn=class extends Vt{reason;code;type=Qe.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kn=class extends Vt{reason;code;type=Qe.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ms=class extends Vt{error;target;type=Qe.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Dc=class extends Vt{urlAfterRedirects;state;type=Qe.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Td=class extends Vt{urlAfterRedirects;state;type=Qe.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bd=class extends Vt{urlAfterRedirects;state;shouldActivate;type=Qe.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cd=class extends Vt{urlAfterRedirects;state;type=Qe.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sd=class extends Vt{urlAfterRedirects;state;type=Qe.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class{route;type=Qe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rd=class{route;type=Qe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nd=class{snapshot;type=Qe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Md=class{snapshot;type=Qe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pd=class{snapshot;type=Qe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xd=class{snapshot;type=Qe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ys=class{routerEvent;position;anchor;type=Qe.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Tc=class{},vs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function e1(n){return!(n instanceof Tc)&&!(n instanceof vs)}function t1(n,e){return n.providers&&!n._injector&&(n._injector=ss(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gn(n){return n.outlet||X}function n1(n,e){let t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}function Is(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Is(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Wi(this.rootInjector)}},Wi=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Q(Ve))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Od=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=qm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=qm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=zm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zm(e,this._root).map(t=>t.value)}};function qm(n,e){if(n===e.value)return e;for(let t of e.children){let r=qm(n,t);if(r)return r}return null}function zm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=zm(n,t);if(r.length)return r.unshift(e),r}return[]}var Lt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bc=class extends Od{snapshot;constructor(e,t){super(e),this.snapshot=t,Xm(this,e)}toString(){return this.snapshot.toString()}};function lC(n){let e=r1(n),t=new rt([new Hr("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),c=new On(t,r,o,s,i,X,n,e.root);return c.snapshot=e.root,new bc(new Lt(c,[]),e)}function r1(n){let e={},t={},r={},o=new qi([],e,r,"",t,X,n,null,{});return new Cc("",new Lt(o,[]))}var On=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[Nc]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>zi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>zi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&hC(i)&&(r.resolve[Nc]=i.title),r}var qi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nc]}constructor(e,t,r,i,o,s,c,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cc=class extends Od{url;constructor(e,t){super(t),this.url=e,Xm(this,t)}toString(){return dC(this._root)}};function Xm(n,e){e.value._routerState=n,e.children.forEach(t=>Xm(n,t))}function dC(n){let e=n.children.length>0?` { ${n.children.map(dC).join(", ")} } `:"";return`${n.value}${e}`}function Lm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mn(e.params,t.params)||n.paramsSubject.next(t.params),NO(e.url,t.url)||n.urlSubject.next(t.url),Mn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Gm(n,e){let t=Mn(n.params,e.params)&&kO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Gm(n.parent,e.parent))}function hC(n){return typeof n.title=="string"||n.title===null}var fC=new q(""),mn=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=Db();parentContexts=R(Wi);location=R(os);changeDetector=R(cs);inputBinder=R(Mc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Wm(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Lr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fi]})}return n})(),Wm=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===On?this.route:e===Wi?this.childContexts:e===fC?this.outletData:this.parent.get(e,t)}},Mc=new q(""),ey=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ma([r.queryParams,r.params,r.data]).pipe(Et(([o,s,c],u)=>(c=V(V(V({},o),s),c),u===0?W(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=bb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of s.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),ty=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=hn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&wt(0,"router-outlet")},dependencies:[mn],encapsulation:2})}return n})();function ny(n){let e=n.children&&n.children.map(ny),t=e?ye(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=ty),t}function i1(n,e,t){let r=Sc(n,e._root,t?t._root:void 0);return new bc(r,e)}function Sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=o1(n,e,t);return new Lt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Sc(n,c)),s}}let r=s1(e.value),i=e.children.map(o=>Sc(n,o));return new Lt(r,i)}}function o1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sc(n,r,i);return Sc(n,r)})}function s1(n){return new On(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var _s=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},pC="ngNavigationCancelingError";function Ld(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=zr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=gC(!1,Dt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function gC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[pC]=!0,t.cancellationCode=e,t}function a1(n){return mC(n)&&zr(n.url)}function mC(n){return!!n&&n[pC]}var c1=(n,e,t,r)=>ae(i=>(new Km(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Km=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ds(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ds(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new xd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Md(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Lm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Lm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Vd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ps=class{component;route;constructor(e,t){this.component=e,this.route=t}};function u1(n,e,t){let r=n._root,i=e?e._root:null;return _c(r,i,t,[r.value])}function l1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ws(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Sp(n)?n:e.get(n):r}function _c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ds(e);return n.children.forEach(s=>{d1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ic(c,t.getContext(s),i)),i}function d1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=h1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_c(n,e,c?c.children:null,r,i):_c(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ps(c.outlet.component,s))}else s&&Ic(e,c,i),i.canActivateChecks.push(new Vd(r)),o.component?_c(n,null,c?c.children:null,r,i):_c(n,null,t,r,i);return i}function h1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Hi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Hi(n.url,e.url)||!Mn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gm(n,e)||!Mn(n.queryParams,e.queryParams);case"paramsChange":default:return!Gm(n,e)}}function Ic(n,e,t){let r=ds(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ic(s,e.children.getContext(o),t):Ic(s,null,t):Ic(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ps(e.outlet.component,i)):t.canDeactivateChecks.push(new ps(null,i)):t.canDeactivateChecks.push(new ps(null,i))}function Pc(n){return typeof n=="function"}function f1(n){return typeof n=="boolean"}function p1(n){return n&&Pc(n.canLoad)}function g1(n){return n&&Pc(n.canActivate)}function m1(n){return n&&Pc(n.canActivateChild)}function y1(n){return n&&Pc(n.canDeactivate)}function v1(n){return n&&Pc(n.canMatch)}function yC(n){return n instanceof Kn||n?.name==="EmptyError"}var vd=Symbol("INITIAL_VALUE");function Es(){return Et(n=>Ma(n.map(e=>e.pipe(Yn(1),rl(vd)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===vd)return vd;if(t===!1||_1(t))return t}return!0}),_t(e=>e!==vd),Yn(1)))}function _1(n){return zr(n)||n instanceof _s}function E1(n,e){return Le(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?W(ye(V({},t),{guardsResult:!0})):I1(s,r,i,n).pipe(Le(c=>c&&f1(c)?w1(r,o,n,e):W(c)),ae(c=>ye(V({},t),{guardsResult:c})))})}function I1(n,e,t,r){return Me(n).pipe(Le(i=>S1(i.component,i.route,t,e,r)),Zn(i=>i!==!0,!0))}function w1(n,e,t,r){return Me(e).pipe(Cr(i=>Lo(T1(i.route.parent,r),D1(i.route,r),C1(n,i.path,t),b1(n,i.route,t))),Zn(i=>i!==!0,!0))}function D1(n,e){return n!==null&&e&&e(new Pd(n)),W(!0)}function T1(n,e){return n!==null&&e&&e(new Nd(n)),W(!0)}function b1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Pa(()=>{let s=Is(e)??t,c=ws(o,s),u=g1(c)?c.canActivate(e,n):$e(s,()=>c(e,n));return or(u).pipe(Zn())}));return W(i).pipe(Es())}function C1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>l1(s)).filter(s=>s!==null).map(s=>Pa(()=>{let c=s.guards.map(u=>{let l=Is(s.node)??t,f=ws(u,l),p=m1(f)?f.canActivateChild(r,n):$e(l,()=>f(r,n));return or(p).pipe(Zn())});return W(c).pipe(Es())}));return W(o).pipe(Es())}function S1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(c=>{let u=Is(e)??i,l=ws(c,u),f=y1(l)?l.canDeactivate(n,e,t,r):$e(u,()=>l(n,e,t,r));return or(f).pipe(Zn())});return W(s).pipe(Es())}function A1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let c=ws(s,n),u=p1(c)?c.canLoad(e,t):$e(n,()=>c(e,t));return or(u)});return W(o).pipe(Es(),vC(r))}function vC(n){return Uu(Xe(e=>{if(typeof e!="boolean")throw Ld(n,e)}),ae(e=>e===!0))}function R1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let c=ws(s,n),u=v1(c)?c.canMatch(e,t):$e(n,()=>c(e,t));return or(u)});return W(o).pipe(Es(),vC(r))}var Ac=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Rc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ls(n){return Oo(new Ac(n))}function N1(n){return Oo(new H(4e3,!1))}function M1(n){return Oo(gC(!1,Dt.GuardRejected))}var Qm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[X])return N1(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){return P1(t,i,o).pipe(ae(s=>{if(s instanceof xn)throw new Rc(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Rc(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new xn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new _e(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function P1(n,e,t){if(typeof n=="string")return W(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:f,title:p}=e;return or($e(t,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var Ym={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x1(n,e,t,r,i){let o=_C(n,e,t);return o.matched?(r=t1(e,r),R1(r,e,t,i).pipe(ae(s=>s===!0?o:V({},Ym)))):W(o)}function _C(n,e,t){if(e.path==="**")return k1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Ym):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Kb)(t,n,e);if(!i)return V({},Ym);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function k1(n){return{matched:!0,parameters:n.length>0?Yb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function zb(n,e,t,r){return t.length>0&&L1(n,t,r)?{segmentGroup:new _e(e,F1(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&V1(n,t,r)?{segmentGroup:new _e(n.segments,O1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function O1(n,e,t,r){let i={};for(let o of t)if(Ud(n,e,o)&&!r[gn(o)]){let s=new _e([],{});i[gn(o)]=s}return V(V({},r),i)}function F1(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&gn(r)!==X){let i=new _e([],{});t[gn(r)]=i}return t}function L1(n,e,t){return t.some(r=>Ud(n,e,r)&&gn(r)!==X)}function V1(n,e,t){return t.some(r=>Ud(n,e,r))}function Ud(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function j1(n,e,t){return e.length===0&&!n.children[t]}var Zm=class{};function U1(n,e,t,r,i,o,s="emptyOnly"){return new Jm(n,e,t,r,i,s,o).recognize()}var B1=31,Jm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Qm(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=zb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Lt(r,t),o=new Cc("",i),s=oC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new qi([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(ae(r=>({children:r,rootSnapshot:t})),Qn(r=>{if(r instanceof Rc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ac?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof Lt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Me(o).pipe(Cr(s=>{let c=r.children[s],u=n1(t,s);return this.processSegmentGroup(e,u,c,s,i)}),nl((s,c)=>(s.push(...c),s)),Sr(null),dp(),Le(s=>{if(s===null)return ls(r);let c=EC(s);return $1(c),W(c)}))}processSegment(e,t,r,i,o,s,c){return Me(t).pipe(Cr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,c).pipe(Qn(l=>{if(l instanceof Ac)return W(null);throw l}))),Zn(u=>!!u),Qn(u=>{if(yC(u))return j1(r,i,o)?W(new Zm):ls(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,u){return gn(r)!==s&&(s===X||!Ud(i,o,r))?ls(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ls(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=_C(t,i,o);if(!u)return ls(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>B1&&(this.allowRedirects=!1));let y=new qi(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(i),gn(i),i.component??i._loadedComponent??null,i,Wb(i)),A=Fd(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e).pipe(Et(N=>this.applyRedirects.lineralizeSegments(i,N)),Le(N=>this.processSegment(e,r,t,N.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=x1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Et(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Et(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,A=new qi(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(r),gn(r),r.component??r._loadedComponent??null,r,Wb(r)),P=Fd(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(P.params),A.data=Object.freeze(P.data);let{segmentGroup:N,slicedSegments:j}=zb(t,m,y,l);if(j.length===0&&N.hasChildren())return this.processChildren(f,l,N,A).pipe(ae(Z=>new Lt(A,Z)));if(l.length===0&&j.length===0)return W(new Lt(A,[]));let Y=gn(r)===o;return this.processSegment(f,l,N,j,Y?X:o,!0,A).pipe(ae(Z=>new Lt(A,Z instanceof Lt?[Z]:[])))}))):ls(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):A1(e,t,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,t).pipe(Xe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):M1(t))):W({routes:[],injector:e})}};function $1(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function H1(n){let e=n.value.routeConfig;return e&&e.path===""}function EC(n){let e=[],t=new Set;for(let r of n){if(!H1(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=EC(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!t.has(r))}function Gb(n){return n.data||{}}function Wb(n){return n.resolve||{}}function q1(n,e,t,r,i,o){return Le(s=>U1(n,e,t,r,s.extractedUrl,i,o).pipe(ae(({state:c,tree:u})=>ye(V({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function z1(n,e){return Le(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of IC(u))s.add(l);let c=0;return Me(s).pipe(Cr(u=>o.has(u)?G1(u,r,n,e):(u.data=Fd(u,u.parent,n).resolve,W(void 0))),Xe(()=>c++),Vo(1),Le(u=>c===s.size?W(t):Ct))})}function IC(n){let e=n.children.map(t=>IC(t)).flat();return[n,...e]}function G1(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!hC(i)&&(o[Nc]=i.title),Pa(()=>(n.data=Fd(n,n.parent,t).resolve,W1(o,n,e,r).pipe(ae(s=>(n._resolvedData=s,n.data=V(V({},n.data),s),null)))))}function W1(n,e,t,r){let i=Um(n);if(i.length===0)return W({});let o={};return Me(i).pipe(Le(s=>K1(n[s],e,t,r).pipe(Zn(),Xe(c=>{if(c instanceof _s)throw Ld(new qr,c);o[s]=c}))),Vo(1),ae(()=>o),Qn(s=>yC(s)?Ct:Oo(s)))}function K1(n,e,t,r){let i=Is(e)??r,o=ws(n,i),s=o.resolve?o.resolve(e,t):$e(i,()=>o(e,t));return or(s)}function Vm(n){return Et(e=>{let t=n(e);return t?Me(t).pipe(ae(()=>e)):W(e)})}var ry=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[Nc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(wC),providedIn:"root"})}return n})(),wC=(()=>{class n extends ry{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Q(Ub))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wr=new q("",{providedIn:"root",factory:()=>({})}),Ki=new q(""),Bd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(um);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=or($e(t,()=>r.loadComponent())).pipe(ae(TC),Et(bC),Xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xa(()=>{this.componentLoaders.delete(r)})),o=new Mo(i,()=>new Ze).pipe(No());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DC(r,this.compiler,t,this.onLoadEndListener).pipe(xa(()=>{this.childrenLoaders.delete(r)})),s=new Mo(o,()=>new Ze).pipe(No());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DC(n,e,t,r){return or($e(t,()=>n.loadChildren())).pipe(ae(TC),Et(bC),Le(i=>i instanceof nd||Array.isArray(i)?W(i):Me(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(Ki,[],{optional:!0,self:!0}).flat()),{routes:s.map(ny),injector:o}}))}function Q1(n){return n&&typeof n=="object"&&"default"in n}function TC(n){return Q1(n)?n.default:n}function bC(n){return W(n)}var $d=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(Y1),providedIn:"root"})}return n})(),Y1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iy=new q(""),oy=new q("");function CC(n,e,t){let r=n.get(oy),i=n.get(je);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),c=i.startViewTransition(()=>(o(),Z1(n)));c.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&$e(n,()=>u({transition:c,from:e,to:t})),s}function Z1(n){return new Promise(e=>{Jl({read:()=>setTimeout(e)},{injector:n})})}var sy=new q(""),Hd=(()=>{class n{currentNavigation=le(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ze;transitionAbortWithErrorSubject=new Ze;configLoader=R(Bd);environmentInjector=R(Ve);destroyRef=R(ln);urlSerializer=R(Gi);rootContexts=R(Wi);location=R(Ur);inputBindingEnabled=R(Mc,{optional:!0})!==null;titleStrategy=R(ry);options=R(Wr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R($d);createViewTransition=R(iy,{optional:!0});navigationErrorHandler=R(sy,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ad(i)),r=i=>this.events.next(new Rd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Nn(()=>{this.transitions?.next(ye(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(_t(r=>r!==null),Et(r=>{let i=!1;return W(r).pipe(Et(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Dt.SupersededByNewNavigation),Ct;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&c!=="reload")return this.events.next(new kn(o.id,this.urlSerializer.serialize(o.rawUrl),"",gs.IgnoredSameUrlNavigation)),o.resolve(!1),Ct;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(Et(u=>(this.events.next(new Gr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ct:Promise.resolve(u))),q1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let l=new Dc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:p,extras:m}=o,y=new Gr(u,this.urlSerializer.serialize(l),f,p);this.events.next(y);let A=lC(this.rootComponentType).snapshot;return this.currentTransition=r=ye(V({},o),{targetSnapshot:A,urlAfterRedirects:l,extras:ye(V({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=l,P)),W(r)}else return this.events.next(new kn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",gs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ct}),Xe(o=>{let s=new Td(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=ye(V({},o),{guards:u1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),E1(this.environmentInjector,o=>this.events.next(o)),Xe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ld(this.urlSerializer,o.guardsResult);let s=new bd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),_t(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Dt.GuardRejected),!1)),Vm(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(Xe(s=>{let c=new Cd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Et(s=>{let c=!1;return W(s).pipe(z1(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",Dt.NoDataFromResolver)}}))}),Xe(s=>{let c=new Sd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),Vm(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent){let l=Is(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(Xe(f=>{c.component=f}),ae(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return Ma(s(o.targetSnapshot.root)).pipe(Sr(null),Yn(1))}),Vm(()=>this.afterPreactivation()),Et(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?Me(c).pipe(ae(()=>r)):W(r)}),ae(o=>{let s=i1(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(V({},o),{targetRouterState:s}),this.currentNavigation.update(c=>(c.targetRouterState=s,c)),r}),Xe(()=>{this.events.next(new Tc)}),c1(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Yn(1),il(new ie(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(_t(()=>!i&&!r.targetRouterState),Xe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Dt.Aborted)}))),Xe({next:o=>{i=!0,this.lastSuccessfulNavigation=Nn(this.currentNavigation),this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),il(this.transitionAbortWithErrorSubject.pipe(Xe(o=>{throw o}))),xa(()=>{i||this.cancelNavigationTransition(r,"",Dt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qn(o=>{if(this.destroyed)return r.resolve(!1),Ct;if(i=!0,mC(o))this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),a1(o)?this.events.next(new vs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ms(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=$e(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof _s){let{message:u,cancellationCode:l}=Ld(this.urlSerializer,c);this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new vs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Ct}))}))}cancelNavigationTransition(t,r,i){let o=new Pn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Nn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J1(n){return n!==fs}var SC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(X1),providedIn:"root"})}return n})(),jd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},X1=(()=>{class n extends jd{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oc(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AC=(()=>{class n{urlSerializer=R(Gi);options=R(Wr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Ur);urlHandlingStrategy=R($d);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new xn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof xn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=lC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>R(eF),providedIn:"root"})}return n})(),eF=(()=>{class n extends AC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Gr?this.updateStateMemento():t instanceof kn?this.commitTransition(r):t instanceof Dc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Tc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Pn&&t.code!==Dt.SupersededByNewNavigation&&t.code!==Dt.Redirect?this.restoreHistory(r):t instanceof ms?this.restoreHistory(r,!0):t instanceof Qt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",u)}else{let c=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oc(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qd(n,e){n.events.pipe(_t(t=>t instanceof Qt||t instanceof Pn||t instanceof ms||t instanceof kn),ae(t=>t instanceof Qt||t instanceof kn?0:(t instanceof Pn?t.code===Dt.Redirect||t.code===Dt.SupersededByNewNavigation:!1)?2:1),_t(t=>t!==2),Yn(1)).subscribe(()=>{e()})}var tF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(om);stateManager=R(AC);options=R(Wr,{optional:!0})||{};pendingTasks=R(bn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(Hd);urlSerializer=R(Gi);location=R(Ur);urlHandlingStrategy=R($d);injector=R(Ve);_events=new Ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(SC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Ki,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Mc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Nn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==Dt.Redirect&&r.code!==Dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qt)this.navigated=!0;else if(r instanceof vs){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||J1(i.source)},s);this.scheduleNavigation(c,fs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}e1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Nt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Nn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ny),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=sC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return aC(p,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=zr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fs,null,r)}navigate(t,r={skipLocationChange:!1}){return rF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ii(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},tF):r===!1?i=V({},nF):i=r,zr(t))return Bb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Bb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let f=this.pendingTasks.add();return qd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var zd=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=le(null);get href(){return Nn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ze;applicationErrorHandler=R(Nt);options=R(Wr,{optional:!0});constructor(t,r,i,o,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c,this.reactiveHref.set(R(new od("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Qt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:zr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ke(Fn),Ke(On),ns("tabindex"),Ke(is),Ke(Li),Ke(pn))};static \u0275dir=Lr({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&de("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&cc("href",i.reactiveHref(),jg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",us],skipLocationChange:[2,"skipLocationChange","skipLocationChange",us],replaceUrl:[2,"replaceUrl","replaceUrl",us],routerLink:"routerLink"},features:[Fi]})}return n})();var xc=class{};var RC=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_t(t=>t instanceof Qt),Cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ss(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,c=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Me(i).pipe(Fo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=W(null);let o=i.pipe(Le(s=>s===null?W(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Me([o,s]).pipe(Fo())}else return o})}static \u0275fac=function(r){return new(r||n)(Q(Fn),Q(Ve),Q(xc),Q(Bd))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NC=new q(""),iF=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=fs;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof kn&&t.code===gs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof ys))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>C(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ys(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){nm()};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function cy(n,...e){return Ht([{provide:Ki,multi:!0,useValue:n},[],{provide:On,useFactory:MC,deps:[Fn]},{provide:ac,multi:!0,useFactory:PC},e.map(t=>t.\u0275providers)])}function MC(n){return n.routerState.root}function kc(n,e){return{\u0275kind:n,\u0275providers:e}}function PC(){let n=R(Be);return e=>{let t=n.get(jr);if(e!==t.components[0])return;let r=n.get(Fn),i=n.get(xC);n.get(uy)===1&&r.initialNavigation(),n.get(FC,null,{optional:!0})?.setUpPreloading(),n.get(NC,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xC=new q("",{factory:()=>new Ze}),uy=new q("",{providedIn:"root",factory:()=>1});function kC(){let n=[{provide:Fg,useValue:!0},{provide:uy,useValue:0},rd(()=>{let e=R(Be);return e.get(wm,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Fn),o=e.get(xC);qd(i,()=>{r(!0)}),e.get(Hd).afterPreactivation=()=>(r(!0),o.closed?W(void 0):o),i.initialNavigation()}))})];return kc(2,n)}function OC(){let n=[rd(()=>{R(Fn).setUpLocationChangeListener()}),{provide:uy,useValue:2}];return kc(3,n)}var FC=new q("");function LC(n){return kc(0,[{provide:FC,useExisting:RC},{provide:xc,useExisting:n}])}function VC(){return kc(8,[ey,{provide:Mc,useExisting:ey}])}function jC(n){Bi("NgRouterViewTransitions");let e=[{provide:iy,useValue:CC},{provide:oy,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return kc(9,e)}var UC=[Ur,{provide:Gi,useClass:qr},Fn,Wi,{provide:On,useFactory:MC,deps:[Fn]},Bd,[]],ly=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[UC,[],{provide:Ki,multi:!0,useValue:t},[],r?.errorHandler?{provide:sy,useValue:r.errorHandler}:[],{provide:Wr,useValue:r||{}},r?.useHash?sF():aF(),oF(),r?.preloadingStrategy?LC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cF(r):[],r?.bindToComponentInputs?VC().\u0275providers:[],r?.enableViewTransitions?jC().\u0275providers:[],uF()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ki,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=An({type:n});static \u0275inj=$t({})}return n})();function oF(){return{provide:NC,useFactory:()=>{let n=R(Pb),e=R(Te),t=R(Wr),r=R(Hd),i=R(Gi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iF(i,r,n,e,t)}}}function sF(){return{provide:pn,useClass:Dm}}function aF(){return{provide:pn,useClass:ld}}function cF(n){return[n.initialNavigation==="disabled"?OC().\u0275providers:[],n.initialNavigation==="enabledBlocking"?kC().\u0275providers:[]]}var ay=new q("");function uF(){return[{provide:ay,useFactory:PC},{provide:ac,multi:!0,useExisting:ay}]}var dF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},HZ=ye(V({},dF),{"[class.ng-submitted]":"isSubmitted"});var hF=new q("",{providedIn:"root",factory:()=>BC}),BC="always";var fF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=An({type:n});static \u0275inj=$t({})}return n})();var Ds=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hF,useValue:t.callSetDisabledState??BC}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=An({type:n});static \u0275inj=$t({imports:[fF]})}return n})();var $C=()=>{};var zC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Gd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[f],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new hy;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gF=function(n){let e=zC(n);return Gd.encodeByteArray(e,!0)},Fc=function(n){return gF(n).replace(/\./g,"")},Wd=function(n){try{return Gd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function py(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mF=()=>py().__FIREBASE_DEFAULTS__,yF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wd(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return $C()||mF()||yF()||vF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GC=n=>{var e,t;return(t=(e=Kd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},WC=n=>{let e=GC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gy=()=>{var n;return(n=Kd())===null||n===void 0?void 0:n.config},KC=n=>{var e;return(e=Kd())===null||e===void 0?void 0:e[`_${n}`]};var Qi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Yi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function my(n){return C(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function QC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fc(JSON.stringify(t)),Fc(JSON.stringify(s)),""].join(".")}var Oc={};function _F(){let n={prod:[],emulator:[]};for(let e of Object.keys(Oc))Oc[e]?n.emulator.push(e):n.prod.push(e);return n}function EF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var HC=!1;function yy(n,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||Oc[n]===e||Oc[n]||HC)return;Oc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=_F().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{HC=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=EF(r),y=t("text"),A=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),N=document.getElementById(P)||document.createElement("a"),j=t("preprendIcon"),Y=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;c(Z),f(N,P);let be=l();u(Y,j),Z.append(Y,A,N,be),document.body.appendChild(Z)}o?(A.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function IF(){var n;let e=(n=Kd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e0(){return!IF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lc(){try{return typeof indexedDB=="object"}catch{return!1}}function t0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var wF="FirebaseError",Yt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wF,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}},yn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Yt(i,c,r)}};function DF(n,e){return n.replace(TF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var TF=/\{\$([^}]+)}/g;function Zi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(qC(o)&&qC(s)){if(!Zi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function qC(n){return n!==null&&typeof n=="object"}function vy(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function n0(n,e){let t=new fy(n,e);return t.subscribe.bind(t)}var fy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dy),i.error===void 0&&(i.error=dy),i.complete===void 0&&(i.complete=dy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dy(){}var KZ=14400*1e3;function ht(n){return n&&n._delegate?n._delegate:n}var Tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ji="[DEFAULT]";var _y=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Qi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SF(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CF(n){return n===Ji?void 0:n}function SF(n){return n.instantiationMode==="EAGER"}var Qd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new _y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var AF=[],ce=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ce||{}),RF={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},NF=ce.INFO,MF={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},PF=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=MF[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ln=class{constructor(e){this.name=e,this._logLevel=NF,this._logHandler=PF,this._userLogHandler=null,AF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var xF=(n,e)=>e.some(t=>n instanceof t),r0,i0;function kF(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OF(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var o0=new WeakMap,Iy=new WeakMap,s0=new WeakMap,Ey=new WeakMap,Dy=new WeakMap;function FF(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Vn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&o0.set(t,n)}).catch(()=>{}),Dy.set(e,n),e}function LF(n){if(Iy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Iy.set(n,e)}var wy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Iy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||s0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function a0(n){wy=n(wy)}function VF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Yd(this),e,...t);return s0.set(r,e.sort?e.sort():[e]),Vn(r)}:OF().includes(n)?function(...e){return n.apply(Yd(this),e),Vn(o0.get(this))}:function(...e){return Vn(n.apply(Yd(this),e))}}function jF(n){return typeof n=="function"?VF(n):(n instanceof IDBTransaction&&LF(n),xF(n,kF())?new Proxy(n,wy):n)}function Vn(n){if(n instanceof IDBRequest)return FF(n);if(Ey.has(n))return Ey.get(n);let e=jF(n);return e!==n&&(Ey.set(n,e),Dy.set(e,n)),e}var Yd=n=>Dy.get(n);function u0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Vn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Vn(s.result),u.oldVersion,u.newVersion,Vn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var UF=["get","getKey","getAll","getAllKeys","count"],BF=["put","add","delete","clear"],Ty=new Map;function c0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ty.get(e))return Ty.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=BF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UF.includes(t)))return;let o=function(s,...c){return C(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]})};return Ty.set(e,o),o}a0(n=>ye(V({},n),{get:(e,t,r)=>c0(e,t)||n.get(e,t,r),has:(e,t)=>!!c0(e,t)||n.has(e,t)}));var Cy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($F(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function $F(n){let e=n.getComponent();return e?.type==="VERSION"}var Sy="@firebase/app",l0="0.13.2";var sr=new Ln("@firebase/app"),HF="@firebase/app-compat",qF="@firebase/analytics-compat",zF="@firebase/analytics",GF="@firebase/app-check-compat",WF="@firebase/app-check",KF="@firebase/auth",QF="@firebase/auth-compat",YF="@firebase/database",ZF="@firebase/data-connect",JF="@firebase/database-compat",XF="@firebase/functions",eL="@firebase/functions-compat",tL="@firebase/installations",nL="@firebase/installations-compat",rL="@firebase/messaging",iL="@firebase/messaging-compat",oL="@firebase/performance",sL="@firebase/performance-compat",aL="@firebase/remote-config",cL="@firebase/remote-config-compat",uL="@firebase/storage",lL="@firebase/storage-compat",dL="@firebase/firestore",hL="@firebase/ai",fL="@firebase/firestore-compat",pL="firebase",gL="11.10.0";var Ay="[DEFAULT]",mL={[Sy]:"fire-core",[HF]:"fire-core-compat",[zF]:"fire-analytics",[qF]:"fire-analytics-compat",[WF]:"fire-app-check",[GF]:"fire-app-check-compat",[KF]:"fire-auth",[QF]:"fire-auth-compat",[YF]:"fire-rtdb",[ZF]:"fire-data-connect",[JF]:"fire-rtdb-compat",[XF]:"fire-fn",[eL]:"fire-fn-compat",[tL]:"fire-iid",[nL]:"fire-iid-compat",[rL]:"fire-fcm",[iL]:"fire-fcm-compat",[oL]:"fire-perf",[sL]:"fire-perf-compat",[aL]:"fire-rc",[cL]:"fire-rc-compat",[uL]:"fire-gcs",[lL]:"fire-gcs-compat",[dL]:"fire-fst",[fL]:"fire-fst-compat",[hL]:"fire-vertex","fire-js":"fire-js",[pL]:"fire-js-all"};var Vc=new Map,yL=new Map,Ry=new Map;function d0(n,e){try{n.container.addComponent(e)}catch(t){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vn(n){let e=n.name;if(Ry.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Ry.set(e,n);for(let t of Vc.values())d0(t,n);for(let t of yL.values())d0(t,n);return!0}function Zd(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ar(n){return n==null?!1:n.settings!==void 0}var vL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new yn("app","Firebase",vL);var Ny=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}};var Ts=gL;function xy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ay,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Kr.create("bad-app-name",{appName:String(i)});if(t||(t=gy()),!t)throw Kr.create("no-options");let o=Vc.get(i);if(o){if(Zi(t,o.options)&&Zi(r,o.config))return o;throw Kr.create("duplicate-app",{appName:i})}let s=new Qd(i);for(let u of Ry.values())s.addComponent(u);let c=new Ny(t,r,s);return Vc.set(i,c),c}function bs(n=Ay){let e=Vc.get(n);if(!e&&n===Ay&&gy())return xy();if(!e)throw Kr.create("no-app",{appName:n});return e}function Jd(){return Array.from(Vc.values())}function Ue(n,e,t){var r;let i=(r=mL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(c.join(" "));return}vn(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _L="firebase-heartbeat-database",EL=1,jc="firebase-heartbeat-store",by=null;function g0(){return by||(by=u0(_L,EL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kr.create("idb-open",{originalErrorMessage:n.message})})),by}function IL(n){return C(this,null,function*(){try{let t=(yield g0()).transaction(jc),r=yield t.objectStore(jc).get(m0(n));return yield t.done,r}catch(e){if(e instanceof Yt)sr.warn(e.message);else{let t=Kr.create("idb-get",{originalErrorMessage:e?.message});sr.warn(t.message)}}})}function h0(n,e){return C(this,null,function*(){try{let r=(yield g0()).transaction(jc,"readwrite");yield r.objectStore(jc).put(e,m0(n)),yield r.done}catch(t){if(t instanceof Yt)sr.warn(t.message);else{let r=Kr.create("idb-set",{originalErrorMessage:t?.message});sr.warn(r.message)}}})}function m0(n){return`${n.name}!${n.options.appId}`}var wL=1024,DL=30,My=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Py(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=f0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>DL){let s=bL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=f0(),{heartbeatsToSend:r,unsentEntries:i}=TL(this._heartbeatsCache.heartbeats),o=Fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return sr.warn(t),""}})}};function f0(){return new Date().toISOString().substring(0,10)}function TL(n,e=wL){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),p0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),p0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Py=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return Lc()?t0().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield IL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return h0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return h0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function p0(n){return Fc(JSON.stringify({version:2,heartbeats:n})).length}function bL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function CL(n){vn(new Tt("platform-logger",e=>new Cy(e),"PRIVATE")),vn(new Tt("heartbeat",e=>new My(e),"PRIVATE")),Ue(Sy,l0,n),Ue(Sy,l0,"esm2017"),Ue("fire-js","")}CL("");var SL="firebase",AL="11.10.0";Ue(SL,AL,"app");function y0(n){n===void 0&&(n=R(Be));let e=n.get(Wo);return t=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var eo=new Ar("ANGULARFIRE2_VERSION");function eh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ss=(n,e)=>{let t=e?[e]:Jd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Cs=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Cs||{}),v0=_m()&&typeof Zone<"u"?Cs.WARN:Cs.SILENT;var Xd=class{zone;delegate;constructor(e,t=cp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},to=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(Te);this.outsideAngular=t.runOutsideAngular(()=>new Xd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Xd(typeof Zone>"u"?void 0:Zone.current,ap))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_0=!1;function RL(n,e){!_0&&(v0>Cs.SILENT||_m())&&(_0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),v0>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function NL(n){let e=R(Te,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Xi(n){let e=R(Te,{optional:!0});return e?e.run(()=>n()):n()}var ML=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),$e(t,()=>Xi(()=>n.apply(void 0,r)))),Zt=(n,e,t)=>(t||=e?Cs.WARN:Cs.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=R(to),s=R(Wo),c=R(Ve)}catch{return RL(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Xi(()=>s.add())),i[l]=ML(i[l],r,c));let u=NL(()=>n.apply(this,i));return e?u instanceof ie?u.pipe(br(o.outsideAngular),Tr(o.insideAngular),y0(c)):u instanceof Promise?Xi(()=>{let l=s.add();return new Promise((f,p)=>{u.then(m=>$e(c,()=>Xi(()=>f(m))),m=>$e(c,()=>Xi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Xi(()=>u):u instanceof ie?u.pipe(br(o.outsideAngular),Tr(o.insideAngular)):Xi(()=>u)});var no=class{constructor(e){return e}},Uc=class{constructor(){return Jd()}};function PL(n){return n&&n.length===1?n[0]:new no(bs())}var ky=new q("angularfire2._apps"),xL={provide:no,useFactory:PL,deps:[[new Sn,ky]]},kL={provide:Uc,deps:[[new Sn,ky]]};function OL(n){return(e,t)=>{let r=t.get(Vi);Ue("angularfire",eo.full,"core"),Ue("angularfire",eo.full,"app"),Ue("angular",Tp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new no(i)}}function E0(n,...e){return Ht([xL,kL,{provide:ky,useFactory:OL(n),multi:!0,deps:[Te,Be,to,...e]}])}var I0=Zt(xy,!0);var FL=new Map,LL={activated:!1,tokenObservers:[]},VL={initialized:!1,enabled:!1};function _n(n){return FL.get(n)||Object.assign({},LL)}function b0(){return VL}var jL="https://content-firebaseappcheck.googleapis.com/v1";var UL="exchangeDebugToken",w0={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ZJ=1440*60*1e3;var Ly=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new Qi,this.pending.promise.catch(t=>{}),yield BL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Qi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function BL(n){return new Promise(e=>{setTimeout(e,n)})}var $L={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Qr=new yn("appCheck","AppCheck",$L);function C0(n){if(!_n(n).activated)throw Qr.create("use-before-activation",{appName:n.name})}function S0(r,i){return C(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,c)}catch(y){throw Qr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Qr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Qr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function A0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${jL}/projects/${t}/apps/${r}:${UL}?key=${i}`,body:{debug_token:e}}}var HL="firebase-app-check-database",qL=1,Vy="firebase-app-check-store";var th=null;function zL(){return th||(th=new Promise((n,e)=>{try{let t=indexedDB.open(HL,qL);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Qr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vy,{keyPath:"compositeKey"})}}}catch(t){e(Qr.create("storage-open",{originalErrorMessage:t?.message}))}}),th)}function GL(n,e){return WL(KL(n),e)}function WL(n,e){return C(this,null,function*(){let r=(yield zL()).transaction(Vy,"readwrite"),o=r.objectStore(Vy).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Qr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function KL(n){return`${n.options.appId}-${n.name}`}var Bc=new Ln("@firebase/app-check");function Oy(n,e){return Lc()?GL(n,e).catch(t=>{Bc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function R0(){return b0().enabled}function N0(){return C(this,null,function*(){let n=b0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var QL={error:"UNKNOWN_ERROR"};function YL(n){return Gd.encodeString(JSON.stringify(n),!1)}function jy(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;C0(r);let i=_n(r),o=i.token,s;if(o&&!$c(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&($c(l)?o=l:yield Oy(r,void 0))}if(!e&&o&&$c(o))return{token:o.token};let c=!1;if(R0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=S0(A0(r,yield N0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield Oy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),Fy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield _n(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Bc.warn(l.message):t&&Bc.error(l),s=l}let u;return o?s?$c(o)?u={token:o.token,internalError:s}:u=Fy(s):(u={token:o.token},i.token=o,yield Oy(r,o)):u=Fy(s),c&&eV(r,u),u})}function ZL(n){return C(this,null,function*(){let e=n.app;C0(e);let{provider:t}=_n(e);if(R0()){let r=yield N0(),{token:i}=yield S0(A0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function JL(n,e,t,r){let{app:i}=n,o=_n(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&$c(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),D0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>D0(n))}function M0(n,e){let t=_n(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function D0(n){let{app:e}=n,t=_n(e),r=t.tokenRefresher;r||(r=XL(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XL(n){let{app:e}=n;return new Ly(()=>C(null,null,function*(){let t=_n(e),r;if(t.token?r=yield jy(n,!0):r=yield jy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=_n(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},w0.RETRIAL_MIN_WAIT,w0.RETRIAL_MAX_WAIT)}function eV(n,e){let t=_n(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function $c(n){return n.expireTimeMillis-Date.now()>0}function Fy(n){return{token:YL(QL),error:n}}var Uy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=_n(this.app);for(let t of e)M0(this.app,t.next);return Promise.resolve()}};function tV(n,e){return new Uy(n,e)}function nV(n){return{getToken:e=>jy(n,e),getLimitedUseToken:()=>ZL(n),addTokenListener:e=>JL(n,"INTERNAL",e),removeTokenListener:e=>M0(n.app,e)}}var rV="@firebase/app-check",iV="0.10.1";var oV="app-check",T0="app-check-internal";function sV(){vn(new Tt(oV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return tV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(T0).initialize()})),vn(new Tt(T0,n=>{let e=n.getProvider("app-check").getImmediate();return nV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(rV,iV)}sV();var aV="app-check";var nh=class{constructor(){return Ss(aV)}};var cV=["localhost","0.0.0.0","127.0.0.1"],lX=typeof window<"u"&&cV.includes(window.location.hostname);function j0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var U0=j0,B0=new yn("auth","Firebase",j0());var sh=new Ln("@firebase/auth");function lV(n,...e){sh.logLevel<=ce.WARN&&sh.warn(`Auth (${Ts}): ${n}`,...e)}function ih(n,...e){sh.logLevel<=ce.ERROR&&sh.error(`Auth (${Ts}): ${n}`,...e)}function P0(n,...e){throw Jy(n,...e)}function Zy(n,...e){return Jy(n,...e)}function $0(n,e,t){let r=Object.assign(Object.assign({},U0()),{[e]:t});return new yn("auth","Firebase",r).create(e,{appName:n.name})}function oh(n){return $0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return B0.create(n,...e)}function Ee(n,e,...t){if(!n)throw Jy(e,...t)}function Hc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ih(e),new Error(e)}function ah(n,e){n||Hc(e)}function dV(){return x0()==="http:"||x0()==="https:"}function x0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function hV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dV()||JC()||"connection"in navigator)?navigator.onLine:!0}function fV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var oo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ah(t>e,"Short delay should be less than long delay!"),this.isMobile=YC()||XC()}get(){return hV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pV(n,e){ah(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ch=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yV=new oo(3e4,6e4);function H0(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function fh(o,s,c,u){return C(this,arguments,function*(n,e,t,r,i={}){return q0(n,i,()=>C(null,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=vy(Object.assign({key:n.config.apiKey},f)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return ZC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Yi(n.emulatorConfig.host)&&(y.credentials="include"),ch.fetch()(yield z0(n,n.config.apiHost,t,p),y)}))})}function q0(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},gV),e);try{let i=new Hy(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw rh(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $0(n,f,l);P0(n,f)}}catch(i){if(i instanceof Yt)throw i;P0(n,"network-request-failed",{message:String(i)})}})}function z0(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?pV(n.config,i):`${n.config.apiScheme}://${i}`;return mV.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Hy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zy(this.auth,"network-request-failed")),yV.get())})}};function rh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zy(n,e,r);return i.customData._tokenResponse=t,i}function vV(n,e){return C(this,null,function*(){return fh(n,"POST","/v1/accounts:delete",e)})}function uh(n,e){return C(this,null,function*(){return fh(n,"POST","/v1/accounts:lookup",e)})}function qc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xy(n,e=!1){return C(this,null,function*(){let t=ht(n),r=yield t.getIdToken(e),i=G0(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qc(By(i.auth_time)),issuedAtTime:qc(By(i.iat)),expirationTime:qc(By(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function By(n){return Number(n)*1e3}function G0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wd(t);return i?JSON.parse(i):(ih("Failed to decode base64 JWT payload"),null)}catch(i){return ih("Caught error parsing JWT payload as JSON",i?.toString()),null}}function k0(n){let e=G0(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qy(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Yt&&_V(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function _V({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var zy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Gc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lh(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield qy(n,uh(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?W0(o.providerUserInfo):[],c=EV(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!c?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Gc(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function ev(n){return C(this,null,function*(){let e=ht(n);yield lh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function EV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function W0(n){return n.map(e=>{var{providerId:t}=e,r=up(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function IV(n,e){return C(this,null,function*(){let t=yield q0(n,{},()=>C(null,null,function*(){let r=vy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield z0(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Yi(n.emulatorConfig.host)&&(u.credentials="include"),ch.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function wV(n,e){return C(this,null,function*(){return fh(n,"POST","/v2/accounts:revokeToken",H0(n,e))})}var zc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=k0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield IV(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Hc("not implemented")}};function Yr(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ro=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield qy(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Xy(this,e)}reload(){return ev(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(ar(this.auth.app))return Promise.reject(oh(this.auth));let e=yield this.getIdToken();return yield qy(this,vV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,l,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Y=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Z,emailVerified:be,isAnonymous:mt,providerData:we,stsTokenManager:w}=t;Ee(Z&&w,e,"internal-error");let v=zc.fromJSON(this.name,w);Ee(typeof Z=="string",e,"internal-error"),Yr(p,e.name),Yr(m,e.name),Ee(typeof be=="boolean",e,"internal-error"),Ee(typeof mt=="boolean",e,"internal-error"),Yr(y,e.name),Yr(A,e.name),Yr(P,e.name),Yr(N,e.name),Yr(j,e.name),Yr(Y,e.name);let E=new n({uid:Z,auth:e,email:m,emailVerified:be,displayName:p,isAnonymous:mt,photoURL:A,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:j,lastLoginAt:Y});return we&&Array.isArray(we)&&(E.providerData=we.map(I=>Object.assign({},I))),N&&(E._redirectEventId=N),E}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new zc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?W0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new zc;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Gc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var O0=new Map;function io(n){ah(n instanceof Function,"Expected a class definition");let e=O0.get(n);return e?(ah(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,O0.set(n,e),e)}var DV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Gy=DV;function $y(n,e,t){return`firebase:${n}:${e}:${t}`}var dh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$y(this.userKey,i.apiKey,o),this.fullPersistenceKey=$y("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield uh(this.auth,{idToken:e}).catch(()=>{});return t?ro._fromGetAccountInfoResponse(this.auth,t,e):null}return ro._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(io(Gy),e,r);let i=(yield Promise.all(t.map(l=>C(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||io(Gy),s=$y(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let f=yield l._get(s);if(f){let p;if(typeof f=="string"){let m=yield uh(e,{idToken:f}).catch(()=>{});if(!m)break;p=yield ro._fromGetAccountInfoResponse(e,m,f)}else p=ro._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(l=>C(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function F0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RV(e))return"Blackberry";if(NV(e))return"Webos";if(bV(e))return"Safari";if((e.includes("chrome/")||CV(e))&&!e.includes("edge/"))return"Chrome";if(AV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function TV(n=jt()){return/firefox\//i.test(n)}function bV(n=jt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CV(n=jt()){return/crios\//i.test(n)}function SV(n=jt()){return/iemobile/i.test(n)}function AV(n=jt()){return/android/i.test(n)}function RV(n=jt()){return/blackberry/i.test(n)}function NV(n=jt()){return/webos/i.test(n)}function K0(n,e=[]){let t;switch(n){case"Browser":t=F0(jt());break;case"Worker":t=`${F0(jt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ts}/${r}`}var Wy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function MV(t){return C(this,arguments,function*(n,e={}){return fh(n,"GET","/v2/passwordPolicy",H0(n,e))})}var PV=6,Ky=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:PV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Qy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hh(this),this.idTokenSubscription=new hh(this),this.beforeStateQueue=new Wy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=io(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield dh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield uh(this,{idToken:e}),r=yield ro._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(ar(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield lh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fV()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(ar(this.app))return Promise.reject(oh(this));let t=e?ht(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return ar(this.app)?Promise.reject(oh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ar(this.app)?Promise.reject(oh(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(io(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield MV(this),t=new Ky(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield wV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&io(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield dh.create(this,[io(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&lV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function xV(n){return ht(n)}var hh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=n0(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var kV={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OV(n){kV=n}function FV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function LV(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(io);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var wX=FV("rcb"),DX=new oo(3e4,6e4);var TX=new oo(2e3,1e4);var bX=600*1e3;var CX=new oo(3e4,6e4);var SX=new oo(5e3,15e3);var AX=encodeURIComponent("fac");var L0="@firebase/auth",V0="1.10.8";var Yy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function VV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(n){vn(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;Ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(n)},l=new Qy(r,i,o,u);return LV(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vn(new Tt("auth-internal",e=>{let t=xV(e.getProvider("auth").getImmediate());return(r=>new Yy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(L0,V0,VV(n)),Ue(L0,V0,"esm2017")}var UV=300,RX=KC("authIdTokenMaxAge")||UV;function BV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}OV({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zy("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",BV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");var j2="auth";var ph=class{constructor(){return Ss(j2)}};var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Y0={};var cr,tv;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,b){for(var _=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)_[zn-2]=arguments[zn];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],D=w.g[2];var b=w.g[3],_=v+(b^E&(D^b))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+I[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^b&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+I[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^b)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+I[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~b))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+I[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,D=this.h,b=0;b<v;){if(D==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(I[D++]=w.charCodeAt(b++),D==this.blockSize){i(this,I),D=0;break}}else for(;b<v;)if(I[D++]=w[b++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var b=w[D]|0;I&&b==v||(E[D]=b,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return N(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return N(f(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<w.length;D+=8){var b=Math.min(8,w.length-D),_=parseInt(w.substring(D,D+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(P(this))return"-"+N(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var D=be(E,v).g;E=j(E,D.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,A(E))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=j(this,w),P(w)?-1:A(w)?0:1};function N(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=v;D++){var b=I+(this.i(D)&65535)+(w.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=_>>>16,b&=65535,_&=65535,E[D]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(w,v){return w.add(N(v))}n.j=function(w){if(A(this)||A(w))return p;if(P(this))return P(w)?N(this).j(N(w)):N(N(this).j(w));if(P(w))return N(this.j(N(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var b=this.i(I)>>>16,_=this.i(I)&65535,zn=w.i(D)>>>16,oa=w.i(D)&65535;E[2*I+2*D]+=_*oa,Y(E,2*I+2*D),E[2*I+2*D+1]+=b*oa,Y(E,2*I+2*D+1),E[2*I+2*D+1]+=_*zn,Y(E,2*I+2*D+1),E[2*I+2*D+2]+=b*zn,Y(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Y(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Z(w,v){this.g=w,this.h=v}function be(w,v){if(A(v))throw Error("division by zero");if(A(w))return new Z(p,p);if(P(w))return v=be(N(w),v),new Z(N(v.g),N(v.h));if(P(v))return v=be(w,N(v)),new Z(N(v.g),v.h);if(30<w.g.length){if(P(w)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=mt(E),I=mt(I);var D=we(E,1),b=we(I,1);for(I=we(I,2),E=we(E,2);!A(I);){var _=b.add(I);0>=_.l(w)&&(D=D.add(E),b=_),I=we(I,1),E=we(E,1)}return v=j(w,D.j(v)),new Z(D,v)}for(D=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(E),_=b.j(v);P(_)||0<_.l(w);)E-=I,b=l(E),_=b.j(v);A(b)&&(b=m),D=D.add(b),w=j(w,_)}return new Z(D,w)}n.A=function(w){return be(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function mt(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function we(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,D=[],b=0;b<I;b++)D[b]=0<v?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tv=Y0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,cr=Y0.Integer=s}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var nv,U2,As,rv,Wc,mh,iv,ov,sv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var T=a[g];if(!(T in h))break e;h=h[T]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,g=!1,T={next:function(){if(!g&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),a.apply(d,T)}}return function(){return a.apply(d,arguments)}}function m(a,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,T,S){for(var F=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)F[Ce-2]=arguments[Ce];return d.prototype[T].apply(g,F)}}function P(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function N(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=a.length||0,S=g.length||0;a.length=T+S;for(let F=0;F<S;F++)a[T+F]=g[F]}else a.push(g)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Y(a){return/^[\s\xa0]*$/.test(a)}function Z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function be(a){return be[" "](a),a}be[" "]=function(){};var mt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function we(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function w(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function v(a){let d={};for(let h in a)d[h]=a[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)a[h]=g[h];for(let S=0;S<E.length;S++)h=E[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function D(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function _(){var a=mf;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class zn{constructor(){this.h=this.g=null}add(d,h){let g=oa.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var oa=new j(()=>new AR,a=>a.reset());class AR{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let sa,aa=!1,mf=new zn,DE=()=>{let a=c.Promise.resolve(void 0);sa=()=>{a.then(RR)}};var RR=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){b(h)}var d=oa;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}aa=!1};function _r(){this.s=this.s,this.C=this.C}_r.prototype.s=!1,_r.prototype.ma=function(){this.s||(this.s=!0,this.N())},_r.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var NR=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a})();function ca(a,d){if(ot.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(mt){e:{try{be(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:MR[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ca.aa.h.call(this)}}A(ca,ot);var MR={2:"touch",3:"pen",4:"mouse"};ca.prototype.h=function(){ca.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ua="closure_listenable_"+(1e6*Math.random()|0),PR=0;function xR(a,d,h,g,T){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++PR,this.da=this.fa=!1}function fu(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function pu(a){this.src=a,this.g={},this.h=0}pu.prototype.add=function(a,d,h,g,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var F=vf(a,d,g,T);return-1<F?(d=a[F],h||(d.fa=!1)):(d=new xR(d,this.src,S,!!g,T),d.fa=h,a.push(d)),d};function yf(a,d){var h=d.type;if(h in a.g){var g=a.g[h],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(fu(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function vf(a,d,h,g){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return T}return-1}var _f="closure_lm_"+(1e6*Math.random()|0),Ef={};function TE(a,d,h,g,T){if(g&&g.once)return CE(a,d,h,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)TE(a,d[S],h,g,T);return null}return h=Tf(h),a&&a[ua]?a.K(d,h,l(g)?!!g.capture:!!g,T):bE(a,d,h,!1,g,T)}function bE(a,d,h,g,T,S){if(!d)throw Error("Invalid event type");var F=l(T)?!!T.capture:!!T,Ce=wf(a);if(Ce||(a[_f]=Ce=new pu(a)),h=Ce.add(d,h,g,F,S),h.proxy)return h;if(g=kR(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)NR||(T=F),T===void 0&&(T=!1),a.addEventListener(d.toString(),g,T);else if(a.attachEvent)a.attachEvent(AE(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function kR(){function a(h){return d.call(a.src,a.listener,h)}let d=OR;return a}function CE(a,d,h,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)CE(a,d[S],h,g,T);return null}return h=Tf(h),a&&a[ua]?a.L(d,h,l(g)?!!g.capture:!!g,T):bE(a,d,h,!0,g,T)}function SE(a,d,h,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)SE(a,d[S],h,g,T);else g=l(g)?!!g.capture:!!g,h=Tf(h),a&&a[ua]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=vf(S,h,g,T),-1<h&&(fu(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=wf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=vf(d,h,g,T)),(h=-1<a?d[a]:null)&&If(h))}function If(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ua])yf(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(AE(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=wf(d))?(yf(h,a),h.h==0&&(h.src=null,d[_f]=null)):fu(a)}}}function AE(a){return a in Ef?Ef[a]:Ef[a]="on"+a}function OR(a,d){if(a.da)a=!0;else{d=new ca(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&If(a),a=h.call(g,d)}return a}function wf(a){return a=a[_f],a instanceof pu?a:null}var Df="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tf(a){return typeof a=="function"?a:(a[Df]||(a[Df]=function(d){return a.handleEvent(d)}),a[Df])}function st(){_r.call(this),this.i=new pu(this),this.M=this,this.F=null}A(st,_r),st.prototype[ua]=!0,st.prototype.removeEventListener=function(a,d,h,g){SE(this,a,d,h,g)};function yt(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new ot(d,a);else if(d instanceof ot)d.target=d.target||a;else{var T=d;d=new ot(g,a),I(d,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var F=d.g=h[S];T=gu(F,g,!0,d)&&T}if(F=d.g=a,T=gu(F,g,!0,d)&&T,T=gu(F,g,!1,d)&&T,h)for(S=0;S<h.length;S++)F=d.g=h[S],T=gu(F,g,!1,d)&&T}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)fu(h[g]);delete a.g[d],a.h--}}this.F=null},st.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},st.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function gu(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var F=d[S];if(F&&!F.da&&F.capture==h){var Ce=F.listener,nt=F.ha||F.src;F.fa&&yf(a.i,F),T=Ce.call(nt,g)!==!1&&T}}return T&&!g.defaultPrevented}function RE(a,d,h){if(typeof a=="function")h&&(a=m(a,h));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function NE(a){a.g=RE(()=>{a.g=null,a.i&&(a.i=!1,NE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class FR extends _r{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:NE(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(a){_r.call(this),this.h=a,this.g={}}A(la,_r);var ME=[];function PE(a){we(a.g,function(d,h){this.g.hasOwnProperty(h)&&If(d)},a),a.g={}}la.prototype.N=function(){la.aa.N.call(this),PE(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bf=c.JSON.stringify,LR=c.JSON.parse,VR=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Cf(){}Cf.prototype.h=null;function xE(a){return a.h||(a.h=a.i())}function kE(){}var da={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sf(){ot.call(this,"d")}A(Sf,ot);function Af(){ot.call(this,"c")}A(Af,ot);var ci={},OE=null;function mu(){return OE=OE||new st}ci.La="serverreachability";function FE(a){ot.call(this,ci.La,a)}A(FE,ot);function ha(a){let d=mu();yt(d,new FE(d))}ci.STAT_EVENT="statevent";function LE(a,d){ot.call(this,ci.STAT_EVENT,a),this.stat=d}A(LE,ot);function vt(a){let d=mu();yt(d,new LE(d,a))}ci.Ma="timingevent";function VE(a,d){ot.call(this,ci.Ma,a),this.size=d}A(VE,ot);function fa(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function pa(){this.g=!0}pa.prototype.xa=function(){this.g=!1};function jR(a,d,h,g,T,S){a.info(function(){if(a.g)if(S)for(var F="",Ce=S.split("&"),nt=0;nt<Ce.length;nt++){var me=Ce[nt].split("=");if(1<me.length){var at=me[0];me=me[1];var ct=at.split("_");F=2<=ct.length&&ct[1]=="type"?F+(at+"="+me+"&"):F+(at+"=redacted&")}}else F=null;else F=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+F})}function UR(a,d,h,g,T,S,F){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+S+" "+F})}function vo(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+$R(a,h)+(g?" "+g:"")})}function BR(a,d){a.info(function(){return"TIMEOUT: "+d})}pa.prototype.info=function(){};function $R(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var F=1;F<T.length;F++)T[F]=""}}}}return bf(h)}catch{return d}}var yu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rf;function vu(){}A(vu,Cf),vu.prototype.g=function(){return new XMLHttpRequest},vu.prototype.i=function(){return{}},Rf=new vu;function Er(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new la(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UE}function UE(){this.i=null,this.g="",this.h=!1}var BE={},Nf={};function Mf(a,d,h){a.L=1,a.v=wu(Gn(d)),a.m=h,a.P=!0,$E(a,null)}function $E(a,d){a.F=Date.now(),_u(a),a.A=Gn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),nI(h.i,"t",g),a.C=0,h=a.j.J,a.h=new UE,a.g=EI(a.j,h?d:null,!a.m),0<a.O&&(a.M=new FR(m(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(ME[0]=T.toString()),T=ME);for(var S=0;S<T.length;S++){var F=TE(h,T[S],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ha(),jR(a.i,a.u,a.A,a.l,a.R,a.m)}Er.prototype.ca=function(a){a=a.target;let d=this.M;d&&Wn(a)==3?d.j():this.Y(a)},Er.prototype.Y=function(a){try{if(a==this.g)e:{let ct=Wn(this.g);var d=this.g.Ba();let Io=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||uI(this.g)))){this.J||ct!=4||d==7||(d==8||0>=Io?ha(3):ha(2)),Pf(this);var h=this.g.Z();this.X=h;t:if(HE(this)){var g=uI(this.g);a="";var T=g.length,S=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),ga(this);var F="";break t}this.h.i=new c.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=a,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=h==200,UR(this.i,this.u,this.A,this.l,this.R,ct,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,nt=this.g;if((Ce=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ce)){var me=Ce;break t}}me=null}if(h=me)vo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xf(this,h);else{this.o=!1,this.s=3,vt(12),ui(this),ga(this);break e}}if(this.P){h=!0;let en;for(;!this.J&&this.C<F.length;)if(en=HR(this,F),en==Nf){ct==4&&(this.s=4,vt(14),h=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(en==BE){this.s=4,vt(15),vo(this.i,this.l,F,"[Invalid Chunk]"),h=!1;break}else vo(this.i,this.l,en,null),xf(this,en);if(HE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||F.length!=0||this.h.h||(this.s=1,vt(16),h=!1),this.o=this.o&&h,!h)vo(this.i,this.l,F,"[Invalid Chunked Response]"),ui(this),ga(this);else if(0<F.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),jf(at),at.M=!0,vt(11))}}else vo(this.i,this.l,F,null),xf(this,F);ct==4&&ui(this),this.o&&!this.J&&(ct==4?mI(this.j,this):(this.o=!1,_u(this)))}else sN(this.g),h==400&&0<F.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),ui(this),ga(this)}}}catch{}finally{}};function HE(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function HR(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Nf:(h=Number(d.substring(h,g)),isNaN(h)?BE:(g+=1,g+h>d.length?Nf:(d=d.slice(g,g+h),a.C=g+h,d)))}Er.prototype.cancel=function(){this.J=!0,ui(this)};function _u(a){a.S=Date.now()+a.I,qE(a,a.I)}function qE(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=fa(m(a.ba,a),d)}function Pf(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Er.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(BR(this.i,this.A),this.L!=2&&(ha(),vt(17)),ui(this),this.s=2,ga(this)):qE(this,this.S-a)};function ga(a){a.j.G==0||a.J||mI(a.j,a)}function ui(a){Pf(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,PE(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function xf(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||kf(h.h,a))){if(!a.K&&kf(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Su(h),bu(h);else break e;Vf(h),vt(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=fa(m(h.Za,h),6e3));if(1>=WE(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else di(h,11)}else if((a.K||h.g==a)&&Su(h),!Y(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let me=T[d];if(h.T=me[0],me=me[1],h.G==2)if(me[0]=="c"){h.K=me[1],h.ia=me[2];let at=me[3];at!=null&&(h.la=at,h.j.info("VER="+h.la));let ct=me[4];ct!=null&&(h.Aa=ct,h.j.info("SVER="+h.Aa));let Io=me[5];Io!=null&&typeof Io=="number"&&0<Io&&(g=1.5*Io,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let en=a.g;if(en){let Ru=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var S=g.h;S.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Of(S,S.h),S.h=null))}if(g.D){let Uf=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Uf&&(g.ya=Uf,Re(g.I,g.D,Uf))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var F=a;if(g.qa=_I(g,g.J?g.ia:null,g.W),F.K){KE(g.h,F);var Ce=F,nt=g.L;nt&&(Ce.I=nt),Ce.B&&(Pf(Ce),_u(Ce)),g.g=F}else pI(g);0<h.i.length&&Cu(h)}else me[0]!="stop"&&me[0]!="close"||di(h,7);else h.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?di(h,7):Lf(h):me[0]!="noop"&&h.l&&h.l.ta(me),h.v=0)}}ha(4)}catch{}}var qR=class{constructor(a,d){this.g=a,this.map=d}};function zE(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function GE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function WE(a){return a.h?1:a.g?a.g.size:0}function kf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Of(a,d){a.g?a.g.add(d):a.h=d}function KE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}zE.prototype.cancel=function(){if(this.i=QE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function QE(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return P(a.i)}function zR(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function GR(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function YE(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=GR(a),g=zR(a),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],h&&h[S],a)}var ZE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WR(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),T=null;if(0<=g){var S=a[h].substring(0,g);T=a[h].substring(g+1)}else S=a[h];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function li(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof li){this.h=a.h,Eu(this,a.j),this.o=a.o,this.g=a.g,Iu(this,a.s),this.l=a.l;var d=a.i,h=new va;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),JE(this,h),this.m=a.m}else a&&(d=String(a).match(ZE))?(this.h=!1,Eu(this,d[1]||"",!0),this.o=ma(d[2]||""),this.g=ma(d[3]||"",!0),Iu(this,d[4]),this.l=ma(d[5]||"",!0),JE(this,d[6]||"",!0),this.m=ma(d[7]||"")):(this.h=!1,this.i=new va(null,this.h))}li.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ya(d,XE,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ya(d,XE,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ya(h,h.charAt(0)=="/"?YR:QR,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ya(h,JR)),a.join("")};function Gn(a){return new li(a)}function Eu(a,d,h){a.j=h?ma(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Iu(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function JE(a,d,h){d instanceof va?(a.i=d,XR(a.i,a.h)):(h||(d=ya(d,ZR)),a.i=new va(d,a.h))}function Re(a,d,h){a.i.set(d,h)}function wu(a){return Re(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ma(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ya(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,KR),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function KR(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var XE=/[#\/\?@]/g,QR=/[#\?:]/g,YR=/[#\?]/g,ZR=/[#\?@]/g,JR=/#/g;function va(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Ir(a){a.g||(a.g=new Map,a.h=0,a.i&&WR(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=va.prototype,n.add=function(a,d){Ir(this),this.i=null,a=_o(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function eI(a,d){Ir(a),d=_o(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function tI(a,d){return Ir(a),d=_o(a,d),a.g.has(d)}n.forEach=function(a,d){Ir(this),this.g.forEach(function(h,g){h.forEach(function(T){a.call(d,T,g,this)},this)},this)},n.na=function(){Ir(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=a[g];for(let S=0;S<T.length;S++)h.push(d[g])}return h},n.V=function(a){Ir(this);let d=[];if(typeof a=="string")tI(this,a)&&(d=d.concat(this.g.get(_o(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},n.set=function(a,d){return Ir(this),this.i=null,a=_o(this,a),tI(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function nI(a,d,h){eI(a,d),0<h.length&&(a.i=null,a.g.set(_o(a,d),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var T=S;F[g]!==""&&(T+="="+encodeURIComponent(String(F[g]))),a.push(T)}}return this.i=a.join("&")};function _o(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function XR(a,d){d&&!a.j&&(Ir(a),a.i=null,a.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(eI(this,g),nI(this,T,h))},a)),a.j=d}function eN(a,d){let h=new pa;if(c.Image){let g=new Image;g.onload=y(wr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(wr,h,"TestLoadImage: error",!1,d,g),g.onabort=y(wr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(wr,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function tN(a,d){let h=new pa,g=new AbortController,T=setTimeout(()=>{g.abort(),wr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?wr(h,"TestPingServer: ok",!0,d):wr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),wr(h,"TestPingServer: error",!1,d)})}function wr(a,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function nN(){this.g=new VR}function rN(a,d,h){let g=h||"";try{YE(a,function(T,S){let F=T;l(T)&&(F=bf(T)),d.push(g+S+"="+encodeURIComponent(F))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function _a(a){this.l=a.Ub||null,this.j=a.eb||!1}A(_a,Cf),_a.prototype.g=function(){return new Du(this.l,this.j)},_a.prototype.i=(function(a){return function(){return a}})({});function Du(a,d){st.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Du,st),n=Du.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ia(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rI(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function rI(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ea(this):Ia(this),this.readyState==3&&rI(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Ea(this))},n.Qa=function(a){this.g&&(this.response=a,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ia(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Ia(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function iI(a){let d="";return we(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Ff(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=iI(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Re(a,d,h))}function ke(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ke,st);var iN=/^https?$/i,oN=["POST","PUT"];n=ke.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rf.g(),this.v=this.o?xE(this.o):xE(Rf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){oI(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(oN,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,F]of h)this.g.setRequestHeader(S,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cI(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){oI(this,S)}};function oI(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,sI(a),Tu(a)}function sI(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,yt(this,"complete"),yt(this,"abort"),Tu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?aI(this):this.bb())},n.bb=function(){aI(this)};function aI(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Wn(a)!=4||a.Z()!=2)){if(a.u&&Wn(a)==4)RE(a.Ea,0,a);else if(yt(a,"readystatechange"),Wn(a)==4){a.h=!1;try{let F=a.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=F===0){var T=String(a.D).match(ZE)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),g=!iN.test(T?T.toLowerCase():"")}h=g}if(h)yt(a,"complete"),yt(a,"success");else{a.m=6;try{var S=2<Wn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",sI(a)}}finally{Tu(a)}}}}function Tu(a,d){if(a.g){cI(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||yt(a,"ready");try{h.onreadystatechange=g}catch{}}}function cI(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Wn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),LR(d)}};function uI(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function sN(a){let d={};a=(a.g&&2<=Wn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(Y(a[g]))continue;var h=D(a[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[T]||[];d[T]=S,S.push(h)}w(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function lI(a){this.Aa=0,this.i=[],this.j=new pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,a),this.cb=wa("retryDelaySeedMs",1e4,a),this.Wa=wa("forwardChannelMaxRetries",2,a),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new zE(a&&a.concurrentRequestLimit),this.Da=new nN,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=lI.prototype,n.la=8,n.G=1,n.connect=function(a,d,h,g){vt(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=_I(this,null,this.W),Cu(this)};function Lf(a){if(dI(a),a.G==3){var d=a.U++,h=Gn(a.I);if(Re(h,"SID",a.K),Re(h,"RID",d),Re(h,"TYPE","terminate"),Da(a,h),d=new Er(a,a.j,d),d.L=2,d.v=wu(Gn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=EI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_u(d)}vI(a)}function bu(a){a.g&&(jf(a),a.g.cancel(),a.g=null)}function dI(a){bu(a),a.u&&(c.clearTimeout(a.u),a.u=null),Su(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Cu(a){if(!GE(a.h)&&!a.s){a.s=!0;var d=a.Ga;sa||DE(),aa||(sa(),aa=!0),mf.add(d,a),a.B=0}}function aN(a,d){return WE(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=fa(m(a.Ga,a,d),yI(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Er(this,this.j,a),S=this.o;if(this.S&&(S?(S=v(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=fI(this,T,d),h=Gn(this.I),Re(h,"RID",a),Re(h,"CVER",22),this.D&&Re(h,"X-HTTP-Session-Id",this.D),Da(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(iI(S)))+"&"+d:this.m&&Ff(h,this.m,S)),Of(this.h,T),this.Ua&&Re(h,"TYPE","init"),this.P?(Re(h,"$req",d),Re(h,"SID","null"),T.T=!0,Mf(T,h,null)):Mf(T,h,d),this.G=2}}else this.G==3&&(a?hI(this,a):this.i.length==0||GE(this.h)||hI(this))};function hI(a,d){var h;d?h=d.l:h=a.U++;let g=Gn(a.I);Re(g,"SID",a.K),Re(g,"RID",h),Re(g,"AID",a.T),Da(a,g),a.m&&a.o&&Ff(g,a.m,a.o),h=new Er(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=fI(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Of(a.h,h),Mf(h,g,d)}function Da(a,d){a.H&&we(a.H,function(h,g){Re(d,g,h)}),a.l&&YE({},function(h,g){Re(d,g,h)})}function fI(a,d,h){h=Math.min(a.i.length,h);var g=a.l?m(a.l.Na,a.l,a):null;e:{var T=a.i;let S=-1;for(;;){let F=["count="+h];S==-1?0<h?(S=T[0].g,F.push("ofs="+S)):S=0:F.push("ofs="+S);let Ce=!0;for(let nt=0;nt<h;nt++){let me=T[nt].g,at=T[nt].map;if(me-=S,0>me)S=Math.max(0,T[nt].g-100),Ce=!1;else try{rN(at,F,"req"+me+"_")}catch{g&&g(at)}}if(Ce){g=F.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function pI(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;sa||DE(),aa||(sa(),aa=!0),mf.add(d,a),a.v=0}}function Vf(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=fa(m(a.Fa,a),yI(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,gI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=fa(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),bu(this),gI(this))};function jf(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function gI(a){a.g=new Er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Gn(a.qa);Re(d,"RID","rpc"),Re(d,"SID",a.K),Re(d,"AID",a.T),Re(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Re(d,"TO",a.ja),Re(d,"TYPE","xmlhttp"),Da(a,d),a.m&&a.o&&Ff(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=wu(Gn(d)),h.m=null,h.P=!0,$E(h,a)}n.Za=function(){this.C!=null&&(this.C=null,bu(this),Vf(this),vt(19))};function Su(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function mI(a,d){var h=null;if(a.g==d){Su(a),jf(a),a.g=null;var g=2}else if(kf(a.h,d))h=d.D,KE(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=a.B;g=mu(),yt(g,new VE(g,h)),Cu(a)}else pI(a);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&aN(a,d)||g==2&&Vf(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),T){case 1:di(a,5);break;case 4:di(a,10);break;case 3:di(a,6);break;default:di(a,2)}}}function yI(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function di(a,d){if(a.j.info("Error code "+d),d==2){var h=m(a.fb,a),g=a.Xa;let T=!g;g=new li(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Eu(g,"https"),wu(g),T?eN(g.toString(),h):tN(g.toString(),h)}else vt(2);a.G=0,a.l&&a.l.sa(d),vI(a),dI(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function vI(a){if(a.G=0,a.ka=[],a.l){let d=QE(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function _I(a,d,h){var g=h instanceof li?Gn(h):new li(h);if(g.g!="")d&&(g.g=d+"."+g.g),Iu(g,g.s);else{var T=c.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new li(null);g&&Eu(S,g),d&&(S.g=d),T&&Iu(S,T),h&&(S.l=h),g=S}return h=a.D,d=a.ya,h&&d&&Re(g,h,d),Re(g,"VER",a.la),Da(a,g),g}function EI(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ke(new _a({eb:h})):new ke(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function II(){}n=II.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Au(){}Au.prototype.g=function(a,d){return new Mt(a,d)};function Mt(a,d){st.call(this),this.g=new lI(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!Y(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Y(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Eo(this)}A(Mt,st),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Lf(this.g)},Mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=bf(a),a=h);d.i.push(new qR(d.Ya++,a)),d.G==3&&Cu(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,Mt.aa.N.call(this)};function wI(a){Sf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(wI,Sf);function DI(){Af.call(this),this.status=1}A(DI,Af);function Eo(a){this.g=a}A(Eo,II),Eo.prototype.ua=function(){yt(this.g,"a")},Eo.prototype.ta=function(a){yt(this.g,new wI(a))},Eo.prototype.sa=function(a){yt(this.g,new DI)},Eo.prototype.ra=function(){yt(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,sv=ur.createWebChannelTransport=function(){return new Au},ov=ur.getStatEventTarget=function(){return mu()},iv=ur.Event=ci,mh=ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yu.NO_ERROR=0,yu.TIMEOUT=8,yu.HTTP_ERROR=6,Wc=ur.ErrorCode=yu,jE.COMPLETE="complete",rv=ur.EventType=jE,kE.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",st.prototype.listen=st.prototype.K,As=ur.WebChannel=kE,U2=ur.FetchXmlHttpFactory=_a,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,nv=ur.XhrIo=ke}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});var Z0="@firebase/firestore",J0="4.8.0";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Zs="11.10.0";var lo=new Ln("@firebase/firestore");function Rs(){return lo.logLevel}function U(n,...e){if(lo.logLevel<=ce.DEBUG){let t=e.map(W_);lo.debug(`Firestore (${Zs}): ${n}`,...t)}}function hr(n,...e){if(lo.logLevel<=ce.ERROR){let t=e.map(W_);lo.error(`Firestore (${Zs}): ${n}`,...t)}}function ni(n,...e){if(lo.logLevel<=ce.WARN){let t=e.map(W_);lo.warn(`Firestore (${Zs}): ${n}`,...t)}}function W_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$S(n,r,t)}function $S(n,e,t){let r=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hr(r),new Error(r)}function Ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$S(e,i,r)}function ee(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},hv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fv=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Dh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new et(e)}},pv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},gv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Th=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Th(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Th(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function B2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function HS(){return new TextEncoder}var Xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=B2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function yv(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=HS(),s=$2(o.encode(X0(n,t)),o.encode(X0(e,t)));return s!==0?s:se(r,i)}}t+=r>65535?2:1}return se(n.length,e.length)}function X0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function $2(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return se(n[t],e[t]);return se(n.length,e.length)}function Ls(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var eS="__name__",bh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}},xe=class n extends bh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class n extends bh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eS}static keyField(){return new n([eS])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};function qS(n,e,t){if(!t)throw new $(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q2(n,e,t,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tS(n){if(!z.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nS(n){if(z.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function K_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function Zr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=K_(n);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ze(n,e){let t={typeString:n};return e&&(t.value=e),t}function lu(n,e){if(!zS(n))throw new $(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(k.INVALID_ARGUMENT,t);return!0}var rS=-62135596800,iS=1e6,Ge=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iS}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:ze("string",Ge._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ge(0,0))}static max(){return new n(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eu=-1,vv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};vv.UNKNOWN_ID=-1;function z2(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ge(t+1,0):new Ge(t,r));return new ho(i,z.empty(),e)}function G2(n){return new ho(n.readTime,n.key,eu)}var ho=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),z.empty(),eu)}static max(){return new n(ne.max(),z.empty(),eu)}};function W2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var K2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_v=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Js(n){return C(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==K2)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Q2(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xs(n){return n.name==="IndexedDbTransactionError"}var Q_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Y_=-1;function nf(n){return n==null}function tu(n){return n===0&&1/n==-1/0}function Y2(n){return typeof n=="number"&&Number.isInteger(n)&&!tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var GS="";function Z2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oS(e)),e=J2(n.get(t),e);return oS(e)}function J2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case GS:t+="";break;default:t+=o}}return t}function oS(n){return n+GS+""}var X2="remoteDocuments",WS="owner";var KS="mutationQueues";var QS="mutations";var YS="documentMutations",ej="remoteDocumentsV14";var ZS="remoteDocumentGlobal";var JS="targets";var XS="targetDocuments";var eA="targetGlobal",tA="collectionParents";var nA="clientMetadata";var rA="bundles";var iA="namedQueries";var tj="indexConfiguration";var nj="indexState";var rj="indexEntries";var oA="documentOverlays";var ij="globals";var oj=[KS,QS,YS,X2,JS,WS,eA,XS,nA,ZS,tA,rA,iA],xee=[...oj,oA],sj=[KS,QS,YS,ej,JS,WS,eA,XS,nA,ZS,tA,rA,iA,oA],aj=sj,cj=[...aj,tj,nj,rj];var kee=[...cj,ij];function sS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ai(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}},xs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ch(this.data.getIterator())}getIteratorFrom(e){return new Ch(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ch=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xt=class n{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(Bt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ls(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sh("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gt.EMPTY_BYTE_STRING=new gt("");var uj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(n){if(Ie(!!n,39018),typeof n=="string"){let e=0,t=uj.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pr(n){return typeof n=="string"?gt.fromBase64String(n):gt.fromUint8Array(n)}var aA="server_timestamp",cA="__type__",uA="__previous_value__",lA="__local_write_time__";function Z_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cA])===null||t===void 0?void 0:t.stringValue)===aA}function rf(n){let e=n.mapValue.fields[uA];return Z_(e)?rf(e):e}function nu(n){let e=fr(n.mapValue.fields[lA].timestampValue);return new Ge(e.seconds,e.nanos)}var Ev=class{constructor(e,t,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Ah="(default)",Rh=class n{constructor(e,t){this.projectId=e,this.database=t||Ah}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var J_="__type__",dA="__max__",yh={mapValue:{fields:{__type__:{stringValue:dA}}}},X_="__vector__",Vs="value";function ri(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Z_(n)?4:fA(n)?9007199254740991:hA(n)?10:11:G(28295,{value:n})}function $n(n,e){if(n===e)return!0;let t=ri(n);if(t!==ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nu(n).isEqual(nu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=fr(i.timestampValue),c=fr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return pr(i.bytesValue).isEqual(pr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),c=Ne(o.doubleValue);return s===c?tu(s)===tu(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return Ls(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(sS(s)!==sS(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!$n(s[u],c[u])))return!1;return!0})(n,e);default:return G(52216,{left:n})}}function ru(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function js(n,e){if(n===e)return 0;let t=ri(n),r=ri(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return aS(n.timestampValue,e.timestampValue);case 4:return aS(nu(n),nu(e));case 5:return yv(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=pr(o),u=pr(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=se(c[l],u[l]);if(f!==0)return f}return se(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=se(Ne(o.latitude),Ne(s.latitude));return c!==0?c:se(Ne(o.longitude),Ne(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cS(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,f;let p=o.fields||{},m=s.fields||{},y=(c=p[Vs])===null||c===void 0?void 0:c.arrayValue,A=(u=m[Vs])===null||u===void 0?void 0:u.arrayValue,P=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:cS(y,A)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===yh.mapValue&&s===yh.mapValue)return 0;if(o===yh.mapValue)return 1;if(s===yh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=yv(u[p],f[p]);if(m!==0)return m;let y=js(c[u[p]],l[f[p]]);if(y!==0)return y}return se(u.length,f.length)})(n.mapValue,e.mapValue);default:throw G(23264,{le:t})}}function aS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=fr(n),r=fr(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function cS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=js(t[i],r[i]);if(o)return o}return se(t.length,r.length)}function Us(n){return Iv(n)}function Iv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=fr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return pr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Iv(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Iv(t.fields[s])}`;return i+"}"})(n.mapValue):G(61005,{value:n})}function Eh(n){switch(ri(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=rf(n);return e?16+Eh(e):16;case 5:return 2*n.stringValue.length;case 6:return pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Eh(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ai(r.fields,(o,s)=>{i+=o.length+Eh(s)}),i})(n.mapValue);default:throw G(13486,{value:n})}}function wv(n){return!!n&&"integerValue"in n}function eE(n){return!!n&&"arrayValue"in n}function uS(n){return!!n&&"nullValue"in n}function lS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ih(n){return!!n&&"mapValue"in n}function hA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===X_}function Qc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ai(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dA}var Fee={mapValue:{fields:{[J_]:{stringValue:X_},[Vs]:{arrayValue:{}}}}};var Ut=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(t)}setAll(e){let t=Bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Qc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ai(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Qc(this.value))}};function pA(n){let e=[];return ai(n.fields,(t,r)=>{let i=new Bt([t]);if(Ih(r)){let o=pA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xt(e)}var En=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Ut.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Ut.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Ut.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bs=class{constructor(e,t){this.position=e,this.inclusive=t}};function dS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=js(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var $s=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function lj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nh=class{},Ye=class n extends Nh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Tv(e,t,r):t==="array-contains"?new Sv(e,r):t==="in"?new Av(e,r):t==="not-in"?new Rv(e,r):t==="array-contains-any"?new Nv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bv(e,r):new Cv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(js(t,this.value)):t!==null&&ri(this.value)===ri(t)&&this.matchesComparison(js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Hn=class n extends Nh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return gA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function gA(n){return n.op==="and"}function mA(n){return dj(n)&&gA(n)}function dj(n){for(let e of n.filters)if(e instanceof Hn)return!1;return!0}function Dv(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+Us(n.value);if(mA(n))return n.filters.map(e=>Dv(e)).join(",");{let e=n.filters.map(t=>Dv(t)).join(",");return`${n.op}(${e})`}}function yA(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)})(n,e):n instanceof Hn?(function(r,i){return i instanceof Hn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&yA(s,i.filters[c]),!0):!1})(n,e):void G(19439)}function vA(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${Us(t.value)}`})(n):n instanceof Hn?(function(t){return t.op.toString()+" {"+t.getFilters().map(vA).join(" ,")+"}"})(n):"Filter"}var Tv=class extends Ye{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},bv=class extends Ye{constructor(e,t){super(e,"in",t),this.keys=_A("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Cv=class extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=_A("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function _A(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var Sv=class extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return eE(t)&&ru(t.arrayValue,this.value)}},Av=class extends Ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}},Rv=class extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ru(this.value.arrayValue,t)}},Nv=class extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!eE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ru(this.value.arrayValue,r))}};var Mv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function fS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Mv(n,e,t,r,i,o,s)}function tE(n){let e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Us(r)).join(",")),e.Pe=t}return e.Pe}function nE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hS(n.startAt,e.startAt)&&hS(n.endAt,e.endAt)}function Pv(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function hj(n,e,t,r,i,o,s,c){return new Hs(n,e,t,r,i,o,s,c)}function rE(n){return new Hs(n)}function pS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fj(n){return n.collectionGroup!==null}function Yc(n){let e=ee(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new tt(Bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $s(o,r))}),t.has(Bt.keyField().canonicalString())||e.Te.push(new $s(Bt.keyField(),r))}return e.Te}function Un(n){let e=ee(n);return e.Ie||(e.Ie=pj(e,Yc(n))),e.Ie}function pj(n,e){if(n.limitType==="F")return fS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $s(i.field,o)});let t=n.endAt?new Bs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bs(n.startAt.position,n.startAt.inclusive):null;return fS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xv(n,e,t){return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return nE(Un(n),Un(e))&&n.limitType===e.limitType}function EA(n){return`${tE(Un(n))}|lt:${n.limitType}`}function Ns(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>vA(i)).join(", ")}]`),nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Us(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Us(i)).join(",")),`Target(${r})`})(Un(n))}; limitType=${n.limitType})`}function sf(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Yc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=dS(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Yc(r),i)||r.endAt&&!(function(s,c,u){let l=dS(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Yc(r),i))})(n,e)}function gj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IA(n){return(e,t)=>{let r=!1;for(let i of Yc(n)){let o=mj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mj(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?js(u,l):G(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var gr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ai(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return sA(this.inner)}size(){return this.innerSize}};var yj=new Fe(z.comparator);function mr(){return yj}var wA=new Fe(z.comparator);function Kc(...n){let e=wA;for(let t of n)e=e.insert(t.key,t);return e}function DA(n){let e=wA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function so(){return Zc()}function TA(){return Zc()}function Zc(){return new gr(n=>n.toString(),(n,e)=>n.isEqual(e))}var vj=new Fe(z.comparator),_j=new tt(z.comparator);function ue(...n){let e=_j;for(let t of n)e=e.add(t);return e}var Ej=new tt(se);function Ij(){return Ej}function iE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function bA(n){return{integerValue:""+n}}function wj(n,e){return Y2(e)?bA(e):iE(n,e)}var qs=class{constructor(){this._=void 0}};function Dj(n,e,t){return n instanceof zs?(function(i,o){let s={fields:{[cA]:{stringValue:aA},[lA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Z_(o)&&(o=rf(o)),o&&(s.fields[uA]=o),{mapValue:s}})(t,e):n instanceof fo?SA(n,e):n instanceof po?AA(n,e):(function(i,o){let s=CA(i,o),c=gS(s)+gS(i.Ee);return wv(s)&&wv(i.Ee)?bA(c):iE(i.serializer,c)})(n,e)}function Tj(n,e,t){return n instanceof fo?SA(n,e):n instanceof po?AA(n,e):t}function CA(n,e){return n instanceof Gs?(function(r){return wv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var zs=class extends qs{},fo=class extends qs{constructor(e){super(),this.elements=e}};function SA(n,e){let t=RA(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var po=class extends qs{constructor(e){super(),this.elements=e}};function AA(n,e){let t=RA(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var Gs=class extends qs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function gS(n){return Ne(n.integerValue||n.doubleValue)}function RA(n){return eE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bj(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fo&&i instanceof fo||r instanceof po&&i instanceof po?Ls(r.elements,i.elements,$n):r instanceof Gs&&i instanceof Gs?$n(r.Ee,i.Ee):r instanceof zs&&i instanceof zs})(n.transform,e.transform)}var kv=class{constructor(e,t){this.version=e,this.transformResults=t}},dr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ws=class{};function NA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iu(n.key,dr.none()):new go(n.key,n.data,dr.none());{let t=n.data,r=Ut.empty(),i=new tt(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new qn(n.key,r,new Xt(i.toArray()),dr.none())}}function Cj(n,e,t){n instanceof go?(function(i,o,s){let c=i.value.clone(),u=yS(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof qn?(function(i,o,s){if(!wh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=yS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(MA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Jc(n,e,t,r){return n instanceof go?(function(o,s,c,u){if(!wh(o.precondition,s))return c;let l=o.value.clone(),f=vS(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof qn?(function(o,s,c,u){if(!wh(o.precondition,s))return c;let l=vS(o.fieldTransforms,u,s),f=s.data;return f.setAll(MA(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,c){return wh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function Sj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=CA(r.transform,i||null);o!=null&&(t===null&&(t=Ut.empty()),t.set(r.field,o))}return t||null}function mS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ls(r,i,(o,s)=>bj(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var go=class extends Ws{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},qn=class extends Ws{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function yS(n,e,t){let r=new Map;Ie(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,Tj(s,c,t[i]))}return r}function vS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Dj(o,s,e))}return r}var iu=class extends Ws{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ov=class extends Ws{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Cj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=NA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Ls(this.mutations,e.mutations,(t,r)=>mS(t,r))&&Ls(this.baseMutations,e.baseMutations,(t,r)=>mS(t,r))}},Lv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return vj})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Vv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var He,ge;function Aj(n){switch(n){case k.OK:return G(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return G(15467,{code:n})}}function PA(n){if(n===void 0)return hr("GRPC error has no .code"),k.UNKNOWN;switch(n){case He.OK:return k.OK;case He.CANCELLED:return k.CANCELLED;case He.UNKNOWN:return k.UNKNOWN;case He.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case He.INTERNAL:return k.INTERNAL;case He.UNAVAILABLE:return k.UNAVAILABLE;case He.UNAUTHENTICATED:return k.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case He.NOT_FOUND:return k.NOT_FOUND;case He.ALREADY_EXISTS:return k.ALREADY_EXISTS;case He.PERMISSION_DENIED:return k.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case He.ABORTED:return k.ABORTED;case He.OUT_OF_RANGE:return k.OUT_OF_RANGE;case He.UNIMPLEMENTED:return k.UNIMPLEMENTED;case He.DATA_LOSS:return k.DATA_LOSS;default:return G(39323,{code:n})}}(ge=He||(He={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var _S=null;var Rj=new cr([4294967295,4294967295],0);function ES(n){let e=HS().encode(n),t=new tv;return t.update(e),new Uint8Array(t.digest())}function IS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new cr([t,r],0),new cr([i,o],0)]}var Uv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ao(`Invalid padding: ${t}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ao(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=cr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(cr.fromNumber(r)));return i.compare(Rj)===1&&(i=new cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=ES(e),[r,i]=IS(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let t=ES(e),[r,i]=IS(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Fe(se),mr(),ue())}},ou=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var ks=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Ph=class{constructor(e,t){this.targetId=e,this.De=t}},xh=class{constructor(e,t,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},kh=class{constructor(){this.ve=0,this.Ce=wS(),this.Fe=gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),t=ue(),r=ue();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new ou(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=wS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Bv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=mr(),this.je=vh(),this.Je=vh(),this.He=new Fe(se)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Pv(o))if(r===0){let s=new z(o.path);this.Xe(t,s,En.newNoDocument(s,ne.min()))}else Ie(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}_S?.ct((function(f,p,m,y,A){var P,N,j,Y,Z,be;let mt={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},we=p.unchangedNames;return we&&(mt.bloomFilter={applied:A===0,hashCount:(P=we?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=(j=(N=we?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&Y!==void 0?Y:0,padding:(be=(Z=we?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&be!==void 0?be:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),mt})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=pr(r).toUint8Array()}catch(u){if(u instanceof Sh)return ni("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Uv(s,i,o)}catch(u){return ni(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Pv(c.target)){let u=new z(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,En.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ue();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Mh(e,t,this.He,this.ze,r);return this.ze=mr(),this.je=vh(),this.Je=vh(),this.He=new Fe(se),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new kh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new tt(se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new tt(se),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vh(){return new Fe(z.comparator)}function wS(){return new Fe(z.comparator)}var Nj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pj={and:"AND",or:"OR"},$v=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Hv(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xj(n,e){return Oh(n,e.toTimestamp())}function Bn(n){return Ie(!!n,49232),ne.fromTimestamp((function(t){let r=fr(t);return new Ge(r.seconds,r.nanos)})(n))}function oE(n,e){return qv(n,e).canonicalString()}function qv(n,e){let t=(function(i){return new xe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kA(n){let e=xe.fromString(n);return Ie(jA(e),10190,{key:e.toString()}),e}function zv(n,e){return oE(n.databaseId,e.path)}function av(n,e){let t=kA(e);if(t.get(1)!==n.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(FA(t))}function OA(n,e){return oE(n.databaseId,e)}function kj(n){let e=kA(n);return e.length===4?xe.emptyPath():FA(e)}function Gv(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FA(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DS(n,e,t){return{name:zv(n,e),fields:t.value.mapValue.fields}}function Oj(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),gt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),gt.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?k.UNKNOWN:PA(l.code);return new $(f,l.message||"")})(s);t=new xh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=av(n,r.document.name),o=Bn(r.document.updateTime),s=r.document.createTime?Bn(r.document.createTime):ne.min(),c=new Ut({mapValue:{fields:r.document.fields}}),u=En.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];t=new ks(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=av(n,r.document),o=r.readTime?Bn(r.readTime):ne.min(),s=En.newNoDocument(i,o),c=r.removedTargetIds||[];t=new ks([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=av(n,r.document),o=r.removedTargetIds||[];t=new ks([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new jv(i,o),c=r.targetId;t=new Ph(c,s)}}return t}function Fj(n,e){let t;if(e instanceof go)t={update:DS(n,e.key,e.value)};else if(e instanceof iu)t={delete:zv(n,e.key)};else if(e instanceof qn)t={update:DS(n,e.key,e.data),updateMask:zj(e.fieldMask)};else{if(!(e instanceof Ov))return G(16599,{Rt:e.type});t={verify:zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof zs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gs)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw G(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:xj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)})(n,e.precondition)),t}function Lj(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Bn(i.updateTime):Bn(o);return s.isEqual(ne.min())&&(s=Bn(o)),new kv(s,i.transformResults||[])})(t,e))):[]}function Vj(n,e){return{documents:[OA(n,e.path)]}}function jj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OA(n,i);let o=(function(l){if(l.length!==0)return VA(Hn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:Ms(m.field),direction:$j(m.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Hv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Uj(n){let e=kj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ie(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(p){let m=LA(p);return m instanceof Hn&&mA(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(A){return new $s(Ps(A.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,nf(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Bs(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Bs(y,m)})(t.endAt)),hj(e,i,s,o,c,"F",u,l)}function Bj(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ps(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ps(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ps(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ps(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(Ps(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hn.create(t.compositeFilter.filters.map(r=>LA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(t.compositeFilter.op))})(n):G(30097,{filter:n})}function $j(n){return Nj[n]}function Hj(n){return Mj[n]}function qj(n){return Pj[n]}function Ms(n){return{fieldPath:n.canonicalString()}}function Ps(n){return Bt.fromServerFormat(n.fieldPath)}function VA(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(lS(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NAN"}};if(uS(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lS(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NOT_NAN"}};if(uS(t.value))return{unaryFilter:{field:Ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(t.field),op:Hj(t.op),value:t.value}}})(n):n instanceof Hn?(function(t){let r=t.getFilters().map(i=>VA(i));return r.length===1?r[0]:{compositeFilter:{op:qj(t.op),filters:r}}})(n):G(54877,{filter:n})}function zj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var su=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),c=gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Wv=class{constructor(e){this.gt=e}};function Gj(n){let e=Uj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xv(e,e.limit,"L"):e}var Fh=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),tu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=fr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(pr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?fA(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hA(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):G(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Vs,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ne(c)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),z.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Fh.Ut=new Fh;var Kv=class{constructor(){this.Dn=new Qv}addToCollectionParentIndex(e,t){return this.Dn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(ho.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Qv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(xe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(xe.comparator)).toArray()}};var Lee=new Uint8Array(0);var TS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UA=41943040,Jt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(UA,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var au=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var bS="LruGarbageCollector",Wj=1048576;function CS([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var Yv=class{constructor(e){this.Tr=e,this.buffer=new tt(CS),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();CS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Zv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){U(bS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xs(t)?U(bS,"Ignoring IndexedDB error during garbage collection: ",t):yield Js(t)}yield this.Rr(3e5)}))}},Jv=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Q_.ue);let r=new Yv(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(TS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TS):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Rs()<=ce.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Kj(n,e){return new Jv(n,e)}var Xv=class{constructor(){this.changes=new gr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var e_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var t_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Jc(r.mutation,i,Xt.empty(),Ge.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=so();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Kc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=so();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=mr(),s=Zc(),c=(function(){return Zc()})();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof qn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Jc(f.mutation,l,f.mutation.getFieldMask(),Ge.now())):s.set(l.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return c.set(l,new e_(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Zc(),i=new Fe((s,c)=>s-c),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||Xt.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||ue()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=TA();f.forEach(m=>{if(!o.has(m)){let y=NA(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(so()),c=eu,u=o;return s.next(l=>O.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(f=>({batchId:c,changes:DA(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Kc();return this.indexManager.getCollectionParents(e,o).next(c=>O.forEach(c,u=>{let l=(function(p,m){return new Hs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,En.newInvalidDocument(f)))});let c=Kc();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Jc(f.mutation,l,Xt.empty(),Ge.now()),sf(t,l)&&(c=c.insert(u,l))}),c})}};var n_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return O.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}})(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Gj(i.bundledQuery),readTime:Bn(i.readTime)}})(t)),O.resolve()}};var r_=class{constructor(){this.overlays=new Fe(z.comparator),this.kr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=so();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=so(),o=t.length+1,s=new z(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fe((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=so(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=so(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return O.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Vv(t,r));let o=this.kr.get(t);o===void 0&&(o=ue(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var i_=class{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var cu=class{constructor(){this.qr=new tt(qe.Qr),this.$r=new tt(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new qe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new z(new xe([])),r=new qe(t,e),i=new qe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new z(new xe([])),r=new qe(t,e),i=new qe(t,e+1),o=ue();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return z.comparator(e.key,t.key)||se(e.Hr,t.Hr)}static Ur(e,t){return se(e.Hr,t.Hr)||z.comparator(e.key,t.key)}};var o_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new tt(qe.Qr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Fv(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new qe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Y_:this.er-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qe(t,0),i=new qe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(se);return t.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new qe(new z(o),0),c=new tt(se);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),O.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(t.mutations,i=>{let o=new qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new qe(t,0),i=this.Yr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var s_=class{constructor(e){this.ni=e,this.docs=(function(){return new Fe(z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=mr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():En.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=mr(),s=t.path,c=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||W2(G2(f),r)<=0||(i.has(f.key)||sf(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ri(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new a_(this)}getSize(e){return O.resolve(this.size)}},a_=class extends Xv{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var c_=class{constructor(e){this.persistence=e,this.ii=new gr(t=>tE(t),nE),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new cu,this.targetCount=0,this._i=au.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),O.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new au(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.hr(t),O.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.oi.containsKey(t))}};var Lh=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Q_(0),this.ci=!1,this.ci=!0,this.li=new i_,this.referenceDelegate=e(this),this.hi=new c_(this),this.indexManager=new Kv,this.remoteDocumentCache=(function(i){return new s_(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Wv(t),this.Ti=new n_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new o_(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new u_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},u_=class extends _v{constructor(e){super(),this.currentSequenceNumber=e}},l_=class n{constructor(e){this.persistence=e,this.Ai=new cu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{let i=z.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return O.or([()=>O.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Vh=class n{constructor(e,t){this.persistence=e,this.gi=new gr(r=>Z2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Kj(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return O.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eh(e.data.value)),t}Sr(e,t,r){return O.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var d_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var h_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var f_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return e0()?8:Q2(jt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new h_;return this.ws(e,t,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,s,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Rs()<=ce.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Ns(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Rs()<=ce.DEBUG&&U("QueryEngine","Query:",Ns(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Rs()<=ce.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Ns(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):O.resolve())}ps(e,t){if(pS(t))return O.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xv(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,c);return this.Ds(t,l,s,u.readTime)?this.ps(e,xv(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return pS(t)||i.isEqual(ne.min())?O.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?O.resolve(null):(Rs()<=ce.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ns(t)),this.vs(e,s,t,z2(i,eu)).next(c=>c))})}bs(e,t){let r=new tt(IA(e));return t.forEach((i,o)=>{sf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Rs()<=ce.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Ns(t)),this.gs.getDocumentsMatchingQuery(e,t,ho.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sE="LocalStore",Qj=3e8,p_=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Fe(se),this.Ms=new gr(o=>tE(o),nE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Yj(n,e,t,r){return new p_(n,e,t,r)}function BA(n,e){return C(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ue();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function Zj(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(A=>{y=y.next(()=>f.getEntry(u,A)).next(P=>{let N=l.docVersions.get(A);Ie(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),f.addEntry(P)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ue();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $A(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Jj(n,e){let t=ee(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(t.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(gt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(P,N,j){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Qj?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,f)&&c.push(t.hi.updateTargetData(o,y))});let u=mr(),l=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(Xj(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(ne.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function Xj(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=mr();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):U(sE,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function eU(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Y_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tU(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new su(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function g_(n,e,t){return C(this,null,function*(){let r=ee(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xs(s))throw s;U(sE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function SS(n,e,t){let r=ee(n),i=ne.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=ee(u),m=p.Ms.get(f);return m!==void 0?O.resolve(p.Fs.get(m)):p.hi.getTargetData(l,f)})(r,s,Un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:ue())).next(c=>(nU(r,gj(e),c),{documents:c,qs:o})))}function nU(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var jh=class{constructor(){this.activeTargetIds=Ij()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var m_=class{constructor(){this.Fo=new jh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var y_=class{xo(e){}shutdown(){}};var AS="ConnectivityMonitor",Uh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){U(AS,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){U(AS,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _h=null;function v_(){return _h===null?_h=(function(){return 268435456+Math.round(2147483648*Math.random())})():_h++,"0x"+_h.toString(16)}var cv="RestConnection",rU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},__=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ah?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=v_(),c=this.Go(e,t.toUriEncodedString());U(cv,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),f=Yi(l);return this.jo(e,c,u,r,f).then(p=>(U(cv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ni(cv,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=rU[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var E_=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ft="WebChannelConnection",I_=class extends __{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=v_();return new Promise((c,u)=>{let l=new nv;l.setWithCredentials(!0),l.listenOnce(rv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wc.NO_ERROR:let p=l.getResponseJson();U(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Wc.TIMEOUT:U(ft,`RPC '${e}' ${s} timed out`),u(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:let m=l.getStatus();if(U(ft,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let A=y?.error;if(A&&A.status&&A.message){let P=(function(j){let Y=j.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(Y)>=0?Y:k.UNKNOWN})(A.status);u(new $(P,A.message))}else u(new $(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(k.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{U(ft,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);U(ft,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}P_(e,t,r){let i=v_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sv(),c=ov(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");U(ft,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let m=!1,y=!1,A=new E_({Ho:N=>{y?U(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(U(ft,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),U(ft,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),P=(N,j,Y)=>{N.listen(j,Z=>{try{Y(Z)}catch(be){setTimeout(()=>{throw be},0)}})};return P(p,As.EventType.OPEN,()=>{y||(U(ft,`RPC '${e}' stream ${i} transport opened.`),A.s_())}),P(p,As.EventType.CLOSE,()=>{y||(y=!0,U(ft,`RPC '${e}' stream ${i} transport closed`),A.__(),this.I_(p))}),P(p,As.EventType.ERROR,N=>{y||(y=!0,ni(ft,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),A.__(new $(k.UNAVAILABLE,"The operation could not be completed")))}),P(p,As.EventType.MESSAGE,N=>{var j;if(!y){let Y=N.data[0];Ie(!!Y,16349);let Z=Y,be=Z?.error||((j=Z[0])===null||j===void 0?void 0:j.error);if(be){U(ft,`RPC '${e}' stream ${i} received error:`,be);let mt=be.status,we=(function(E){let I=He[E];if(I!==void 0)return PA(I)})(mt),w=be.message;we===void 0&&(we=k.INTERNAL,w="Unknown error status: "+mt+" with message "+be.message),y=!0,A.__(new $(we,w)),p.close()}else U(ft,`RPC '${e}' stream ${i} received:`,Y),A.a_(Y)}}),P(c,iv.STAT_EVENT,N=>{N.stat===mh.PROXY?U(ft,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===mh.NOPROXY&&U(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function uv(){return typeof document<"u"?document:null}function af(n){return new $v(n,!0)}var Bh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var RS="PersistentStream",$h=class{constructor(e,t,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bh(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return U(RS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(U(RS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},w_=class extends $h{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Oj(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Bn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Gv(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=Pv(u)?{documents:Vj(o,u)}:{query:jj(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=xA(o,s.resumeToken);let l=Hv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){c.readTime=Oh(o,s.snapshotVersion.toTimestamp());let l=Hv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=Bj(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Gv(this.serializer),t.removeTarget=e,this.k_(t)}},D_=class extends $h{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Lj(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Gv(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Fj(this.serializer,r))};this.k_(t)}};var T_=class{},b_=class extends T_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,qv(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},C_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(hr(t),this._a=!1):U("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var mo="RemoteStore",S_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>C(this,null,function*(){yo(this)&&(U(mo,"Restarting streams for network reachability change."),yield(function(u){return C(this,null,function*(){let l=ee(u);l.Ia.add(4),yield du(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield cf(l)})})(this))}))}),this.Aa=new C_(r,i)}};function cf(n){return C(this,null,function*(){if(yo(n))for(let e of n.da)yield e(!0)})}function du(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function HA(n,e){let t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),lE(t)?uE(t):ea(t).x_()&&cE(t,e))}function aE(n,e){let t=ee(n),r=ea(t);t.Ta.delete(e),r.x_()&&qA(t,e),t.Ta.size===0&&(r.x_()?r.B_():yo(t)&&t.Aa.set("Unknown"))}function cE(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ea(n).H_(e)}function qA(n,e){n.Ra.$e(e),ea(n).Y_(e)}function uE(n){n.Ra=new Bv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ea(n).start(),n.Aa.aa()}function lE(n){return yo(n)&&!ea(n).M_()&&n.Ta.size>0}function yo(n){return ee(n).Ia.size===0}function zA(n){n.Ra=void 0}function iU(n){return C(this,null,function*(){n.Aa.set("Online")})}function oU(n){return C(this,null,function*(){n.Ta.forEach((e,t)=>{cE(n,e)})})}function sU(n,e){return C(this,null,function*(){zA(n),lE(n)?(n.Aa.la(e),uE(n)):n.Aa.set("Unknown")})}function aU(n,e,t){return C(this,null,function*(){if(n.Aa.set("Online"),e instanceof xh&&e.state===2&&e.cause)try{yield(function(i,o){return C(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){U(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hh(n,r)}else if(e instanceof ks?n.Ra.Ye(e):e instanceof Ph?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=yield $A(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(gt.EMPTY_BYTE_STRING,f.snapshotVersion)),qA(o,u);let p=new su(f.target,u,l,f.sequenceNumber);cE(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){U(mo,"Failed to raise snapshot:",r),yield Hh(n,r)}})}function Hh(n,e,t){return C(this,null,function*(){if(!Xs(e))throw e;n.Ia.add(1),yield du(n),n.Aa.set("Offline"),t||(t=()=>$A(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){U(mo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield cf(n)}))})}function GA(n,e){return e().catch(t=>Hh(n,t,e))}function uf(n){return C(this,null,function*(){let e=ee(n),t=ii(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Y_;for(;cU(e);)try{let i=yield eU(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,uU(e,i)}catch(i){yield Hh(e,i)}WA(e)&&KA(e)})}function cU(n){return yo(n)&&n.Pa.length<10}function uU(n,e){n.Pa.push(e);let t=ii(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function WA(n){return yo(n)&&!ii(n).M_()&&n.Pa.length>0}function KA(n){ii(n).start()}function lU(n){return C(this,null,function*(){ii(n).na()})}function dU(n){return C(this,null,function*(){let e=ii(n);for(let t of n.Pa)e.X_(t.mutations)})}function hU(n,e,t){return C(this,null,function*(){let r=n.Pa.shift(),i=Lv.from(r,e,t);yield GA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield uf(n)})}function fU(n,e){return C(this,null,function*(){e&&ii(n).Z_&&(yield(function(r,i){return C(this,null,function*(){if((function(s){return Aj(s)&&s!==k.ABORTED})(i.code)){let o=r.Pa.shift();ii(r).N_(),yield GA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield uf(r)}})})(n,e)),WA(n)&&KA(n)})}function NS(n,e){return C(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),U(mo,"RemoteStore received new credentials");let r=yo(t);t.Ia.add(3),yield du(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield cf(t)})}function pU(n,e){return C(this,null,function*(){let t=ee(n);e?(t.Ia.delete(2),yield cf(t)):e||(t.Ia.add(2),yield du(t),t.Aa.set("Unknown"))})}function ea(n){return n.Va||(n.Va=(function(t,r,i){let o=ee(t);return o.ia(),new w_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:iU.bind(null,n),e_:oU.bind(null,n),n_:sU.bind(null,n),J_:aU.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.Va.N_(),lE(n)?uE(n):n.Aa.set("Unknown")):(yield n.Va.stop(),zA(n))}))),n.Va}function ii(n){return n.ma||(n.ma=(function(t,r,i){let o=ee(t);return o.ia(),new D_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:lU.bind(null,n),n_:fU.bind(null,n),ea:dU.bind(null,n),ta:hU.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield uf(n)):(yield n.ma.stop(),n.Pa.length>0&&(U(mo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var A_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dE(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Xs(n))return new $(k.UNAVAILABLE,`${e}: ${n}`);throw n}var qh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Kc(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var zh=class{constructor(){this.fa=new Fe(z.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ks=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,qh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var R_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},N_=class{constructor(){this.queries=MS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ee(t),o=i.queries;i.queries=MS(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function MS(){return new gr(n=>EA(n),of)}function gU(n,e){return C(this,null,function*(){let t=ee(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new R_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=dE(s,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&hE(t)})}function mU(n,e){return C(this,null,function*(){let t=ee(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function yU(n,e){let t=ee(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&hE(t)}function vU(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function hE(n){n.Da.forEach(e=>{e.next()})}var M_,PS;(PS=M_||(M_={})).Fa="default",PS.Cache="cache";var P_=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ks(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==M_.Cache}};var Gh=class{constructor(e){this.key=e}},Wh=class{constructor(e){this.key=e}},x_=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=IA(e),this.eu=new qh(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new zh,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=sf(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?A!==P&&(r.track({type:3,doc:y}),N=!0):this.iu(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(c=!0)),N&&(y?(s=s.add(y),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(y,A){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:N})}};return P(y)-P(A)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ks(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Wh(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Gh(r))}),t}uu(e){this.Ha=e.qs,this.Za=ue();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ks.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},fE="SyncEngine",k_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},O_=class{constructor(e){this.key=e,this.lu=!1}},F_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new gr(c=>EA(c),of),this.Tu=new Map,this.Iu=new Set,this.du=new Fe(z.comparator),this.Eu=new Map,this.Au=new cu,this.Ru={},this.Vu=new Map,this.mu=au.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function _U(n,e,t=!0){return C(this,null,function*(){let r=eR(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield QA(r,e,t,!0),i})}function EU(n,e){return C(this,null,function*(){let t=eR(n);yield QA(t,e,!0,!1)})}function QA(n,e,t,r){return C(this,null,function*(){let i=yield tU(n.localStore,Un(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield IU(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&HA(n.remoteStore,i),c})}function IU(n,e,t,r,i){return C(this,null,function*(){n.gu=(p,m,y)=>(function(P,N,j,Y){return C(this,null,function*(){let Z=N.view.nu(j);Z.Ds&&(Z=yield SS(P.localStore,N.query,!1).then(({documents:w})=>N.view.nu(w,Z)));let be=Y&&Y.targetChanges.get(N.targetId),mt=Y&&Y.targetMismatches.get(N.targetId)!=null,we=N.view.applyChanges(Z,P.isPrimaryClient,be,mt);return kS(P,N.targetId,we._u),we.snapshot})})(n,p,m,y);let o=yield SS(n.localStore,e,!0),s=new x_(e,o.qs),c=s.nu(o.documents),u=ou.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);kS(n,t,l._u);let f=new k_(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function wU(n,e,t){return C(this,null,function*(){let r=ee(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!of(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield g_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&aE(r.remoteStore,i.targetId),L_(r,i.targetId)}).catch(Js))):(L_(r,i.targetId),yield g_(r.localStore,i.targetId,!0))})}function DU(n,e){return C(this,null,function*(){let t=ee(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),aE(t.remoteStore,r.targetId))})}function TU(n,e,t){return C(this,null,function*(){let r=MU(n);try{let i=yield(function(s,c){let u=ee(s),l=Ge.now(),f=c.reduce((y,A)=>y.add(A.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=mr(),P=ue();return u.Os.getEntries(y,f).next(N=>{A=N,A.forEach((j,Y)=>{Y.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,A)).next(N=>{p=N;let j=[];for(let Y of c){let Z=Sj(Y,p.get(Y.key).overlayedDocument);Z!=null&&j.push(new qn(Y.key,Z,pA(Z.value.mapValue),dr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,c)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:DA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Fe(se)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield hu(r,i.changes),yield uf(r.remoteStore)}catch(i){let o=dE(i,"Failed to persist write");t.reject(o)}})}function YA(n,e){return C(this,null,function*(){let t=ee(n);try{let r=yield Jj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ie(s.lu,14607):i.removedDocuments.size>0&&(Ie(s.lu,42227),s.lu=!1))}),yield hu(t,r,e)}catch(r){yield Js(r)}})}function xS(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=ee(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&hE(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bU(n,e,t){return C(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Fe(z.comparator);s=s.insert(o,En.newNoDocument(o,ne.min()));let c=ue().add(o),u=new Mh(ne.min(),new Map,new Fe(se),s,c);yield YA(r,u),r.du=r.du.remove(o),r.Eu.delete(e),pE(r)}else yield g_(r.localStore,e,!1).then(()=>L_(r,e,t)).catch(Js)})}function CU(n,e){return C(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield Zj(t.localStore,e);JA(t,r,null),ZA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hu(t,i)}catch(i){yield Js(i)}})}function SU(n,e,t){return C(this,null,function*(){let r=ee(n);try{let i=yield(function(s,c){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(Ie(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);JA(r,e,t),ZA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hu(r,i)}catch(i){yield Js(i)}})}function ZA(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function JA(n,e,t){let r=ee(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function L_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||XA(n,r)})}function XA(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(aE(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),pE(n))}function kS(n,e,t){for(let r of t)r instanceof Gh?(n.Au.addReference(r.key,e),AU(n,r)):r instanceof Wh?(U(fE,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||XA(n,r.key)):G(19791,{yu:r})}function AU(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(U(fE,"New document in limbo: "+t),n.Iu.add(r),pE(n))}function pE(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new z(xe.fromString(e)),r=n.mu.next();n.Eu.set(r,new O_(t)),n.du=n.du.insert(t,r),HA(n.remoteStore,new su(Un(rE(t.path)),r,"TargetPurposeLimboResolution",Q_.ue))}}function hu(n,e,t){return C(this,null,function*(){let r=ee(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=d_.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return C(this,null,function*(){let f=ee(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.Is,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Xs(p))throw p;U(sE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Fs.get(m),A=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(A);f.Fs=f.Fs.insert(m,P)}}})})(r.localStore,o))})}function RU(n,e){return C(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){U(fE,"User change. New user:",e.toKey());let r=yield BA(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new $(k.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hu(t,r.Bs)}})}function NU(n,e){let t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let i=ue(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let c=t.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function eR(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bU.bind(null,e),e.hu.J_=yU.bind(null,e.eventManager),e.hu.pu=vU.bind(null,e.eventManager),e}function MU(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SU.bind(null,e),e}var tR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=af(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Yj(this.persistence,new f_,t.initialUser,this.serializer)}Du(t){return new Lh(l_.Vi,this.serializer)}bu(t){return new m_}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),V_=class extends tR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ie(this.persistence.referenceDelegate instanceof Vh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Zv(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Lh(r=>Vh.Vi(r,t),this.serializer)}};var PU=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RU.bind(null,this.syncEngine),yield pU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new N_})()}createDatastore(t){let r=af(t.databaseInfo.databaseId),i=(function(s){return new I_(s)})(t.databaseInfo);return(function(s,c,u,l){return new b_(s,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new S_(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>xS(this.syncEngine,r,0),(function(){return Uh.C()?new Uh:new y_})())}createSyncEngine(t,r){return(function(o,s,c,u,l,f,p){let m=new F_(o,s,c,u,l,f);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield(function(o){return C(this,null,function*(){let s=ee(o);U(mo,"RemoteStore shutting down."),s.Ia.add(5),yield du(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var j_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var oi="FirestoreClient",U_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>C(this,null,function*(){U(oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U(oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=dE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lv(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U(oi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield BA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{ni("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{U("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ni("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function OS(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield xU(n);U(oi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>NS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>NS(e.remoteStore,i)),n._onlineComponents=e})}function xU(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U(oi,"Using user provided OfflineComponentProvider");try{yield lv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ni("Error using user provided cache. Falling back to memory cache: "+t),yield lv(n,new tR)}}else U(oi,"Using default OfflineComponentProvider"),yield lv(n,new V_(void 0));return n._offlineComponents})}function nR(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U(oi,"Using user provided OnlineComponentProvider"),yield OS(n,n._uninitializedComponentsProvider._online)):(U(oi,"Using default OnlineComponentProvider"),yield OS(n,new PU))),n._onlineComponents})}function kU(n){return nR(n).then(e=>e.syncEngine)}function FS(n){return C(this,null,function*(){let e=yield nR(n),t=e.eventManager;return t.onListen=_U.bind(null,e.syncEngine),t.onUnlisten=wU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DU.bind(null,e.syncEngine),t})}function rR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var LS=new Map;var iR="firestore.googleapis.com",VS=!0,Kh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iR,this.ssl=VS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:VS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wj)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dv;switch(r.type){case"firstParty":return new gv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=LS.get(t);r&&(U("ComponentProvider","Removing Datastore"),LS.delete(t),r.terminate())})(this),Promise.resolve()}};function oR(n,e,t,r={}){var i;n=Zr(n,Qs);let o=Yi(e),s=n._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(my(`https://${u}`),yy("Firestore",!0)),s.host!==iR&&s.host!==u&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Zi(l,c)&&(n._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=et.MOCK_USER;else{f=QC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new et(m)}n._authCredentials=new hv(new Dh(f,p))}}var Qh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lu(t,n._jsonSchema))return new n(e,r||null,new z(xe.fromString(t.referencePath)))}};pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:ze("string",pt._jsonSchemaVersion),referencePath:ze("string")};var Jr=class n extends Qh{constructor(e,t,r){super(e,t,rE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function sR(n,e,...t){if(n=ht(n),qS("collection","path",e),n instanceof Qs){let r=xe.fromString(e,...t);return nS(r),new Jr(n,null,r)}{if(!(n instanceof pt||n instanceof Jr))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return nS(r),new Jr(n.firestore,null,r)}}function gE(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Xc.newId()),qS("doc","path",e),n instanceof Qs){let r=xe.fromString(e,...t);return tS(r),new pt(n,null,new z(r))}{if(!(n instanceof pt||n instanceof Jr))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return tS(r),new pt(n.firestore,n instanceof Jr?n.converter:null,new z(r))}}var jS="AsyncQueue",Yh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bh(this,"async_queue_retry"),this.oc=()=>{let r=uv();r&&U(jS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=uv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=uv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new lr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Xs(e))throw e;U(jS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,hr("INTERNAL UNHANDLED ERROR: ",US(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=A_.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:US(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function US(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function BS(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var si=class extends Qs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,yield e}})}};function aR(n,e){let t=typeof n=="object"?n:bs(),r=typeof n=="string"?n:e||Ah,i=Zd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=WC("firestore");o&&oR(i,...o)}return i}function cR(n){if(n._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OU(n),n._firestoreClient}function OU(n){var e,t,r;let i=n._freezeSettings(),o=(function(c,u,l,f){return new Ev(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(n._componentsProvider))}var Xr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(gt.fromBase64String(e))}catch(t){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Xr._jsonSchemaVersion="firestore/bytes/1.0",Xr._jsonSchema={type:ze("string",Xr._jsonSchemaVersion),bytes:ze("string")};var Ys=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var uu=class{constructor(e){this._methodName=e}};var ei=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(lu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ei._jsonSchemaVersion="firestore/geoPoint/1.0",ei._jsonSchema={type:ze("string",ei._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};var ti=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ti._jsonSchemaVersion="firestore/vectorValue/1.0",ti._jsonSchema={type:ze("string",ti._jsonSchemaVersion),vectorValues:ze("object")};var FU=/^__.*__$/,B_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qn(e,this.data,this.fieldMask,t,this.fieldTransforms):new go(e,this.data,t,this.fieldTransforms)}},Zh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function uR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:n})}}var $_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(uR(this.Ec)&&FU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},H_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||af(e)}Dc(e,t,r,i=!1){return new $_({Ec:e,methodName:t,bc:r,path:Bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lR(n){let e=n._freezeSettings(),t=af(n._databaseId);return new H_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LU(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);mE("Data must be an object, but it was:",s,r);let c=dR(r,s),u,l;if(o.merge)u=new Xt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=q_(e,p,t);if(!s.contains(m))throw new $(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fR(f,m)||f.push(m)}u=new Xt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new B_(new Ut(c),u,l)}var Jh=class n extends uu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function VU(n,e,t,r){let i=n.Dc(1,e,t);mE("Data must be an object, but it was:",i,r);let o=[],s=Ut.empty();ai(r,(u,l)=>{let f=yE(e,u,t);l=ht(l);let p=i.gc(f);if(l instanceof Jh)o.push(f);else{let m=lf(l,p);m!=null&&(o.push(f),s.set(f,m))}});let c=new Xt(o);return new Zh(s,c,i.fieldTransforms)}function jU(n,e,t,r,i,o){let s=n.Dc(1,e,t),c=[q_(e,r,t)],u=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(q_(e,o[m])),u.push(o[m+1]);let l=[],f=Ut.empty();for(let m=c.length-1;m>=0;--m)if(!fR(l,c[m])){let y=c[m],A=u[m];A=ht(A);let P=s.gc(y);if(A instanceof Jh)l.push(y);else{let N=lf(A,P);N!=null&&(l.push(y),f.set(y,N))}}let p=new Xt(l);return new Zh(f,p,s.fieldTransforms)}function lf(n,e){if(hR(n=ht(n)))return mE("Unsupported field value:",e,n),dR(n,e);if(n instanceof uu)return(function(r,i){if(!uR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=lf(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ge.fromDate(r);return{timestampValue:Oh(i.serializer,o)}}if(r instanceof Ge){let o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,o)}}if(r instanceof ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xr)return{bytesValue:xA(i.serializer,r._byteString)};if(r instanceof pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:oE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ti)return(function(s,c){return{mapValue:{fields:{[J_]:{stringValue:X_},[Vs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return iE(c.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${K_(r)}`)})(n,e)}function dR(n,e){let t={};return sA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ai(n,(r,i)=>{let o=lf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof ei||n instanceof Xr||n instanceof pt||n instanceof uu||n instanceof ti)}function mE(n,e,t){if(!hR(t)||!zS(t)){let r=K_(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function q_(n,e,t){if((e=ht(e))instanceof Ys)return e._internalPath;if(typeof e=="string")return yE(n,e);throw Xh("Field path arguments must be of type string or ",n,!1,void 0,t)}var UU=new RegExp("[~\\*/\\[\\]]");function yE(n,e,t){if(e.search(UU)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ys(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(k.INVALID_ARGUMENT,c+n+u)}function fR(n,e){return n.some(t=>t.isEqual(e))}var ef=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},z_=class extends ef{data(){return super.data()}};function pR(n,e){return typeof e=="string"?yE(n,e):e instanceof Ys?e._internalPath:e._delegate._internalPath}function BU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var G_=class{convertValue(e,t="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ai(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Vs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new ti(o)}convertGeoPoint(e){return new ei(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){let t=fr(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xe.fromString(e);Ie(jA(r),9688,{name:e});let i=new Rh(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function $U(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var co=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uo=class n extends ef{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:ze("string",uo._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};var Os=class extends uo{data(e={}){return super.data(e)}},Fs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new co(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Os(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Os(i._firestore,i._userDataWriter,c.doc.key,c.doc,new co(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Os(i._firestore,i._userDataWriter,c.doc.key,c.doc,new co(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:HU(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function HU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}Fs._jsonSchemaVersion="firestore/querySnapshot/1.0",Fs._jsonSchema={type:ze("string",Fs._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};var tf=class extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}};function gR(n,e,t,...r){n=Zr(n,pt);let i=Zr(n.firestore,si),o=lR(i),s;return s=typeof(e=ht(e))=="string"||e instanceof Ys?jU(o,"updateDoc",n._key,e,t,r):VU(o,"updateDoc",n._key,e),_E(i,[s.toMutation(n._key,dr.exists(!0))])}function mR(n){return _E(Zr(n.firestore,si),[new iu(n._key,dr.none())])}function yR(n,e){let t=Zr(n.firestore,si),r=gE(n),i=$U(n.converter,e);return _E(t,[LU(lR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}function vE(n,...e){var t,r,i;n=ht(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||BS(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(BS(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof pt)l=Zr(n.firestore,si),f=rE(n._key.path),u={next:p=>{e[s]&&e[s](qU(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Zr(n,Qh);l=Zr(p.firestore,si),f=p._query;let m=new tf(l);u={next:y=>{e[s]&&e[s](new Fs(l,m,p,y))},error:e[s+1],complete:e[s+2]},BU(n._query)}return(function(m,y,A,P){let N=new j_(P),j=new P_(y,N,A);return m.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return gU(yield FS(m),j)})),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return mU(yield FS(m),j)}))}})(cR(l),f,c,u)}function _E(n,e){return(function(r,i){let o=new lr;return r.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return TU(yield kU(r),i,o)})),o.promise})(cR(n),e)}function qU(n,e,t){let r=t.docs.get(e._key),i=new tf(n);return new uo(n,i,e._key,r,new co(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Zs=i})(Ts),vn(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new si(new fv(r.getProvider("auth-internal")),new mv(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rh(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ue(Z0,J0,e),Ue(Z0,J0,"esm2017")})();var df=function(){return df=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},df.apply(this,arguments)};var WU={includeMetadataChanges:!1};function vR(n,e){return e===void 0&&(e=WU),new ie(function(t){var r=vE(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function _R(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:df(df({},r),(t={},t[e.idField]=n.id,t))}function ER(n){return vR(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function IR(n,e){return e===void 0&&(e={}),ER(n).pipe(ae(function(t){return t.map(function(r){return _R(r,e)})}))}var In=class{constructor(e){return e}},wR="firestore",EE=class{constructor(){return Ss(wR)}};var IE=new q("angularfire2.firestore-instances");function KU(n,e){let t=eh(wR,n,e);return t&&new In(t)}function QU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new In(r)}}var YU={provide:EE,deps:[[new Sn,IE]]},ZU={provide:In,useFactory:KU,deps:[[new Sn,IE],no]};function DR(n,...e){return Ue("angularfire",eo.full,"fst"),Ht([ZU,YU,{provide:IE,useFactory:QU(n),multi:!0,deps:[Te,Be,to,Uc,[new Sn,ph],[new Sn,nh],...e]}])}var ta=Zt(IR,!0);var na=Zt(yR,!0,2);var yr=Zt(sR,!0,2);var ra=Zt(mR,!0,2);var vr=Zt(gE,!0,2);var TR=Zt(aR,!0);var ia=Zt(gR,!0,2);function JU(n,e){if(n&1){let t=$i();x(0,"tr")(1,"td"),L(2),M(),x(3,"td"),L(4),M(),x(5,"td"),L(6),M(),x(7,"td"),L(8),M(),x(9,"td"),L(10),M(),x(11,"td"),L(12),M(),x(13,"td"),L(14),M(),x(15,"td")(16,"button",12),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.startEditRecord(i.id,i.date,i.patientName,i.age,i.gender,i.sicknessDiagnosed,i.treatmentProvided,i.attendingPhysician))}),L(17,"Edit"),M(),x(18,"button",13),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.deleteRecord(i.id))}),L(19,"Delete"),M()()()}if(n&2){let t=e.$implicit;K(2),Ae(t.date),K(2),Ae(t.patientName),K(2),Ae(t.age),K(2),Ae(t.gender),K(2),Ae(t.sicknessDiagnosed),K(2),Ae(t.treatmentProvided),K(2),Ae(t.attendingPhysician)}}var hf=class n{constructor(e){this.firestore=e;let t=yr(this.firestore,"daily_service_records");ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}title=le("Daily Service Record");date=le("");patientName=le("");age=le(null);gender=le("");sicknessDiagnosed=le("");treatmentProvided=le("");attendingPhysician=le("");editingId=le(null);records=[];resetForm(){this.date.set(""),this.patientName.set(""),this.age.set(null),this.gender.set(""),this.sicknessDiagnosed.set(""),this.treatmentProvided.set(""),this.attendingPhysician.set(""),this.editingId.set(null)}addRecord(){let e=this.date(),t=this.patientName(),r=this.age(),i=this.gender(),o=this.sicknessDiagnosed(),s=this.treatmentProvided(),c=this.attendingPhysician(),u=this.editingId();if(e&&t&&r){let l=yr(this.firestore,"daily_service_records");u?this.editRecord(u,e,t,r,i,o,s,c):(na(l,{date:e,patientName:t,age:r,gender:i,sicknessDiagnosed:o,treatmentProvided:s,attendingPhysician:c}),this.resetForm())}}startEditRecord(e,t,r,i,o,s,c,u){this.date.set(t),this.patientName.set(r),this.age.set(i),this.gender.set(o),this.sicknessDiagnosed.set(s),this.treatmentProvided.set(c),this.attendingPhysician.set(u),this.editingId.set(e)}deleteRecord(e){let t=vr(this.firestore,`daily_service_records/${e}`);ra(t),this.editingId()===e&&this.resetForm()}editRecord(e,t,r,i,o,s,c,u){let l=vr(this.firestore,`daily_service_records/${e}`);ia(l,{date:t,patientName:r,age:i,gender:o,sicknessDiagnosed:s,treatmentProvided:c,attendingPhysician:u}),this.resetForm()}static \u0275fac=function(t){return new(t||n)(Ke(In))};static \u0275cmp=hn({type:n,selectors:[["app-daily-service-record"]],decls:53,vars:10,consts:[[1,"module-container"],[1,"form-section"],["type","date","placeholder","Date the treatment was provided",3,"input","value"],["type","text","placeholder","Full name of the patient",3,"input","value"],["type","number","placeholder","Patient age",3,"input","value"],["type","text","placeholder","Male / Female / Other",3,"input","value"],["type","text","placeholder","Illness, medical condition, or injury",3,"input","value"],["placeholder","Medicine or treatment given",3,"input","value"],["type","text","placeholder","Name of the attending nurse/doctor",3,"input","value"],[1,"primary-btn",2,"width","100%",3,"click"],[1,"list-section"],[4,"ngFor","ngForOf"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"h1"),L(3),M(),wt(4,"hr"),x(5,"label"),L(6,"Date of Treatment"),M(),x(7,"input",2),de("input",function(o){return r.date.set(o.target.value)}),M(),x(8,"label"),L(9,"Patient Name"),M(),x(10,"input",3),de("input",function(o){return r.patientName.set(o.target.value)}),M(),x(11,"label"),L(12,"Age"),M(),x(13,"input",4),de("input",function(o){return r.age.set(o.target.valueAsNumber)}),M(),x(14,"label"),L(15,"Gender"),M(),x(16,"input",5),de("input",function(o){return r.gender.set(o.target.value)}),M(),x(17,"label"),L(18,"Sickness Diagnosed"),M(),x(19,"input",6),de("input",function(o){return r.sicknessDiagnosed.set(o.target.value)}),M(),x(20,"label"),L(21,"Treatment Provided"),M(),x(22,"textarea",7),de("input",function(o){return r.treatmentProvided.set(o.target.value)}),M(),x(23,"label"),L(24,"Attending Physician"),M(),x(25,"input",8),de("input",function(o){return r.attendingPhysician.set(o.target.value)}),M(),x(26,"button",9),de("click",function(){return r.addRecord()}),L(27),M()(),x(28,"div",10)(29,"h2"),L(30,"Daily Service Records"),M(),x(31,"table")(32,"thead")(33,"tr")(34,"th"),L(35,"Date"),M(),x(36,"th"),L(37,"Patient Name"),M(),x(38,"th"),L(39,"Age"),M(),x(40,"th"),L(41,"Gender"),M(),x(42,"th"),L(43,"Sickness Diagnosed"),M(),x(44,"th"),L(45,"Treatment Provided"),M(),x(46,"th"),L(47,"Attending Physician"),M(),x(48,"th"),L(49,"Action"),M()()(),x(50,"tbody"),Vr(51,JU,20,7,"tr",11),M()()(),wt(52,"router-outlet"),M()),t&2&&(K(3),Ae(r.title()),K(4),Se("value",r.date()),K(3),Se("value",r.patientName()),K(3),Se("value",r.age()),K(3),Se("value",r.gender()),K(3),Se("value",r.sicknessDiagnosed()),K(3),Se("value",r.treatmentProvided()),K(3),Se("value",r.attendingPhysician()),K(2),rr(" ",r.editingId()?"Update Record":"Save"," "),K(24),Se("ngForOf",r.records))},dependencies:[$r,Br,Ds,mn],styles:[".module-container[_ngcontent-%COMP%]{padding:30px 20px;display:flex;flex-wrap:wrap;gap:30px;justify-content:center;align-items:flex-start}.form-section[_ngcontent-%COMP%]{flex:1 1 400px;max-width:500px;padding:30px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;height:fit-content}.form-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:20px;color:#004d40}.form-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-bottom:25px}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:10px;text-align:left;font-weight:700;font-size:18px;color:#333}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;margin-bottom:25px;margin-top:5px;padding:15px;border:1px solid #ccc;border-radius:4px;font-size:16px}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.list-section[_ngcontent-%COMP%]{flex:999 1 600px;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px;border:1px solid #ddd;text-align:left;font-size:16px}th[_ngcontent-%COMP%]{white-space:nowrap;background-color:#f4f4f4;font-weight:700}"]})};function XU(n,e){if(n&1){let t=$i();x(0,"tr")(1,"td"),L(2),M(),x(3,"td"),L(4),M(),x(5,"td"),L(6),M(),x(7,"td"),L(8),M(),x(9,"td"),L(10),M(),x(11,"td"),L(12),M(),x(13,"td"),L(14),M(),x(15,"td")(16,"button",12),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.startEditRecord(i.id,i.date,i.patientName,i.age,i.gender,i.animalType,i.rabiesStatus,i.treatmentGiven))}),L(17,"Edit"),M(),x(18,"button",13),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.deleteRecord(i.id))}),L(19,"Delete"),M()()()}if(n&2){let t=e.$implicit;K(2),Ae(t.date),K(2),Ae(t.patientName),K(2),Ae(t.age),K(2),Ae(t.gender),K(2),Ae(t.animalType),K(2),Ae(t.rabiesStatus),K(2),Ae(t.treatmentGiven)}}var ff=class n{constructor(e){this.firestore=e;let t=yr(this.firestore,"rabies_cases");ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}title=le("Rabies Case Report");date=le("");patientName=le("");age=le(null);gender=le("");animalType=le("");rabiesStatus=le("");treatmentGiven=le("");editingId=le(null);records=[];resetForm(){this.date.set(""),this.patientName.set(""),this.age.set(null),this.gender.set(""),this.animalType.set(""),this.rabiesStatus.set(""),this.treatmentGiven.set(""),this.editingId.set(null)}addRecord(){let e=this.date(),t=this.patientName(),r=this.age(),i=this.gender(),o=this.animalType(),s=this.rabiesStatus(),c=this.treatmentGiven(),u=this.editingId();if(e&&t&&r){let l=yr(this.firestore,"rabies_cases");u?this.editRecord(u,e,t,r,i,o,s,c):(na(l,{date:e,patientName:t,age:r,gender:i,animalType:o,rabiesStatus:s,treatmentGiven:c}),this.resetForm())}}startEditRecord(e,t,r,i,o,s,c,u){this.date.set(t),this.patientName.set(r),this.age.set(i),this.gender.set(o),this.animalType.set(s),this.rabiesStatus.set(c),this.treatmentGiven.set(u),this.editingId.set(e)}deleteRecord(e){let t=vr(this.firestore,`rabies_cases/${e}`);ra(t),this.editingId()===e&&this.resetForm()}editRecord(e,t,r,i,o,s,c,u){let l=vr(this.firestore,`rabies_cases/${e}`);ia(l,{date:t,patientName:r,age:i,gender:o,animalType:s,rabiesStatus:c,treatmentGiven:u}),this.resetForm()}static \u0275fac=function(t){return new(t||n)(Ke(In))};static \u0275cmp=hn({type:n,selectors:[["app-rabies-case"]],decls:53,vars:10,consts:[[1,"module-container"],[1,"form-section"],["type","date","placeholder","Date of incident",3,"input","value"],["type","text","placeholder","Name of the victim",3,"input","value"],["type","number","placeholder","Patient age",3,"input","value"],["type","text","placeholder","Male / Female / Other",3,"input","value"],["type","text","placeholder","Dog, Cat, Monkey, etc.",3,"input","value"],["type","text","placeholder","Positive / Negative / Unknown",3,"input","value"],["type","text","placeholder","Anti-rabies vaccine, first aid, etc.",3,"input","value"],[1,"primary-btn",2,"width","100%",3,"click"],[1,"list-section"],[4,"ngFor","ngForOf"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"h1"),L(3),M(),wt(4,"hr"),x(5,"label"),L(6,"Date of Incident"),M(),x(7,"input",2),de("input",function(o){return r.date.set(o.target.value)}),M(),x(8,"label"),L(9,"Patient Name"),M(),x(10,"input",3),de("input",function(o){return r.patientName.set(o.target.value)}),M(),x(11,"label"),L(12,"Age"),M(),x(13,"input",4),de("input",function(o){return r.age.set(o.target.valueAsNumber)}),M(),x(14,"label"),L(15,"Gender"),M(),x(16,"input",5),de("input",function(o){return r.gender.set(o.target.value)}),M(),x(17,"label"),L(18,"Animal Type"),M(),x(19,"input",6),de("input",function(o){return r.animalType.set(o.target.value)}),M(),x(20,"label"),L(21,"Rabies Status"),M(),x(22,"input",7),de("input",function(o){return r.rabiesStatus.set(o.target.value)}),M(),x(23,"label"),L(24,"Treatment Given"),M(),x(25,"input",8),de("input",function(o){return r.treatmentGiven.set(o.target.value)}),M(),x(26,"button",9),de("click",function(){return r.addRecord()}),L(27),M()(),x(28,"div",10)(29,"h2"),L(30,"Rabies Case Reports"),M(),x(31,"table")(32,"thead")(33,"tr")(34,"th"),L(35,"Date"),M(),x(36,"th"),L(37,"Patient Name"),M(),x(38,"th"),L(39,"Age"),M(),x(40,"th"),L(41,"Gender"),M(),x(42,"th"),L(43,"Animal Type"),M(),x(44,"th"),L(45,"Rabies Status"),M(),x(46,"th"),L(47,"Treatment Given"),M(),x(48,"th"),L(49,"Action"),M()()(),x(50,"tbody"),Vr(51,XU,20,7,"tr",11),M()()(),wt(52,"router-outlet"),M()),t&2&&(K(3),Ae(r.title()),K(4),Se("value",r.date()),K(3),Se("value",r.patientName()),K(3),Se("value",r.age()),K(3),Se("value",r.gender()),K(3),Se("value",r.animalType()),K(3),Se("value",r.rabiesStatus()),K(3),Se("value",r.treatmentGiven()),K(2),rr(" ",r.editingId()?"Update Record":"Save"," "),K(24),Se("ngForOf",r.records))},dependencies:[$r,Br,Ds,ly,mn],styles:[".module-container[_ngcontent-%COMP%]{padding:30px 20px;display:flex;flex-wrap:wrap;gap:30px;justify-content:center;align-items:flex-start}.form-section[_ngcontent-%COMP%]{flex:1 1 400px;max-width:500px;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;height:fit-content}.form-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{text-align:center;margin-left:auto;margin-right:auto}.list-section[_ngcontent-%COMP%]{flex:999 1 600px;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;overflow-x:auto}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:8px;text-align:left;font-weight:700;font-size:16px}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;margin-bottom:20px;margin-top:5px;padding:12px;border:1px solid #ccc;border-radius:4px;font-size:16px}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #ddd;text-align:left;font-size:15px}th[_ngcontent-%COMP%]{white-space:nowrap;background-color:#f4f4f4}"]})};function eB(n,e){if(n&1){let t=$i();x(0,"tr")(1,"td"),L(2),M(),x(3,"td"),L(4),M(),x(5,"td"),L(6),M(),x(7,"td"),L(8),M(),x(9,"td")(10,"button",9),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.startEditRecord(i.id,i.date,i.sourceAddress,i.waterStatus,i.remarks))}),L(11,"Edit"),M(),x(12,"button",10),de("click",function(){let i=cn(t).$implicit,o=Rn();return un(o.deleteRecord(i.id))}),L(13,"Delete"),M()()()}if(n&2){let t=e.$implicit;K(2),Ae(t.date),K(2),Ae(t.sourceAddress),K(2),Ae(t.waterStatus),K(2),Ae(t.remarks)}}var pf=class n{constructor(e){this.firestore=e;let t=yr(this.firestore,"water_analysis_results");ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}title=le("Water Analysis Result");date=le("");sourceAddress=le("");waterStatus=le("");remarks=le("");editingId=le(null);records=[];resetForm(){this.date.set(""),this.sourceAddress.set(""),this.waterStatus.set(""),this.remarks.set(""),this.editingId.set(null)}addRecord(){let e=this.date(),t=this.sourceAddress(),r=this.waterStatus(),i=this.remarks(),o=this.editingId();if(e&&t){let s=yr(this.firestore,"water_analysis_results");o?this.editRecord(o,e,t,r,i):(na(s,{date:e,sourceAddress:t,waterStatus:r,remarks:i}),this.resetForm())}}startEditRecord(e,t,r,i,o){this.date.set(t),this.sourceAddress.set(r),this.waterStatus.set(i),this.remarks.set(o),this.editingId.set(e)}deleteRecord(e){let t=vr(this.firestore,`water_analysis_results/${e}`);ra(t),this.editingId()===e&&this.resetForm()}editRecord(e,t,r,i,o){let s=vr(this.firestore,`water_analysis_results/${e}`);ia(s,{date:t,sourceAddress:r,waterStatus:i,remarks:o}),this.resetForm()}static \u0275fac=function(t){return new(t||n)(Ke(In))};static \u0275cmp=hn({type:n,selectors:[["app-water-analysis"]],decls:38,vars:7,consts:[[1,"module-container"],[1,"form-section"],["type","date","placeholder","When the sample was taken",3,"input","value"],["type","text","placeholder","Where the water was collected",3,"input","value"],["type","text","placeholder","Potable / Not Potable",3,"input","value"],["placeholder","Explanation for the result",3,"input","value"],[1,"primary-btn",2,"width","100%",3,"click"],[1,"list-section"],[4,"ngFor","ngForOf"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"h1"),L(3),M(),wt(4,"hr"),x(5,"label"),L(6,"Date Sample Taken"),M(),x(7,"input",2),de("input",function(o){return r.date.set(o.target.value)}),M(),x(8,"label"),L(9,"Source Address"),M(),x(10,"input",3),de("input",function(o){return r.sourceAddress.set(o.target.value)}),M(),x(11,"label"),L(12,"Water Status"),M(),x(13,"input",4),de("input",function(o){return r.waterStatus.set(o.target.value)}),M(),x(14,"label"),L(15,"Remarks"),M(),x(16,"textarea",5),de("input",function(o){return r.remarks.set(o.target.value)}),M(),x(17,"button",6),de("click",function(){return r.addRecord()}),L(18),M()(),x(19,"div",7)(20,"h2"),L(21,"Water Analysis Results"),M(),x(22,"table")(23,"thead")(24,"tr")(25,"th"),L(26,"Date Sample Taken"),M(),x(27,"th"),L(28,"Source Address"),M(),x(29,"th"),L(30,"Water Status"),M(),x(31,"th"),L(32,"Remarks"),M(),x(33,"th"),L(34,"Action"),M()()(),x(35,"tbody"),Vr(36,eB,14,4,"tr",8),M()()(),wt(37,"router-outlet"),M()),t&2&&(K(3),Ae(r.title()),K(4),Se("value",r.date()),K(3),Se("value",r.sourceAddress()),K(3),Se("value",r.waterStatus()),K(3),Se("value",r.remarks()),K(2),rr(" ",r.editingId()?"Update Record":"Save"," "),K(18),Se("ngForOf",r.records))},dependencies:[$r,Br,Ds,mn],styles:[".module-container[_ngcontent-%COMP%]{padding:30px 20px;display:flex;flex-wrap:wrap;gap:30px;justify-content:center;align-items:flex-start}.form-section[_ngcontent-%COMP%]{flex:1 1 400px;max-width:500px;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;height:fit-content}.form-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{text-align:center;margin-left:auto;margin-right:auto}.list-section[_ngcontent-%COMP%]{flex:999 1 600px;padding:25px;background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000000d;overflow-x:auto}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:8px;text-align:left;font-weight:700;font-size:16px}.form-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;margin-bottom:20px;margin-top:5px;padding:12px;border:1px solid #ccc;border-radius:4px;font-size:16px}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #ddd;text-align:left;font-size:15px}th[_ngcontent-%COMP%]{white-space:nowrap;background-color:#f4f4f4}"]})};var bR=[{path:"",redirectTo:"daily-service-record",pathMatch:"full"},{path:"daily-service-record",component:hf},{path:"rabies-case",component:ff},{path:"water-analysis",component:pf}];xg({providedIn:"root"});var CR={production:!1,firebase:{apiKey:"AIzaSyBivffO0qFsiotJkSeUfUSsHjNJwehYEIM",authDomain:"clinic-management-system-6dacc.firebaseapp.com",projectId:"clinic-management-system-6dacc",storageBucket:"clinic-management-system-6dacc.firebasestorage.app",messagingSenderId:"495949629078",appId:"1:495949629078:web:b9ce9f7c4ca9b6adee24b7",measurementId:"G-GBXEKQM6NC"}};var SR={providers:[og(),dm({eventCoalescing:!0}),cy(bR),E0(()=>I0(CR.firebase)),DR(()=>TR())]};var gf=class n{title="finalslab2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=hn({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"Links"],["routerLink",""],["routerLink","rabies-case"],["routerLink","water-analysis"]],template:function(t,r){t&1&&(x(0,"main")(1,"div",0)(2,"a",1),L(3,"Daily Service Record"),M(),x(4,"a",2),L(5,"Rabies Case Report"),M(),x(6,"a",3),L(7,"Water Analysis Result"),M()(),wt(8,"router-outlet"),M())},dependencies:[mn,zd],styles:[".Links[_ngcontent-%COMP%]{background-color:#00796b;padding:10px 20px;box-shadow:0 4px 6px #0000001a;display:flex;justify-content:flex-start}.Links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:8px 15px;margin-right:15px;border-radius:4px;transition:background-color .3s}.Links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#004d40}main[_ngcontent-%COMP%]{padding:0}"]})};km(gf,SR).catch(n=>console.error(n));
